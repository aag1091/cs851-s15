<!DOCTYPE html>
<html>
<head> <script>(function(){var a=window.location;/^m\..+\.com$/.test(a.host)&&!/iphone|ipod|android|mobile/i.test(navigator.userAgent)&&a.replace(a.href.replace(/m\./,""))})()</script> <meta charset="utf-8" /> <link rel="dns-prefetch" href="//api-mobileweb.soundcloud.com" /> <link rel="dns-prefetch" href="//sb.scorecardresearch.com" /> <link rel="dns-prefetch" href="//eventlogger.soundcloud.com" /> <link rel="dns-prefetch" href="//api.soundcloud.com" /> <link rel="dns-prefetch" href="//i1.sndcdn.com" /> <link rel="dns-prefetch" href="//i2.sndcdn.com" /> <link rel="dns-prefetch" href="//i3.sndcdn.com" /> <link rel="dns-prefetch" href="//i4.sndcdn.com" /> <link rel="dns-prefetch" href="//w1.sndcdn.com" /> <link rel="dns-prefetch" href="//wis.sndcdn.com" /> <title>SoundCloud - Hear the worldâ€™s sounds</title> <meta content="record, sounds, share, sound, audio, tracks, music, soundcloud" name="keywords" /> <meta content="Explore the largest community of artists, bands, podcasters and creators of music &amp; audio" name="description" /> <meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1, user-scalable=no" /> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /> <!--[if IE]> <meta content="true" name="MSSmartTagsPreventParsing"> <meta content="false" http-equiv="imagetoolbar"> <![endif]--> <meta content="19507961798" property="fb:app_id" /> <meta content="SoundCloud" property="og:site_name" /> <meta name="sc-loader" id="__sc-loader" content="https://m.soundcloud.com/assets/images/ldpi/loader-81295ad2.gif" /> <link rel="shortcut icon" href="https://m.soundcloud.com/assets/images/sc-icons/favicon-9c79c761.ico" /> <link rel="icon" href="https://m.soundcloud.com/assets/images/sc-icons/favicon_16-9c79c761.png" /> <link rel="icon" sizes="32x32" href="https://m.soundcloud.com/assets/images/sc-icons/favicon_32-9c79c761.png" /> <link rel="icon" sizes="64x64" href="https://m.soundcloud.com/assets/images/sc-icons/favicon_64-9c79c761.png" /> <link rel="apple-touch-icon" sizes="57x57" href="https://m.soundcloud.com/assets/images/sc-icons/iphone_ios6-9c79c761.png" /> <link rel="apple-touch-icon" sizes="114x114" href="https://m.soundcloud.com/assets/images/sc-icons/iphone_ios6@2x-9c79c761.png" /> <link rel="apple-touch-icon" sizes="60x60" href="https://m.soundcloud.com/assets/images/sc-icons/iphone-9c79c761.png" /> <link rel="apple-touch-icon" sizes="120x120" href="https://m.soundcloud.com/assets/images/sc-icons/iphone@2x-9c79c761.png" /> <meta name="application-name" content="SoundCloud" /> <meta name="msapplication-tooltip" content="Launch SoundCloud" /> <meta name="msapplication-TileColor" content="#ff6600" /> <meta name="msapplication-starturl" content="https://soundcloud.com" /> <meta name="msapplication-tap-highlight" content="no" /> <script> (function(){ var el, dpr = window.devicePixelRatio, dpi = dpr >= 2 ? 'hdpi' : dpr > 1 ? 'mdpi' : 'ldpi'; el = document.createElement('style'); el.innerHTML = '.errorVisual{background:url(https://m.soundcloud.com/assets/images/ldpi/errors/500-a53573d7.png) 0 0 no-repeat;background-size:448px 80px}.errorVisual.error__404{background-image:url(https://m.soundcloud.com/assets/images/ldpi/errors/404-a53573d7.png);background-size:420px 120px}'.replace('/\/ldpi\//', dpi);document.querySelector('head').appendChild(el); }());</script><style>.sc-ir{border:0;font:0/0 a;text-shadow:none;color:transparent;background-color:transparent}.sc-hidden{display:none!important;visibility:hidden}.sc-visuallyhidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.sc-visuallyhidden.sc-focusable:active,.sc-visuallyhidden.sc-focusable:focus{clip:auto;height:auto;margin:0;overflow:visible;position:static;width:auto}.sc-invisible{visibility:hidden}.sc-media,.sc-media-content,.sc-media-body{overflow:hidden}.sc-media-image,.sc-media-left{float:left;margin-right:10px}.sc-media-extra,.sc-media-right{float:right;margin-left:10px}.sc-media-image img,.sc-media-extra img,.sc-media-object{display:block}.sc-text{color:#333}.sc-text-light{color:#999}.sc-text-verylight{color:#ccc}.sc-text-link{color:#06c}.sc-border-dark{border:1px solid #e5e5e5}.sc-border-dark-top{border-top:1px solid #e5e5e5}.sc-border-dark-right{border-right:1px solid #e5e5e5}.sc-border-dark-bottom{border-bottom:1px solid #e5e5e5}.sc-border-dark-left{border-left:1px solid #e5e5e5}.sc-border-light{border:1px solid #f2f2f2}.sc-border-light-top{border-top:1px solid #f2f2f2}.sc-border-light-right{border-right:1px solid #f2f2f2}.sc-border-light-bottom{border-bottom:1px solid #f2f2f2}.sc-border-light-left{border-left:1px solid #f2f2f2}.sc-truncate{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.sc-selection-text{-webkit-user-select:text;-khtml-user-select:text;-moz-user-select:text;-o-user-select:text;user-select:text;cursor:auto}.sc-selection-disabled{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-o-user-select:none;user-select:none;cursor:default;outline:0}*,:before,:after{-webkit-tap-highlight-color:rgba(0,0,0,0);margin:0;padding:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}audio,canvas{display:inline-block}html{font-family:"Lucida Grande",Lucida,"Helvetica Neue",Helvetica,Arial,sans-serif;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;height:100%}body{height:100%}a{text-decoration:none}ul,li{list-style:none}img{border:0}svg:not(:root){overflow:hidden}button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}button,input{line-height:normal}button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}input[type="checkbox"],input[type="radio"]{padding:0}input[type="search"]{-webkit-appearance:none}input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}textarea{overflow:auto;vertical-align:top}table{border-collapse:collapse;border-spacing:0}h1,h2,h3,h4,h5,h6{font-weight:400}.g-moving-element{will-change:transform;transform:translateZ(0)}.g-box-full{display:block;width:100%;height:100%;position:relative}.g-z-index-hidden{z-index:-1}.g-z-index-banner{z-index:1}.g-z-index-upsell{z-index:2}.g-z-index-header{z-index:3}.g-z-index-overlay{z-index:4}.g-z-index-app-loading{z-index:5!important}.g-image-fill{height:0;padding-bottom:100%}.g-background-cover{background-size:cover;background-position:50% 50%;background-repeat:none;height:100%;width:100%}.g-icon:before{float:left;content:'';background-repeat:no-repeat;background-position:0 0;margin-top:2px;margin-right:4px}.g-transition-fade{-webkit-transition:opacity .25s;transition:opacity .25s}.g-transition-fade-out{opacity:0}.g-transition-fade-in{opacity:1}.g-transition-translate{-webkit-transition:-webkit-transform .25s cubic-bezier(.645,.045,.355,1),opacity .25s cubic-bezier(.645,.045,.355,1);transition:transform .25s cubic-bezier(.645,.045,.355,1),opacity .25s cubic-bezier(.645,.045,.355,1)}.g-transition-slide-top-in{-webkit-transform:translateY(0);transform:translateY(0);opacity:1}.g-transition-slide-top-out{-webkit-transform:translateY(-100%);transform:translateY(-100%);opacity:0}.g-font-10{font-size:10px;line-height:12px}.g-font-12{font-size:12px;line-height:15px}.g-font-14{font-size:14px;line-height:16px}.g-font-16{font-size:16px;line-height:19px}.g-font-20{font-size:20px;line-height:22px}.g-type-shrinkwrap-inline{display:inline;background:rgba(0,0,0,.8);color:#fff;padding:1px 0;box-shadow:-6px 0 0 rgba(0,0,0,.8),6px 0 0 rgba(0,0,0,.8);-webkit-font-smoothing:antialiased}.g-type-bucket-title{padding:0 10px;line-height:55px;border-bottom:1px solid #f2f2f2;background:#fff}.g-button{display:inline-block;position:relative;height:26px;margin:0;padding:2px 10px;border:1px solid rgb(225,225,225);border-radius:4px;background-color:#fcfcfc;background-image:-webkit-linear-gradient(rgba(255,255,255,.0),rgba(235,235,235,.3) 60%,rgba(225,225,225,.6));background-image:linear-gradient(rgba(255,255,255,.0),rgba(235,235,235,.3) 60%,rgba(225,225,225,.6));background-clip:padding;cursor:pointer;overflow:hidden;color:#333;text-shadow:0 1px 0 #fff;font-size:14px;line-height:20px;white-space:nowrap;font-family:"Interstate","Lucida Grande","Lucida Sans Unicode","Lucida Sans",Garuda,Verdana,Tahoma,sans-serif;font-weight:100;text-align:center;vertical-align:baseline;-webkit-box-shadow:0 1px 2px rgba(0,0,0,.02),inset 0 1px 0 rgba(255,255,255,.7),inset -1px 0 0 rgba(255,255,255,.7),inset 0 -1px 0 rgba(255,255,255,.5),inset 1px 0 0 rgba(255,255,255,.7);box-shadow:0 1px 2px rgba(0,0,0,.02),inset 0 1px 0 rgba(255,255,255,.7),inset -1px 0 0 rgba(255,255,255,.7),inset 0 -1px 0 rgba(255,255,255,.5),inset 1px 0 0 rgba(255,255,255,.7);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.g-button-nostyle,.g-button-nostyle:hover,.g-button-nostyle:focus,.g-button-nostyle:active{border:0;background:none;text-shadow:none;-webkit-box-shadow:none;box-shadow:none;-webkit-transition:none;-moz-transition:none;-o-transition:none;transition:none}.errorPage{background:#efefef;height:100%}.errorPage__inner{height:100%;position:relative;text-align:center;overflow:hidden}.errorVisual{position:absolute;left:50%;top:96px;width:448px;height:80px;margin-left:-86px}.errorVisual.error__404{top:56px;width:420px;height:120px;margin-left:-60px}.errorMessage{padding-top:228px}.errorTitle{color:#666}.errorText{margin-top:18px;color:#666}.g-touch-padding{position:relative}.g-touch-padding:before{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;content:'';position:absolute;left:0;top:0;padding:12px;margin:-12px 0 0 -12px;width:100%;height:100%}.g-native-scroll{width:100%;height:100%;position:fixed;overflow:scroll;-webkit-overflow-scrolling:touch}.g-list-wrapper{border-top:1px solid #ccc;border-bottom:1px solid #ccc}.g-list .g-list-item{border-top:1px solid #f2f2f2}.g-list .g-list-item:first-child{border-top:0}.g-list-vertical .g-list-item{float:left;margin:0 0 0 10px;border-top:0}.g-badge{position:relative}.g-badge-link{display:block;overflow:hidden;padding:15px 10px}.promoted>.g-badge-link{height:111px}.g-badge-stats{overflow:hidden}.g-badge-link{background:#fff}.g-badge-link:active{background:#f2f2f2}.g-badge-info{min-height:60px}.g-badge-username{color:#999;font-weight:400;padding:0 32px 4px 0}.g-badge-title{padding:0 0 10px;color:#333}.g-badge-playing-indicator{color:#f50;font-size:12px}.g-badge-reposted-indicator{color:#999;font-size:12px}.g-badge-playing-indicator:before{width:12px;height:10px;background-image:url(https://m.soundcloud.com/assets/images/ldpi/badge/nowplaying-abecd0c3.png);background-size:100% auto}.g-badge-reposted-indicator:before{margin-top:4px;width:16px;height:8px;background-image:url(https://m.soundcloud.com/assets/images/ldpi/badge/reposted-a4945913.png);background-size:100% auto}.g-badge-timecode{position:absolute;top:17px;right:10px;color:#999;font-size:12px}.g-badge-vertical.g-badge-link{margin:0;padding:15px 0;height:auto}.g-badge-vertical .g-badge-info{margin-top:12px}.g-play-indicator{background:#f50;height:3px;position:absolute;top:0;left:0;width:100%;-webkit-transition:-webkit-transform .1s linear;transition:transform .1s linear}.g-header-artwork-info{position:absolute;z-index:1;bottom:12px;left:18px;max-width:95%;margin-right:18px}.g-header-artwork-info-content{margin:0 0 4px}.g-header-artwork-image{position:relative}.g-header-artwork-controls{position:absolute;top:50%;left:0;right:0;height:80px;margin-top:-40px}.g-header-artwork-title{font-size:18px;line-height:24px}.g-header-artwork-title a{color:#fff}.g-header-artwork-text{color:#999;font-size:14px;line-height:19px}.g-play-button{position:absolute;pointer-events:auto;border:1px solid #fff;border-radius:40px;background:rgba(0,0,0,.25) url(https://m.soundcloud.com/assets/images/ldpi/player/play_pause_button-e03e9a61.png) 2px -78px no-repeat;width:80px;height:80px;left:50%;margin-left:-40px;-webkit-transition:background-color .1s ease-out,opacity 2s cubic-bezier(1,.01,.81,1);transition:background-color .1s ease-out,opacity 2s cubic-bezier(1,.01,.81,1)}.g-play-button:active{background-color:rgba(0,0,0,.5)}</style></head>
<body> <div id="app"> <style>body{background:#f2f2f2}.header{height:44px;box-shadow:0 0 2px 0 rgba(0,0,0,.5);background:#fff}.header__logo{background:url(https://m.soundcloud.com/assets/images/hdpi/logo-881c7ae2.png) 0 50% no-repeat;background-size:128px 16px;width:128px;height:44px;margin:0 auto;display:block}#header__loading{position:absolute;top:14px;right:19px;margin-left:-6px;width:16px;height:16px;background:0 0 no-repeat;background-size:16px 16px}</style> <header id="header" class="header g-z-index-header"> <div class="header__content"> <span class="header__logo"></span> <div id="header__loading" class="sc-hidden"></div> </div> </header> <script>setTimeout(function(){var a=document.getElementById("header__loading");a&&(a.style.backgroundImage=document.getElementById("__sc-loader").content,a.className="")},5e3)</script> <noscript> <style>.errorVisual.error__javascript{top:112px;width:428px;height:64px;margin-left:-70px;background:url(https://m.soundcloud.com/assets/images/ldpi/errors/javascript-a53573d7.png) 0 0 no-repeat;background-size:428px 64px}@media (-webkit-min-device-pixel-ratio:1.5),(min-resolution:1.5dppx),(min-resolution:144dpi){.errorVisual{background-image:url(https://m.soundcloud.com/assets/images/mdpi/errors/javascript-a53573d7.png)}}@media (-webkit-min-device-pixel-ratio:2),(min-resolution:2dppx),(min-resolution:192dpi){.errorVisual{background-image:url(https://m.soundcloud.com/assets/images/hdpi/errors/javascript-a53573d7.png)}}</style> <div class="errorPage__inner"> <div class="errorVisual error__javascript"></div> <div class="errorMessage"> <h1 class="errorTitle g-font-20">JavaScript is disabled</h1> <p class="errorText g-font-14">To continue, go to Settings and turn it on</p> </div> </div> </noscript> <div id="error__timeout" class="errorPage__inner sc-hidden"> <div class="errorVisual"></div> <div class="errorMessage"> <h1 class="errorTitle g-font-20">Something went wrong</h1> <p class="errorText g-font-14">Refresh and try again</p> </div> </div> <script>function displayError(){var a=document.getElementById("error__timeout");headerLoading=document.getElementById("header__loading"),a&&headerLoading&&(a.className="errorPage__inner",headerLoading.className="sc-hidden")}setTimeout(displayError,15e3),window.onerror=displayError</script> </div>
<script>var requirejs,require,define;(function(a){function l(a,b){return j.call(a,b)}function m(a,b){var c,d,e,f,g,i,j,k,l,m,n=b&&b.split("/"),o=h.map,p=o&&o["*"]||{};if(a&&a.charAt(0)===".")if(b){n=n.slice(0,n.length-1),a=n.concat(a.split("/"));for(k=0;k<a.length;k+=1){m=a[k];if(m===".")a.splice(k,1),k-=1;else if(m==="..")if(k!==1||a[2]!==".."&&a[0]!=="..")k>0&&(a.splice(k-1,2),k-=2);else break}a=a.join("/")}else a.indexOf("./")===0&&(a=a.substring(2));if((n||p)&&o){c=a.split("/");for(k=c.length;k>0;k-=1){d=c.slice(0,k).join("/");if(n)for(l=n.length;l>0;l-=1){e=o[n.slice(0,l).join("/")];if(e){e=e[d];if(e){f=e,g=k;break}}}if(f)break;!i&&p&&p[d]&&(i=p[d],j=k)}!f&&i&&(f=i,g=j),f&&(c.splice(0,g,f),a=c.join("/"))}return a}function n(b,d){return function(){return c.apply(a,k.call(arguments,0).concat([b,d]))}}function o(a){return function(b){return m(b,a)}}function p(a){return function(b){f[a]=b}}function q(c){if(l(g,c)){var d=g[c];delete g[c],i[c]=!0,b.apply(a,d)}if(!l(f,c)&&!l(i,c))throw new Error("No "+c);return f[c]}function r(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function s(a){return function(){return h&&h.config&&h.config[a]||{}}}var b,c,d,e,f={},g={},h={},i={},j=Object.prototype.hasOwnProperty,k=[].slice;d=function(a,b){var c,d=r(a),e=d[0];return a=d[1],e&&(e=m(e,b),c=q(e)),e?c&&c.normalize?a=c.normalize(a,o(b)):a=m(a,b):(a=m(a,b),d=r(a),e=d[0],a=d[1],e&&(c=q(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}},e={require:function(a){return n(a)},exports:function(a){var b=f[a];return typeof b!="undefined"?b:f[a]={}},module:function(a){return{id:a,uri:"",exports:f[a],config:s(a)}}},b=function(b,c,h,j){var k,m,o,r,s,t=[],u;j=j||b;if(typeof h=="function"){c=!c.length&&h.length?["require","exports","module"]:c;for(s=0;s<c.length;s+=1){r=d(c[s],j),m=r.f;if(m==="require")t[s]=e.require(b);else if(m==="exports")t[s]=e.exports(b),u=!0;else if(m==="module")k=t[s]=e.module(b);else if(l(f,m)||l(g,m)||l(i,m))t[s]=q(m);else if(r.p)r.p.load(r.n,n(j,!0),p(m),{}),t[s]=f[m];else throw new Error(b+" missing "+m)}o=h.apply(f[b],t);if(b)if(k&&k.exports!==a&&k.exports!==f[b])f[b]=k.exports;else if(o!==a||!u)f[b]=o}else b&&(f[b]=h)},requirejs=require=c=function(f,g,i,j,k){return typeof f=="string"?e[f]?e[f](g):q(d(f,g).f):(f.splice||(h=f,g.splice?(f=g,g=i,i=null):f=a),g=g||function(){},typeof i=="function"&&(i=j,j=k),b(a,f,g,i),c)},c.config=function(a){return h=a,h.deps&&c(h.deps,h.callback),c},define=function(a,b,c){b.splice||(c=b,b=[]),!l(f,a)&&!l(g,a)&&(g[a]=[a,b,c])},define.amd={jQuery:!0}})(),define.unordered=!0,Function.prototype.bind||(Function.prototype.bind=function(a){var b=Array.prototype.slice,c=b.call(arguments,1),d=this,e=function(){},f=function(){if(e.prototype&&this instanceof e){var f=d.apply(new e,c.concat(b.call(arguments)));return Object(f)===f?f:d}return d.apply(a,c.concat(b.call(arguments)))};return e.prototype=d.prototype,f.prototype=new e,f}),function(a){var b=a.prototype,c=6e4,d=864e5,e={millisecond:1,sec:1e3,min:60,hour:60,day:24,month:30,year:12},f=["January","February","March","April","May","June","July","August","September","October","November","December"],g=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];b.toRelativeTime=function(b,c){c=c||a.now();var d=c-this,f=d>0,g,h=null;b=b&&parseInt(b,10)||1e3,d=Math.abs(d);if(d<=b)return f?"Just now":"Right now";for(g in e)if(e.hasOwnProperty(g)){if(d<e[g])break;h=g,d/=e[g]}return d=Math.floor(d),d!==1&&(h+="s"),[f?"":"In",d,h].filter(Boolean).join(" ")},b.format=function(a){var b,c,d,e,h;if(a==="relative")return this.toRelativeTime();b=this.getDate(),c=this.getDay(),d=this.getMonth(),e=this.getFullYear(),h=("0"+this.getMinutes()).substr(-2);switch(a){case"readable":return b+" "+f[d]+" "+e;case"readable_time":return[b,f[d],e,[this.getHours(),h].join(":")].join(" ");case"readable_with_weekday":return g[c]+", "+[b,f[d],e].join(" ");default:return b+"/"+(d+1)+"/"+e}},a.fromString=function(b){var c=a.parse(b);return c?new a(c):new a(b)},function(){var b=0;a.setServerTime=function(c){var e,f;return e=typeof c=="number"?new a(c):a.fromString(c),f=e-a.now(),Math.abs(f)>7*d?!1:(b=f,!0)},a.atServer=function(){return new a(a.now()+b)},a.nowAtServer=function(){return a.now()+b},a.guessTimezone=function(){var e=b%d,f=(new a).getTimezoneOffset();return Math.abs(e)>20*c&&(e=Math.round(e/(30*c))*30*c,f+=e/c),f},a.getTimezoneFormatted=function(a){var b=a>0?"-":"+";return a=Math.abs(a),b+("0"+Math.floor(a/60)).substr(-2)+("0"+a%60).substr(-2)}}()}(Date),function(a,b){typeof module!="undefined"&&module.exports?module.exports=b():a.AudioManager=b()}(this,function(){var a,b,c;return function(d){function o(a,b){return m.call(a,b)}function p(a,b){var c,d,e,f,g,h,i,j,l,m,n=b&&b.split("/"),o=k.map,p=o&&o["*"]||{};if(a&&a.charAt(0)===".")if(b){n=n.slice(0,n.length-1),a=n.concat(a.split("/"));for(j=0;j<a.length;j+=1){m=a[j];if(m===".")a.splice(j,1),j-=1;else if(m==="..")if(j!==1||a[2]!==".."&&a[0]!=="..")j>0&&(a.splice(j-1,2),j-=2);else break}a=a.join("/")}else a.indexOf("./")===0&&(a=a.substring(2));if((n||p)&&o){c=a.split("/");for(j=c.length;j>0;j-=1){d=c.slice(0,j).join("/");if(n)for(l=n.length;l>0;l-=1){e=o[n.slice(0,l).join("/")];if(e){e=e[d];if(e){f=e,g=j;break}}}if(f)break;!h&&p&&p[d]&&(h=p[d],i=j)}!f&&h&&(f=h,g=i),f&&(c.splice(0,g,f),a=c.join("/"))}return a}function q(a,b){return function(){return f.apply(d,n.call(arguments,0).concat([a,b]))}}function r(a){return function(b){return p(b,a)}}function s(a){return function(b){i[a]=b}}function t(a){if(o(j,a)){var b=j[a];delete j[a],l[a]=!0,e.apply(d,b)}if(!o(i,a)&&!o(l,a))throw new Error("No "+a);return i[a]}function u(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function v(a){return function(){return k&&k.config&&k.config[a]||{}}}var e,f,g,h,i={},j={},k={},l={},m=Object.prototype.hasOwnProperty,n=[].slice;g=function(a,b){var c,d=u(a),e=d[0];return a=d[1],e&&(e=p(e,b),c=t(e)),e?c&&c.normalize?a=c.normalize(a,r(b)):a=p(a,b):(a=p(a,b),d=u(a),e=d[0],a=d[1],e&&(c=t(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}},h={require:function(a){return q(a)},exports:function(a){var b=i[a];return typeof b!="undefined"?b:i[a]={}},module:function(a){return{id:a,uri:"",exports:i[a],config:v(a)}}},e=function(a,b,c,e){var f,k,m,n,p,r=[],u;e=e||a;if(typeof c=="function"){b=!b.length&&c.length?["require","exports","module"]:b;for(p=0;p<b.length;p+=1){n=g(b[p],e),k=n.f;if(k==="require")r[p]=h.require(a);else if(k==="exports")r[p]=h.exports(a),u=!0;else if(k==="module")f=r[p]=h.module(a);else if(o(i,k)||o(j,k)||o(l,k))r[p]=t(k);else if(n.p)n.p.load(n.n,q(e,!0),s(k),{}),r[p]=i[k];else throw new Error(a+" missing "+k)}m=c.apply(i[a],r);if(a)if(f&&f.exports!==d&&f.exports!==i[a])i[a]=f.exports;else if(m!==d||!u)i[a]=m}else a&&(i[a]=c)},a=b=f=function(a,b,c,i,j){return typeof a=="string"?h[a]?h[a](b):t(g(a,b).f):(a.splice||(k=a,b.splice?(a=b,b=c,c=null):a=d),b=b||function(){},typeof c=="function"&&(c=i,i=j),i?e(d,a,b,c):setTimeout(function(){e(d,a,b,c)},4),f)},f.config=function(a){return k=a,k.deps&&f(k.deps,k.callback),f},c=function(a,b,c){b.splice||(c=b,b=[]),!o(i,a)&&!o(j,a)&&(j[a]=[a,b,c])},c.amd={jQuery:!0}}(),c("vendor/almond",function(){}),!function(a){function b(a,b,c){if(!a||!E[typeof a])return a;b=b&&typeof c=="undefined"?b:h.createCallback(b,c);var d=a.length;if(c=-1,d&&k(a))for(;++c<d&&(c+="",!1!==b(a[c],c,a)););else for(c in d=typeof a=="function",a)if((!d||"prototype"!=c)&&!1===b(a[c],c,a))break;return a}function d(a,b,c){var d,e=a,f=e;if(!e)return f;var g=arguments,i=0,j=typeof c=="number"?2:g.length;if(3<j&&"function"==typeof g[j-2])var l=h.createCallback(g[--j-1],g[j--],2);else 2<j&&"function"==typeof g[j-1]&&(l=g[--j]);for(;++i<j;)if((e=g[i])&&E[typeof e]){var m=e.length;if(d=-1,m&&k(e))for(;++d<m;)d+="",f[d]=l?l(f[d],e[d]):e[d];else for(d in m=typeof e=="function",e)m&&"prototype"==d||!K.call(e,d)||(f[d]=l?l(f[d],e[d]):e[d])}return f}function e(a){var b,c=[];if(!a||!E[typeof a])return c;var d=a.length;if(b=-1,d&&k(a))for(;++b<d;)b+="",c.push(b);else for(b in d=typeof a=="function",a)d&&"prototype"==b||!K.call(a,b)||c.push(b);return c}function f(){}function g(a){a.length=0,s.length<v&&s.push(a)}function h(){}function i(a,b,c){function d(){var i=arguments,k=f?this:b;return e||(a=b[g]),c.length&&(i=i.length?(i=R.call(i),h?i.concat(c):c.concat(i)):c),this instanceof d?(k=j(a.prototype),i=a.apply(k,i),o(i)?i:k):a.apply(k,i)}var e=n(a),f=!c,g=b;if(f){var h=void 0;c=b}else if(!e)throw new TypeError;return d}function j(a){return o(a)?O(a):{}}function k(a){return M.call(a)==w}function l(a){var c=[];return b(a,function(a,b){n(a)&&c.push(b)}),c.sort()}function m(a,c,d,e,f,i){var j=d===u;if(typeof d=="function"&&!j){d=h.createCallback(d,e,2);var k=d(a,c);if(typeof k!="undefined")return!!k}if(a===c)return 0!==a||1/a==1/c;var l=typeof a,o=typeof c;if(a===a&&(!a||"function"!=l&&"object"!=l)&&(!c||"function"!=o&&"object"!=o))return!1;if(null==a||null==c)return a===c;if(o=M.call(a),l=M.call(c),o==w&&(o=B),l==w&&(l=B),o!=l)return!1;switch(o){case y:case z:return+a==+c;case A:return a!=+a?c!=+c:0==a?1/a==1/c:a==+c;case C:case D:return a==c+""}if(l=o==x,!l){if(K.call(a,"__wrapped__")||K.call(c,"__wrapped__"))return m(a.__wrapped__||a,c.__wrapped__||c,d,e,f,i);if(o!=B)return!1;var o=a.constructor,p=c.constructor;if(o!=p&&!(n(o)&&o instanceof o&&n(p)&&p instanceof p))return!1}for(p=!f,f||(f=s.pop()||[]),i||(i=s.pop()||[]),o=f.length;o--;)if(f[o]==a)return i[o]==c;var q=0,k=!0;if(f.push(a),i.push(c),l){if(o=a.length,q=c.length,k=q==a.length,!k&&!j)return k;for(;q--;)if(l=o,p=c[q],j)for(;l--&&!(k=m(a[l],p,d,e,f,i)););else if(!(k=m(a[q],p,d,e,f,i)))break;return k}return b(c,function(b,c,g){return K.call(g,c)?(q++,k=K.call(a,c)&&m(a[c],b,d,e,f,i)):void 0}),k&&!j&&b(a,function(a,b,c){return K.call(c,b)?k=-1<--q:void 0}),p&&(g(f),g(i)),k}function n(a){return typeof a=="function"}function o(a){return!!a&&!!E[typeof a]}function p(a,b,c){if(b&&typeof c=="undefined"&&T(a)){c=-1;for(var d=a.length;++c<d&&!1!==b(a[c],c,a););}else if(a)if(b=b&&typeof c=="undefined"?b:h.createCallback(b,c),d=a.length,c=-1,typeof d=="number")for(;++c<d&&!1!==b(a[c],c,a););else for(c in d=typeof a=="function",a)if((!d||"prototype"!=c)&&K.call(a,c)&&!1===b(a[c],c,a))break;return a}function q(a,b){return S.fastBind||N&&2<arguments.length?N.call.apply(N,arguments):i(a,b,R.call(arguments,2))}function r(a){return a}var s=[],t=0,u={},v=40,w="[object Arguments]",x="[object Array]",y="[object Boolean]",z="[object Date]",A="[object Number]",B="[object Object]",C="[object RegExp]",D="[object String]",E={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,"undefined":!1},F=E[typeof global]&&global;!F||F.global!==F&&F.window!==F||(a=F);var G=[],F=Error.prototype,H=Object.prototype,I=RegExp("^"+(H.valueOf+"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),J=G.concat,K=H.hasOwnProperty,L=H.propertyIsEnumerable,M=H.toString,N=I.test(N=M.bind)&&N,O=I.test(O=Object.create)&&O,P=I.test(P=Array.isArray)&&P,Q=I.test(Q=Object.keys)&&Q,R=G.slice;a=I.test(a.attachEvent),a=N&&!/\n|true/.test(N+a);var S=h.support={};S.enumErrorProps=L.call(F,"message")||L.call(F,"name"),S.enumPrototypes=!0,S.fastBind=N&&!a,S.nonEnumArgs=!0,O||(j=function(a){if(o(a)){f.prototype=a;var b=new f;f.prototype=null}return b||{}});var T=P||function(a){return a?typeof a=="object"&&M.call(a)==x:!1},U=Q?function(a){return o(a)?S.enumPrototypes&&typeof a=="function"||S.nonEnumArgs&&a.length&&k(a)?e(a):Q(a):[]}:e;n(/x/)&&(n=function(a){return typeof a=="function"&&"[object Function]"==M.call(a)}),h.assign=d,h.bind=q,h.bindAll=function(a){for(var b=1<arguments.length?J.apply(G,R.call(arguments,1)):l(a),c=-1,d=b.length;++c<d;){var e=b[c];a[e]=q(a[e],a)}return a},h.createCallback=function(a,b,c){if(null==a)return r;var d=typeof a;if("function"!=d){if("object"!=d)return function(b){return b[a]};var e=U(a);return function(b){for(var c=e.length,d=!1;c--&&(d=m(b[e[c]],a[e[c]],u)););return d}}return typeof b=="undefined"?a:1===c?function(c){return a.call(b,c)}:2===c?function(c,d){return a.call(b,c,d)}:4===c?function(c,d,e,f){return a.call(b,c,d,e,f)}:function(c,d,e){return a.call(b,c,d,e)}},h.defaults=function(a,b,c){var d,e=a,f=e;if(!e)return f;for(var g=arguments,h=0,i=typeof c=="number"?2:g.length;++h<i;)if((e=g[h])&&E[typeof e]){var j=e.length;if(d=-1,j&&k(e))for(;++d<j;)d+="","undefined"==typeof f[d]&&(f[d]=e[d]);else for(d in j=typeof e=="function",e)j&&"prototype"==d||!K.call(e,d)||"undefined"==typeof f[d]&&(f[d]=e[d])}return f},h.forEach=p,h.forIn=b,h.functions=l,h.invoke=function(a,b){var c=R.call(arguments,2),d=-1,e=typeof b=="function",f=a?a.length:0,g=Array(typeof f=="number"?f:0);return p(a,function(a){g[++d]=(e?b:a[b]).apply(a,c)}),g},h.keys=U,h.once=function(a){var b,c;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}},h.pick=function(a,c,d){var e={};if(typeof c!="function")for(var f=-1,g=J.apply(G,R.call(arguments,1)),i=o(a)?g.length:0;++f<i;){var j=g[f];j in a&&(e[j]=a[j])}else c=h.createCallback(c,d),b(a,function(a,b,d){c(a,b,d)&&(e[b]=a)});return e},h.values=function(a){for(var b=-1,c=U(a),d=c.length,e=Array(d);++b<d;)e[b]=a[c[b]];return e},h.each=p,h.extend=d,h.methods=l,h.identity=r,h.isArguments=k,h.isArray=T,h.isEqual=m,h.isFunction=n,h.isObject=o,h.isString=function(a){return typeof a=="string"||M.call(a)==D},h.uniqueId=function(a){var b=++t;return(null==a?"":a)+""+b},h.VERSION="1.3.1",typeof c=="function"&&typeof c.amd=="object"&&c.amd&&c("underscore",[],function(){return h})}(this),c("browserutils",{supportHTML5Audio:function(){var a;try{if(window.HTMLAudioElement&&typeof Audio!="undefined")return a=new Audio,!0}catch(b){return!1}},supportSourceSwappingWithPreload:function(){return/Firefox/i.test(navigator.userAgent)},isMobile:function(a){var b=window.navigator.userAgent,c=["mobile","iPhone","iPad","iPod","Android","Skyfire"];return c.some(function(a){return a=new RegExp(a,"i"),a.test(b)})},isIE10Mobile:function(){return/IEmobile\/10\.0/gi.test(navigator.userAgent)},canPlayType:function(a){var b=document.createElement("audio");return!b||!b.canPlayType?!1:b.canPlayType(a).match(/maybe|probably/i)?!0:!1},isNativeHlsSupported:function(){var a=navigator.userAgent,b=["iPhone","iPad","iPod"],c,d,e;return c=function(b){return b.test(a)},d=!c(/chrome/i)&&!c(/opera/i)&&c(/safari/i),e=b.some(function(a){return c(new RegExp(a,"i"))}),e||d},isMSESupported:function(){return!!window.MediaSource||!!window.WebKitMediaSource},isMSESupportMPEG:function(){var a=window.MediaSource||window.WebKitMediaSource;return a?a.isTypeSupported("audio/mpeg"):!1}}),c("errors",{FLASH_HLS_PLAYLIST_NOT_FOUND:"HLS_PLAYLIST_NOT_FOUND",FLASH_HLS_PLAYLIST_SECURITY_ERROR:"HLS_SECURITY_ERROR",FLASH_HLS_NOT_VALID_PLAYLIST:"HLS_NOT_VALID_PLAYLIST",FLASH_HLS_NO_TS_IN_PLAYLIST:"HLS_NO_TS_IN_PLAYLIST",FLASH_HLS_NO_PLAYLIST_IN_MANIFEST:"HLS_NO_PLAYLIST_IN_MANIFEST",FLASH_HLS_TS_IS_CORRUPT:"HLS_TS_IS_CORRUPT",FLASH_HLS_FLV_TAG_CORRUPT:"HLS_FLV_TAG_CORRUPT",FLASH_HTTP_FILE_NOT_FOUND:"HTTP_FILE_NOT_FOUND",FLASH_RTMP_CONNECT_FAILED:"RTMP_CONNECT_FAILED",FLASH_RTMP_CONNECT_CLOSED:"RTMP_CONNECT_CLOSED",FLASH_RTMP_CANNOT_PLAY_STREAM:"RTMP_CANNOT_PLAY_STREAM",FLASH_PROXY_CANT_LOAD_FLASH:"CANT_LOAD_FLASH",FLASH_PROXY_FLASH_BLOCKED:"FLASH_PROXY_FLASH_BLOCKED",HTML5_AUDIO_ABORTED:"HTML5_AUDIO_ABORTED",HTML5_AUDIO_NETWORK:"HTML5_AUDIO_NETWORK",HTML5_AUDIO_DECODE:"HTML5_AUDIO_DECODE",HTML5_AUDIO_SRC_NOT_SUPPORTED:"HTML5_AUDIO_SRC_NOT_SUPPORTED",HTML5_AUDIO_ENDED_EARLY:"HTML5_AUDIO_ENDED_EARLY",HTML5_AUDIO_OVERRUN:"HTML5_AUDIO_OVERRUN",MSE_NOT_SUPPORTED:"MSE_NOT_SUPPORTED",MSE_MP3_NOT_SUPPORTED:"MSE_MP3_NOT_SUPPORTED",MSE_HLS_NOT_VALID_PLAYLIST:"MSE_HLS_NOT_VALID_PLAYLIST",MSE_HLS_PLAYLIST_NOT_FOUND:"MSE_HLS_PLAYLIST_NOT_FOUND",MSE_HLS_SEGMENT_NOT_FOUND:"MSE_HLS_SEGMENT_NOT_FOUND"}),c("vendor/events",["require","exports","module","underscore"],function(a,b,c){var d=a("underscore"),e=[],f=e.push,g=e.slice,h=e.splice,i=/\s+/,j=function(a,b,c,d){if(!c)return!0;if(typeof c=="object")for(var e in c)a[b].apply(a,[e,c[e]].concat(d));else{if(!i.test(c))return!0;var f=c.split(i);for(var g=0,h=f.length;g<h;g++)a[b].apply(a,[f[g]].concat(d))}},k=function(a,b){var c,d=-1,e=a.length;switch(b.length){case 0:while(++d<e)c=a[d],c.callback.call(c.ctx);return;case 1:while(++d<e)(c=a[d]).callback.call(c.ctx,b[0]);return;case 2:while(++d<e)(c=a[d]).callback.call(c.ctx,b[0],b[1]);return;case 3:while(++d<e)(c=a[d]).callback.call(c.ctx,b[0],b[1],b[2]);return;default:while(++d<e)(c=a[d]).callback.apply(c.ctx,b)}},l={on:function(a,b,c){if(!j(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,c){if(!j(this,"once",a,[b,c])||!b)return this;var e=this,f=d.once(function(){e.off(a,f),b.apply(this,arguments)});return f._callback=b,this.on(a,f,c)},off:function(a,b,c){var e,f,g,h,i,k,l,m;if(!this._events||!j(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;h=a?[a]:d.keys(this._events);for(i=0,k=h.length;i<k;i++){a=h[i];if(g=this._events[a]){this._events[a]=e=[];if(b||c)for(l=0,m=g.length;l<m;l++)f=g[l],(b&&b!==f.callback&&b!==f.callback._callback||c&&c!==f.context)&&e.push(f);e.length||delete this._events[a]}}return this},trigger:function(a,b){if(!this._events)return this;var b=g.call(arguments,1);if(!j(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&k(c,b),d&&k(d,arguments),this},stopListening:function(a,b,c){var d=this._listeners;if(!d)return this;var e=!b&&!c;typeof b=="object"&&(c=this),a&&((d={})[a._listenerId]=a);for(var f in d)d[f].off(b,c,this),e&&delete this._listeners[f];return this}},m={listenTo:"on",listenToOnce:"once"};d.each(m,function(a,b){l[b]=function(b,c,e){var f=this._listeners||(this._listeners={}),g=b._listenerId||(b._listenerId=d.uniqueId("l"));return f[g]=b,typeof c=="object"&&(e=this),b[a](c,e,this),this}}),l.bind=l.on,l.unbind=l.off,c.exports=l}),c("states",{PLAYING:"playing",LOADING:"loading",SEEKING:"seeking",PAUSED:"paused",ERROR:"error",IDLE:"idle",INITIALIZE:"initialize",ENDED:"ended",DEAD:"dead"}),c("logger",["require","exports","module"],function(a,b,c){var d;c.exports=d=function(a,b,c){this.enabled=c.debug,this.type=a,this.id=b},d.prototype.log=function(a){if(!this.enabled)return;window.console.log("#"+this.type+" "+this.id+"# "+a)}}),c("html5audioplayer",["require","exports","module","underscore","vendor/events","states","errors","logger","browserutils"],function(a,b,c){var d,e=a("underscore"),f=a("vendor/events"),g=a("states"),h=a("errors"),i=a("logger"),j=a("browserutils");c.exports=d=function(a,b){this._id=a.id,this._descriptor=a,this._isLoaded=!1,this._settings=b,this._bufferingTimeout=null,this._currentPosition=0,this._loadedPosition=0,this._prevCurrentPosition=0,this._prevCheckTime=0,this._positionUpdateTimer=0,this._playRequested=!1,this._startFromPosition=0,a.duration&&(this._duration=a.duration),e.bindAll(this,"_onPositionChange","_onHtml5AudioStateChange","_onLoaded","_onLoadedMetadata","_onBuffering"),this._init(),this._toggleEventListeners(!0),this._descriptor.preload&&this._preload(),a.autoPlay?this.play():this._setState(g.IDLE)},e.extend(d.prototype,f),d.prototype.getId=function(){return this._id},d.prototype.getType=function(){return"HTML5 audio"},d.prototype.play=function(a){if(this._isInOneOfStates(g.ERROR,g.DEAD))return;if(this._isInOneOfStates(g.PAUSED,g.ENDED)){this.resume();return}this._logger.log("play"),this._startFromPosition=a||0,this._setState(g.LOADING),this._playRequested=!0,this._isLoaded?this._playAfterLoaded():(this._preload(),this.once("loaded",this._playAfterLoaded))},d.prototype.pause=function(){this._playRequested=!1;if(this._isInOneOfStates(g.ERROR,g.DEAD))return;this._logger.log("pause"),this._html5Audio.pause(),clearTimeout(this._bufferingTimeout),clearInterval(this._positionUpdateTimer)},d.prototype.seek=function(a){var b=!1,c=a/1e3,d=this._html5Audio.seekable,e;if(this._isInOneOfStates(g.ERROR,g.DEAD))return;if(!this._isLoaded){this.once("loaded",function(){this.seek(a)});return}if(j.isIE10Mobile)b=!0;else for(e=0;e<d.length;e++)if(c<=d.end(e)&&c>=d.start(e)){b=!0;break}if(!b)return;this._logger.log("seek"),this._setState(g.SEEKING),this._html5Audio.currentTime=c,this._currentPosition=a,clearTimeout(this._bufferingTimeout)},d.prototype.resume=function(){if(this._isInOneOfStates(g.ERROR,g.DEAD))return;this._logger.log("resume"),this.getState()===g.PAUSED?(this._setState(g.LOADING),this._html5Audio.play(this._html5Audio.currentTime)):this.getState()===g.ENDED&&(this._setState(g.LOADING),this._html5Audio.play(0)),clearInterval(this._positionUpdateTimer),this._positionUpdateTimer=setInterval(this._onPositionChange,this._settings.updateInterval)},d.prototype.setVolume=function(a){if(!this._html5Audio)return;this._html5Audio.volume=a},d.prototype.getVolume=function(){return this._html5Audio?this._html5Audio.volume:1},d.prototype.setMute=function(a){if(!this._html5Audio)return;this._html5Audio.muted=a},d.prototype.getMute=function(){return this._html5Audio?this._html5Audio.muted:!1},d.prototype.getState=function(){return this._state},d.prototype.getCurrentPosition=function(){return this._currentPosition},d.prototype.getLoadedPosition=function(){return this._loadedPosition},d.prototype.getDuration=function(){return this._duration},d.prototype.kill=function(){if(this._state===g.DEAD)return;clearInterval(this._positionUpdateTimer),clearTimeout(this._bufferingTimeout),this._playRequested=!1,this._toggleEventListeners(!1),this._html5Audio.pause(),this._html5Audio.src=null,delete this._html5Audio,this._setState(g.DEAD)},d.prototype.getErrorMessage=function(){return this._errorMessage},d.prototype.getErrorID=function(){return this._errorID},d.prototype._init=function(){this._html5Audio=new Audio,this._html5Audio.mozAudioChannelType="content",this._html5Audio.id=this._settings.audioObjectID+"_"+this._descriptor.id,this._html5Audio.preload="none",this._logger=new i(this.getType(),this._id,this._settings)},d.prototype._preload=function(){this._html5Audio.preload!=="auto"&&(this._logger.log("setting up preload"),this._html5Audio.preload="auto",this._html5Audio.type=this._descriptor.mimeType,this._html5Audio.src=this._descriptor.src,this._html5Audio.load())},d.prototype._playAfterLoaded=function(){if(!this._playRequested)return;this._trySeekToStartPosition(),this._html5Audio.play(),clearInterval(this._positionUpdateTimer),this._positionUpdateTimer=setInterval(this._onPositionChange,this._settings.updateInterval)},d.prototype._setState=function(a){if(this._state===a)return;this._logger.log('state changed "'+a+'"'),this._logger.log("_currentPosition = "+this._currentPosition+", _loadedPosition = "+this._loadedPosition),this._state=a,this.trigger("stateChange",a,this)},d.prototype._isInOneOfStates=function(){for(var a in arguments)if(arguments[a]===this._state)return!0;return!1},d.prototype._toggleEventListeners=function(a){if(!this._html5Audio)return;var b=a?"addEventListener":"removeEventListener";["ended","play","playing","pause","seeking","waiting","seeked","error"].forEach(function(a){this._html5Audio[b](a,this._onHtml5AudioStateChange)},this),this._html5Audio[b]("loadeddata",this._onLoaded),this._html5Audio[b]("loadedmetadata",this._onLoadedMetadata)},d.prototype._updatePositions=function(){this._currentPosition=this._html5Audio.currentTime*1e3,this._html5Audio.seekable.length>0&&(this._loadedPosition=this._html5Audio.seekable.end(0)*1e3)},d.prototype._trySeekToStartPosition=function(){var a;if(this._startFromPosition>0){this._logger.log("seek to start position="+this._startFromPosition),a=this._startFromPosition/1e3,this._html5Audio.currentTime=a;if(this._html5Audio.currentTime===a)return this._startFromPosition=0,!0}return!1},d.prototype._onBuffering=function(){this._setState(g.LOADING)},d.prototype._onLoaded=function(a){this._logger.log('html5 audio event (loaded handler) "'+a.type+'"');if(this._duration===undefined||this._duration===0)this._duration=this._html5Audio.duration*1e3;this._isLoaded=!0,this.trigger("loaded",this)},d.prototype._onLoadedMetadata=function(a){this._logger.log('html5 audio event (loadedmetadata handler) "'+a.type+'"'),this.trigger("loadedmetadata",this)},d.prototype._onPositionChange=function(a){this._updatePositions();var b=this._currentPosition-this._prevCurrentPosition,c,d,e;this.trigger("positionChange",this.getCurrentPosition(),this._loadedPosition,this._duration,this);if(!this._isInOneOfStates(g.PLAYING,g.LOADING)){this._state===g.SEEKING&&b>0&&this._setState(g.PLAYING);return}this._duration!==0&&(this._currentPosition>this._duration||this._currentPosition>this._loadedPosition&&!j.isIE10Mobile)&&this._onHtml5AudioStateChange({type:"ended"}),c=(new Date).valueOf(),d=c-this._prevCheckTime;if(d===0)return;e=b/d,e>.7?(clearTimeout(this._bufferingTimeout),this._setState(g.PLAYING),this._bufferingTimeout=null):this._state===g.PLAYING&&this._bufferingTimeout==null&&(this._bufferingTimeout=setTimeout(this._onBuffering,this._settings.bufferingDelay)),this._prevCurrentPosition=this._currentPosition,this._prevCheckTime=c},d.prototype._onHtml5AudioStateChange=function(a){this._logger.log('html5 audio event (state change handler) "'+a.type+'"'),clearTimeout(this._bufferingTimeout);switch(a.type){case"playing":if(this._trySeekToStartPosition())return;this._updatePositions(),this._setState(g.PLAYING);break;case"pause":this._setState(g.PAUSED);break;case"ended":this._currentPosition=this._loadedPosition=this._duration,this.trigger("positionChange",this.getCurrentPosition(),this._loadedPosition,this._duration,this),clearInterval(this._positionUpdateTimer),this._setState(g.ENDED);break;case"waiting":if(this.getState()===g.SEEKING)break;this._setState(g.LOADING);break;case"seeking":this._setState(g.SEEKING);break;case"seeked":this._updatePositions(),this._html5Audio.paused?this._setState(g.PAUSED):this._setState(g.PLAYING);break;case"error":this._error(this._html5AudioErrorCodeToErrorId(),!0)}},d.prototype._html5AudioErrorCodeToErrorId=function(){return{1:h.HTML5_AUDIO_ABORTED,2:h.HTML5_AUDIO_NETWORK,3:h.HTML5_AUDIO_DECODE,4:h.HTML5_AUDIO_SRC_NOT_SUPPORTED}[this._html5Audio.error.code]},d.prototype._error=function(a,b){var c="error: ";b&&(c="error (native): "),this._errorID=a,this._errorMessage=this._getErrorMessage(this._errorID),this._logger.log(c+this._errorID+" "+this._errorMessage),this._setState(g.ERROR),this._toggleEventListeners(!1)},d.prototype._getErrorMessage=function(a){var b={};return b[h.HTML5_AUDIO_ABORTED]="The fetching process was aborted by the user.",b[h.HTML5_AUDIO_NETWORK]="A network connection lost.",b[h.HTML5_AUDIO_DECODE]="An error occurred while decoding the media resource.",b[h.HTML5_AUDIO_SRC_NOT_SUPPORTED]="The media resource is not suitable.",b[h.HTML5_AUDIO_ENDED_EARLY]="Audio playback ended before the indicated duration of the track.",b[h.HTML5_AUDIO_OVERRUN]="Audio playback continued past end of the track.",b[a]}}),c("hlsaudioplayer",["require","exports","module","underscore","errors","vendor/events","html5audioplayer","logger","states"],function(a,b,c){var d,e=a("underscore"),f=a("errors"),g=a("vendor/events"),h=a("html5audioplayer"),i=a("logger"),j=a("states"),k=1;c.exports=d=function(a,b){h.apply(this,arguments),this._seekPosition=0},e.extend(d.prototype,h.prototype),d.prototype.getType=function(){return"HTML5 HLS audio"},d.prototype.seek=function(a){h.prototype.seek.apply(this,arguments),this._isInOneOfStates(j.LOADING,j.SEEKING)&&(this._seekPosition=a)},d.prototype.getCurrentPosition=function(){if(this._isInOneOfStates(j.LOADING)&&this._seekPosition>0)return this._seekPosition;if(this._isInOneOfStates(j.PLAYING,j.SEEKING)){if(this._seekPosition>=this._currentPosition)return this._seekPosition;this._seekPosition=0}return h.prototype.getCurrentPosition.apply(this,arguments)},d.prototype._onStateChange=function(a){this._logger.log('hls html5 audio event "'+a.type+'"'),clearTimeout(this._bufferingTimeout);switch(a.type){case"playing":if(this._trySeekToStartPosition())return;this.updatePositions(),this._setState(j.PLAYING);break;case"pause":this._setState(j.PAUSED);break;case"ended":if(this._currentPosition+k<this._duration){this._errorID=f.HTML5_AUDIO_ENDED_EARLY,this._errorMessage=this._getErrorMessage(this._errorID),this._logger.log("hls html5 audio error: "+this._errorID+" "+this._errorMessage),this._setState(j.ERROR),this.toggleEventListeners(!1);break}this._currentPosition=this._loadedPosition=this._duration,this.trigger("positionChange",this._currentPosition,this._loadedPosition,this._duration,this),this._setState(j.ENDED),clearInterval(this._positionUpdateTimer);break;case"waiting":if(this.getState()===j.SEEKING)break;this._setState(j.LOADING);break;case"seeking":this._setState(j.SEEKING);break;case"seeked":this.updatePositions(),this._html5Audio.paused&&this._setState(j.PAUSED);break;case"error":this._errorID={1:f.HTML5_AUDIO_ABORTED,2:f.HTML5_AUDIO_NETWORK,3:f.HTML5_AUDIO_DECODE,4:f.HTML5_AUDIO_SRC_NOT_SUPPORTED}[this._html5Audio.error.code],this._errorMessage=this._getErrorMessage(this._errorID),this._logger.log("hls html5 audio error: "+this._errorID+" "+this._errorMessage),this._setState(j.ERROR),this.toggleEventListeners(!1)}}}),c("singleaudioplayer",["require","exports","module","underscore","browserutils","errors","vendor/events","html5audioplayer","logger","states"],function(a,b,c){var d,e=a("underscore"),f=a("browserutils"),g=a("errors"),h=a("vendor/events"),i=a("html5audioplayer"),j=a("logger"),k=a("states"),l={};c.exports=d=function(a,b){i.apply(this,arguments)},e.extend(d.prototype,i.prototype),d.prototype._init=function(){if(!d._html5Audio){var a=new Audio;a.mozAudioChannelType="content",a.id=this._settings.audioObjectID+"_Single",a.preload="none",d._html5Audio=a,this._preloadAudio=a,this._addGlobalListeners()}this._html5Audio=d._html5Audio,this._playRequested=!1,this._logger=new j(this.getType(),this._id,this._settings)},d.prototype._toggleEventListeners=function(a){a?l[this._id]=this:delete l[this._id]},d.prototype._addGlobalListeners=function(){var a=d._html5Audio,b=function(b,c){var d=l[a._playerId];Object.keys(l).forEach(function(a){var b=l[a];b!==d&&b._isInOneOfStates(k.PLAYING,k.LOADING,k.SEEKING)&&b.pause()}),d&&d[b](c)},c=b.bind(null,"_onHtml5AudioStateChange"),e=b.bind(null,"_onLoaded"),f=b.bind(null,"_onLoadedMetadata");["ended","play","playing","pause","seeking","waiting","seeked","error"].forEach(function(b){a.addEventListener(b,c)}),a.addEventListener("loadeddata",e),a.addEventListener("loadedmetadata",f)},d.prototype.getType=function(){return"HTML5 single audio"},d.prototype.play=function(a){this._playRequested=!0;if(this._html5Audio._playerId===this._descriptor.id&&this._isInOneOfStates(k.PAUSED,k.ENDED)){i.prototype.resume.apply(this,arguments);return}this._isInOneOfStates(k.PAUSED)&&(a=this._currentPosition),this._startFromPosition=a||0,this._html5Audio._playerId=this._descriptor.id,this._toggleEventListeners(!0),this._setState(k.LOADING);var b=function(){if(!this._playRequested)return;this._logger.log("play after loaded"),this._trySeekToStartPosition(),this._html5Audio.play(),clearInterval(this._positionUpdateTimer),this._positionUpdateTimer=setInterval(this._onPositionChange,this._settings.updateInterval)};this._html5Audio.readyState>0&&this._descriptor.src===this._html5Audio.src?b.apply(this):(this.once("loaded",b),this._html5Audio.type=this._descriptor.mimeType,this._html5Audio.src=this._descriptor.src,this._html5Audio.preload="auto",this._html5Audio.load())},d.prototype.pause=function(){this._playRequested=!1;if(this._isInOneOfStates(k.ERROR,k.DEAD))return;this._logger.log("pause"),this._html5Audio._playerId===this._descriptor.id?this._html5Audio.pause():(this._toggleEventListeners(!1),this._setState(k.PAUSED)),clearTimeout(this._bufferingTimeout),clearInterval(this._positionUpdateTimer)},d.prototype.seek=function(a){if(this._html5Audio._playerId!==this._descriptor.id){this._currentPosition=a,this.trigger("positionChange",this._currentPosition,this._loadedPosition,this._duration,this);return}i.prototype.seek.apply(this,arguments)},d.prototype.kill=function(){if(this._state===k.DEAD)return;this._playRequested=!1,clearInterval(this._positionUpdateTimer),clearTimeout(this._bufferingTimeout),this._toggleEventListeners(!1),this._setState(k.DEAD)},d.prototype.resume=function(){if(this._isInOneOfStates(k.ERROR,k.DEAD))return;if(this._html5Audio._playerId!==this._descriptor.id){this.play(this._currentPosition);return}i.prototype.resume.apply(this,arguments)},d.prototype.preload=function(){!this._preloadAudio&&f.supportSourceSwappingWithPreload()&&(this._preloadAudio=new Audio,this._preloadAudio.preload="none");var a=this._preloadAudio;a&&a.preload!=="auto"&&(this._logger.log("preload"),a.preload="auto",a._playerId=this._id,a.type=this._descriptor.mimeType,a.src=this._descriptor.src,a.load())}}),c("hlssingleaudioplayer",["require","exports","module","underscore","errors","vendor/events","hlsaudioplayer","logger","singleaudioplayer","states"],function(a,b,c){var d,e=a("underscore"),f=a("errors"),g=a("vendor/events"),h=a("hlsaudioplayer"),i=a("logger"),j=a("singleaudioplayer"),k=a("states");c.exports=d=function(a,b){j.apply(this,arguments)},e.extend(d.prototype,j.prototype),e.extend(d.prototype,e.pick(h.prototype,"_seekPosition","getCurrentPosition","_onStateChange")),d.prototype.seek=function(a){j.prototype.seek.apply(this,arguments),this._isInOneOfStates(k.LOADING,k.SEEKING)&&(this._seekPosition=a)},d.prototype.getType=function(){return"HTML5 HLS single audio"}}),c("mimetypes",{AAC:"audio/aac",M3U8:"application/x-mpegURL",MP4:"audio/mp4",MPEG:"audio/mpeg",OGG:"audio/ogg",WAV:"audio/wav",WEBM:"audio/webm",getTypeByExtension:function(a){var b={mp1:this.MPEG,mp2:this.MPEG,mp3:this.MPEG,mpeg:this.MPEG,mpg:this.MPEG,aac:this.AAC,mp4:this.MP4,ogg:this.OGG,oga:this.OGG,opus:this.OGG,webm:this.WEBM,wav:this.WAV,m3u8:this.M3U8};return b[a]||null}}),c("factory",["require","exports","module","browserutils","hlssingleaudioplayer","mimetypes","singleaudioplayer"],function(a,b,c){var d,e=a("browserutils"),f=a("hlssingleaudioplayer"),g=a("mimetypes"),h=a("singleaudioplayer");c.exports=d=function(){},d.createAudioPlayer=function(a,b){var c,i,j,k;i=a.src.split(":")[0];if(i==="rtmp"||i==="rtmpt")return null;c=d.getMimeType(a);if(c===g.M3U8)if(e.isNativeHlsSupported())k=new f(a,b);else return null;else if(e.supportHTML5Audio()&&e.canPlayType(c))k=new h(a,b);else return null;return k},d.getMimeType=function(a){if(a.mimeType)return a.mimeType;var b=a.src.split("?")[0];return b=b.substring(b.lastIndexOf(".")+1,b.length),g.getTypeByExtension(b)}}),c("audiomanager",["require","exports","module","underscore","factory","states","errors","browserutils"],function(a,b,c){var d,e=a("underscore"),f=a("factory"),g=a("states"),h=a("errors"),i=a("browserutils");c.exports=d=function(a){a=a||{},this._players={},this._volume=1,this._mute=!1,this._settings=e.defaults(a,d.defaults)},d.States=g,d.Errors=h,d.BrowserUtils=i,d.defaults={flashAudioPath:"flashAudio.swf",flashLoadTimeout:2e3,flashObjectID:"flashAudioObject",audioObjectID:"html5AudioObject",updateInterval:300,bufferTime:8e3,bufferingDelay:800,debug:!1},d.prototype.getAudioPlayer=function(a){return this._players[a]},d.prototype.hasAudioPlayer=function(a){return this._players[a]!==undefined},d.prototype.removeAudioPlayer=function(a){this.hasAudioPlayer(a)&&delete this._players[a]},d.prototype.setVolume=function(a){a=Math.min(1,a),this._volume=Math.max(0,a);for(var b in this._players)this._players.hasOwnProperty(b)&&this._players[b].setVolume(this._volume)},d.prototype.getVolume=function(){return this._volume},d.prototype.setMute=function(a){this._muted=a;for(var b in this._players)this._players.hasOwnProperty(b)&&this._players[b].setMute(this._muted)},d.prototype.getMute=function(){return this._muted},d.prototype.createAudioPlayer=function(a){var b,c,d;a.id||(a.id=Math.floor(Math.random()*1e10).toString()+(new Date).getTime().toString());if(!a.src)throw new Error("AudioManager: You need to pass a valid src");return this._players[a.id]||(this._players[a.id]=f.createAudioPlayer(a,this._settings)),this._players[a.id].setVolume(this._volume),this._players[a.id].setMute(this._muted),this._players[a.id].on("stateChange",this._onStateChange,this),this._players[a.id]},d.prototype._onStateChange=function(a,b){b.getState()===g.DEAD&&this.removeAudioPlayer(b.getId())}}),b(["audiomanager"]),b("audiomanager")}),function(){var a=!1;this.Class=function(){},Class.extend=function(b){function h(){if(!a&&this.initialize)return this.initialize.apply(this,arguments)}var c,d,e,f;a=!0;var g=new this;a=!1,Object.prototype.toString.call(b)!=="[object Array]"?f=[b]:f=b;for(d=0,e=f.length;d<e;++d){b=f[d];for(c in b)g[c]=b[c]}return h.prototype=g,h.prototype.constructor=h,h.extend=arguments.callee,h}}(),
define("application",["require","exports","module","$","underscore","api-wrapper","views/app","lib/backbone","config","lib/connect","lib/helpers/client-environment-helper","lib/cookies","lib/event-bus","lib/lingua","lib/deferred-loader","lib/persistent-store","lib/play-manager","lib/pointer-events","collections/related-sounds","router","config/routes","lib/tracking/tracking-core","lib/url","models/user","lib/console-box"],function(a,b,c){function B(){var a,b;a=new u,a.setRoutes(v),b=new h({el:"#app"}),j.set("router",a).set("me",C()).set("appView",b.render()),i.history.start({pushState:!0}),w.initialize()}function C(){var a=new y;return a.on("change",function(){z.set("me",f.extend({lastFetchTime:a.lastFetchTime},a.attributes))}),a}function D(a){if(!k.isLoggedIn())return n.once("connect:login",D),e.Deferred().reject();var b=j.get("me"),c=z.get("me"),d=arguments[1],f;return b.baseUrl="me",a===undefined&&(a=2),d||(d=e.Deferred().done(function(){y.instances.add(b),n.trigger("connect:hasUserData")})),c?(f=c.lastFetchTime||Date.now(),delete c.lastFetchTime,b.lastFetchTime=f,b.set(c),d.resolve()):b.fetch().done(d.resolve).fail(function(b){b.status===401?(k.logout(),d.reject(b)):a?D(a-1,d):d.reject(b)}),d}function E(){var a=x.getQueryParam(A),b,c=!1;a!==undefined&&a&&(m.set(A,a),c=!0),c&&(b={_:Date.now()},b[A]=null,window.location=x.modify(window.location.href,{query:b}))}function F(){var a=document.createElement("iframe");a.className="sc-visuallyhidden",a.src="/"+l.dpi+".html",document.body.appendChild(a)}var d,e=a("$"),f=a("underscore"),g=a("api-wrapper"),h=a("views/app"),i=a("lib/backbone"),j=a("config"),k=a("lib/connect"),l=a("lib/helpers/client-environment-helper").device,m=a("lib/cookies"),n=a("lib/event-bus"),o=a("lib/lingua"),p=a("lib/deferred-loader"),q=a("lib/persistent-store"),r=a("lib/play-manager"),s=a("lib/pointer-events"),t=a("collections/related-sounds"),u=a("router"),v=a("config/routes"),w=a("lib/tracking/tracking-core"),x=a("lib/url"),y=a("models/user"),z=new q("auth"),A="stage";d=c.exports={start:function(a,b){o.saveLocaleToUserSettings(),E(),s.init(),F(),r.setFallbackSource(t,function(a){return u.getRoute("listen",a)}),g.init(),b&&p.setPackageMap(b),D().always(B)}},window.debugMessage=function(){}}),
define("$",["require","exports","module","underscore","vendor/underscore.deferred/underscore.deferred","domify","lib/dollar/dollar-ajax","lib/dollar/dollar-attrs","lib/dollar/dollar-events","lib/dollar/dollar-manipulation","lib/dollar/dollar-matches","lib/dollar/dollar-traversal"],function(a,b,c){var d,e=a("underscore"),f=a("vendor/underscore.deferred/underscore.deferred"),g=a("domify"),h=a("lib/dollar/dollar-ajax"),i=a("lib/dollar/dollar-attrs"),j=a("lib/dollar/dollar-events"),k=a("lib/dollar/dollar-manipulation"),l=a("lib/dollar/dollar-matches"),m=a("lib/dollar/dollar-traversal");d=c.exports=function n(a,b){if(this instanceof d){var c;return b=b||document,a instanceof n||a instanceof Array?c=a:a instanceof HTMLElement||a===window||a===document?c=[a]:a instanceof HTMLCollection||a instanceof NodeList?c=e.toArray(a):typeof a=="string"&&a.charAt(0)==="<"?c=e.toArray([g(a)[0]]):typeof a=="string"?c=e.toArray(b.querySelectorAll(a)):c=[],[].forEach.call(c,function(a,b){this[b]=a},this),this.length=c.length,this.splice=Array.prototype.splice,this}return new d(a,b)},d.prototype.each=function(a,b){for(var c=0;c<this.length;c++)a.call(b||this[c],this[c],c);return this},e.extend(d.prototype,i,j.prototypeMethods,k,m),d.Event=j.Event,d.matches=l,d.noop=function(){},d.ajax=h,["get","post","getJSON"].forEach(function(a){d[a]=h[a]}),d.getScripts=window.__sc_getScripts,delete window.__sc_getScripts,d.Deferred=f.Deferred,d.when=f.when,d.Callbacks=f.Callbacks}),
define("underscore",["require","exports","module","vendor/underscore"],function(a,b,c){var d=a("vendor/underscore");d.mixin({proxy:function(a,b){[].slice.call(arguments,2).forEach(function(c){if(typeof a[c]!="function")throw new Error("Proxy source has no method named "+c);b[c]=a[c].bind(a)})},constant:function(a){return function(){return a}}}),c.exports=d}),
define("api-wrapper",["require","exports","module","$","config","lib/connect","lib/url"],function(a,b,c){function n(a){var b=f.get("client_id"),c=f.get("api_host"),d=new RegExp(f.get("bff_api_host")),e;return j.test(a.url)||(a.url=c+a.url.replace(k,""),e=!0),d.test(a.url)&&(e=!0),e=e||a.url.substr(0,c.length)===c,e&&(g.isLoggedIn()&&o(a.url)&&(a.headers={Authorization:"OAuth "+g.getAuthToken()}),a.crossDomain=!0,a.url=h.modify(a.url,{scheme:"https",query:{client_id:b,format:"json"}})),a}function o(a){return!!a.match(l)}var d,e=a("$"),f=a("config"),g=a("lib/connect"),h=a("lib/url"),i=e.ajax,j=/^https?|^_/,k=/^https?:\/\/.+?\//,l=new RegExp(["me","me/","i1/me/","tracks/[0-9]+/plays"].join("|")),m={likes:"favorites",groups:"groups",people:"users",sound:"track",sounds:"tracks"};d=c.exports={EDGE:"e1/",init:function(){e.ajax=function(a){return i(n(a))}},toAPIResource:function(a){return m[a]||a}}}),
define("views/app",["require","exports","module","$","underscore","lib/helpers/client-environment-helper","config","lib/event-bus","lib/layouts/fullheight","lib/views/loading","lib/play-manager","lib/support","lib/view","lib/helpers/viewport-helper","views/app.css","views/app.tmpl"],function(a,b,c){function s(a){if(a.defaultPrevented||a.target.target)return;a.originalEvent.preventDefault(),h.get("router").navigate(a.currentTarget.getAttribute("href"),!0)}function t(a){var b=this.getElement("loading");this.$el.toggleClass("show-throbber",a),a?(this._loadingView=new l({size:"fullscreen"}),this.addSubview(this._loadingView,"loading"),b.addClass("g-z-index-app-loading"),b[0].appendChild(this._loadingView.render().el)):this.addDeferred(f.delay(function(){this._loadingView._dispose(),this.removeSubview(this._loadingView),b.removeClass("g-z-index-app-loading")}.bind(this),r))}var d,e=a("$"),f=a("underscore"),g=a("lib/helpers/client-environment-helper").browser,h=a("config"),i=a("lib/helpers/client-environment-helper").device,j=a("lib/event-bus"),k=a("lib/layouts/fullheight"),l=a("lib/views/loading"),m=a("lib/helpers/client-environment-helper").os,n=a("lib/play-manager"),o=a("lib/support"),p=a("lib/view"),q=a("lib/helpers/viewport-helper"),r=500;d=c.exports=p.extend({css:a("views/app.css"),className:"app",template:a("views/app.tmpl"),states:{"display-mini-player":"app__displayMiniPlayer","hide-upsell":"app__hideUpsell","show-throbber":t},element2selector:{loading:".app__loading",content:"#content"},setup:function(){e(document).delegate('a[href^="/"]',"click",s),q.hideAddressBar(),j.on("layout:changing",this.onLayoutChanging,this).on("layout:change",this.onLayoutChange,this).on("upsell:hide upsell:slide",this.hideUpsellBanner,this).on("exception",this.onException,this)},renderDecorate:function(){o.nativeScroll&&(this.nativeScrollEl=this.$("#content"),q.enableNativeScroll(this.nativeScrollEl))},preventDefault:function(){return!1},onLayoutChanging:function(){this.toggleState("show-throbber",!0)},onLayoutChange:function(a){this.toggleState("show-throbber",!1),this.setAppHeight(a),this.toggleMiniPlayer(a)},hideUpsellBanner:function(){this.toggleState("hide-upsell",!0)},setAppHeight:function(a){var b=a&&a.layout instanceof k,c={iPhone4Safari:!m.iOS7&&i.iPhone4&&g.safari,iPhone5Safari:!m.iOS7&&i.iPhone5&&g.safari};b?f.each(c,function(a,c){a&&this.$el.addClass(c,b)},this):f.each(c,function(a,b){this.$el.removeClass(b)},this),q.hideAddressBar(a)},toggleMiniPlayer:function(a){this.toggleState("display-mini-player",a.layoutName!=="listen"&&n.hasCurrentSound())},onException:function(a){a.fatal&&h.get("router").apply("error",{resource_id:a.id}),this.toggleState("show-throbber",!1),window.console.error(a.get("message")||a.get("title"))}})}),
define("lib/backbone",["require","exports","module","backbone","$","underscore","lib/mixin"],function(a,b,c){var d=a("backbone"),e=a("$"),f=a("underscore"),g=d.Collection,h=a("lib/mixin"),i=d.Model,j=g.prototype,k=i.prototype;c.exports=d,d.$=e,function(){function a(a,b){return function(){delete a._requests[b]}}function b(b){return function c(c){var g;c=c?f.clone(c):{},c=f.extend({_url:c.url||f.result(this,"url"),jqAjax:!1,saveRequest:!1,onlyIfNeverFetched:!1},c),this instanceof d.Collection&&!this.lastFetchTime&&!c.hasOwnProperty("reset")?(c.reset=!0,c.add=!0):this.lastFetchTime&&!c.hasOwnProperty("remove")&&(c.remove=!1),this._requests||(this._requests={}),g=this._requests[c._url];if(!g){if(c.onlyIfNeverFetched&&this.lastFetchTime)return e.Deferred().resolve({next_href:this.next_href});g=this._requests[c._url]=c.jqAjax?e.ajax(c):b.call(this,c),g[c.saveRequest?"fail":"always"](a(this,c._url))}else c.success&&g.done(c.success.bind(c,this)),c.error&&g.fail(c.error);return g}}k.fetch=b(k.fetch),j.fetch=b(j.fetch)}(),d.Model.extend=d.Collection.extend=d.View.extend=function(a){return function(){var b=f.toArray(arguments),c=0,d,e;return d=b.filter(function(a,b){if(a instanceof h)return c=b+1,!0}),e=a.apply(this,b.slice(c)),d.forEach(function(a){a.applyTo(e.prototype)}),e}}(d.View.extend)}),
define("config",["require","exports","module","lib/mixins/observing","underscore","lib/store","lib/url"],function(a,b,c){function i(){var a=l()?"fdb756191db4f1620b04ace185508237":k()?"c8ce5cbca9160b790311f06638a61037":window.console.error("Unknown host: %o","https://m.soundcloud.com");return a}function j(){var a=l()?66152:k()?65097:null;return a}function k(){return!0}function l(){return!1}var d=a("lib/mixins/observing"),e=a("underscore"),f=a("lib/store"),g=a("lib/url"),h=c.exports=new f;d.applyTo(h),e.each({app_root:g.parse("https://m.soundcloud.com").directory||"/",api_host:"https://api.soundcloud.com/",bff_api_host:"https://api-mobileweb.soundcloud.com/",appView:null,client_id:i(),client_application_id:j(),eventlogger_tracking_url:"https://eventlogger.soundcloud.com",me:null,restoreToSound:null,playHistoryLength:50,promotedContentServer:"https://promoted.soundcloud.com",promotedContentAccessToken:"mobileweb",oauth_token:null,router:null,availablePlayManagerSource:null,wisHost:"https://wis.sndcdn.com"},function(a,b){h.set(b,a,{silent:!0})}),h.finalize()}),
define("lib/connect",["require","exports","module","$","underscore","lib/backbone","config","lib/event-bus","lib/url","lib/persistent-store"],function(a,b,c){function t(a,b,c){var d=window.screenX+(window.outerWidth-b)/2,e=window.screenY+(window.outerHeight-c)/2;return window.open(a,"connectWithSoundCloud",["location=1","width="+b,"height="+c,"top="+e,"left="+d,"toolbar=no","scrollbars=yes"].join(","))}var d,e=a("$"),f=a("underscore"),g=a("lib/backbone"),h=a("config"),i=a("lib/event-bus"),j=a("lib/url"),k=a("lib/persistent-store"),l=150,m=h.get("app_root")+"callback.html",n="oauth_token",o="non-expiring",p=new k("anonymous-user"),q=new k("auth"),r,s;q.on(n,function(a){d.setAuthToken(a.current)}),d=c.exports=f.extend({},g.Events,{setAuthToken:function(a){q.set(n,a)},getAuthToken:function(){return q.get(n)},isLoggedIn:function(){return!!this.getAuthToken()},login:function(){var a;return s?r&&!r.closed&&r.focus&&r.focus():(s=e.Deferred().fail(function(){s=null}),this.isLoggedIn()?s.resolve():(a=j.stringify({host:h.get("api_host").replace("api.",""),path:["connect"],query:{client_id:h.get("client_id"),response_type:"token",scope:o,display:"next",redirect_uri:location.protocol+"//"+location.host+m}}),r=t(a,450,500),function b(){(!r||r.closed)&&!d.isLoggedIn()?s.reject():r.closed?i.once("connect:hasUserData",s.resolve).trigger("connect:login","login"):setTimeout(b,l)}())),s},logout:function(){q.reset(),i.trigger("connect:logout","logout")},currentUserId:function(){return h.get("me").id},getUserIdentifier:function(){var a;return d.isLoggedIn()?a=d.currentUserId():(a=p.get("id"),a||(a=Math.floor(Math.random()*1e3),p.set("id",a))),a}})}),
define("lib/helpers/client-environment-helper",["require","exports","module"],function(a,b,c){var d={},e={},f={},g=navigator.userAgent.toLowerCase(),h=window.devicePixelRatio,i;i=function(a){return a.test(g)},e.ie10=i(/iemobile\/10\.0/),d.devicePixelRatio=h,d.dpi=h>=2||e.ie10?"hdpi":h>1?"mdpi":"ldpi",d.iOS=i(/iphone|ipod/),d.android=i(/android/),d.blackberry=i(/bb10/),d.iPhone4=d.iOS&&screen.availWidth===320&&screen.availHeight===460,d.iPhone5=d.iOS&&d.highDPI&&screen.availWidth===320&&screen.availHeight===548,d.playstation=i(/playstation/),d.amazon=!d.playstation&&i(/silk|kindle|amazon/),d.firefoxOS=!d.android&&window.navigator.mozApps,d.hasNativeApp=d.iOS||d.android||d.blackberry||d.amazon,d.brand=d.iOS?"iOS":d.amazon?"amazon":d.firefoxOS?"firefoxOS":d.android?"android":d.blackberry?"blackberry":"",e.backingStoreRatio=function(){var a=document.createElement("canvas"),b=a.getContext&&a.getContext("2d");if(b)return b.backingStorePixelRatio||b.webkitBackingStorePixelRatio||b.mozBackingStorePixelRatio||b.msBackingStorePixelRatio||b.oBackingStorePixelRatio||1}(),e.chrome=i(/chrome|crios\//),e.safari=!e.chrome&&i(/Version\/.+ Mobile\/.+ Safari\//i),e.firefox=i(/mobile.* firefox/),f.iOS7=d.iOS&&i(/os 7_(.*) like mac os x/),b.device=d,b.browser=e,b.os=f}),
define("lib/cookies",["require","exports","module"],function(a,b,c){var d,e=window.location.hostname.replace(/.*\.(.+\..+)/,"$1"),f="."+e,g=864e5,h=6e4,i,j;d=c.exports={get:function(a){return j||(j={},document.cookie.split(/\s*;\s*/).forEach(function(a){var b=a.split("=");j[b[0]]=b[1]})),j[a]},set:function(a,b,c){var d=Date.now(),e=null;c&&c.days?e=c.days*g:c&&c.minutes&&(e=c.minutes*h),document.cookie=[a+"="+b,e?"expires="+(new Date(d+e)).toGMTString():"","path=/","domain="+f].filter(Boolean).join(";"),i()},unset:function(a){d.set(a,"",-1),i()}},i=function(){j=null}}),
define("lib/event-bus",["require","exports","module","underscore","lib/backbone","config","lib/persistent-store"],function(a,b,c){var d,e=a("underscore"),f=a("lib/backbone"),g=a("config"),h=a("lib/persistent-store"),i=new h("broadcast"),j=g.get("app_id"),k,l,m;i.on("broadcast",function(a){var b=a.current;b&&b.appId!==j&&m.call(d,b)}),d=c.exports=e.extend({},f.Events,{broadcast:function(a,b){var c,d;return typeof a=="string"?(c=[].slice.call(arguments,1),b=a,a={}):c=[].slice.call(arguments,2),d=l(b,c),i.set("broadcast",d),a.excludeThis||m.call(this,d),this}}),l=function(a,b){return{type:a,timestamp:Date.now(),appId:j,args:b}},m=function(a){this.trigger.apply(this,["broadcast:"+a.type].concat(a.args||[]))}}),
define("lib/lingua",["require","exports","module","vendor/i18n/i18n","lib/persistent-store","config/locales/locale-en","config/locales/locale-pt"],function(a,b,c){function l(a){var b=!1;return a.split("").map(function(a){return a==="<"||a===">"?(b=a==="<",a):b||!a.match(/[a-z]/i)?a:"*"}).join("")}function m(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(location.search);return c===null?"":decodeURIComponent(c[1].replace(/\+/g," "))}var d,e=a("vendor/i18n/i18n"),f=a("lib/persistent-store"),g,h,i="locale",j=new f(i),k={en:a("config/locales/locale-en"),pt:a("config/locales/locale-pt"),asterisk:{}};d=c.exports={initialize:function(a){h=k[a]?a:"en",g=g||new e,g.setLocale(h),g.extend(k[h])},initializeFromUserSettings:function(){var a=m(i),b=j.get(i);this.initialize(a||b)},saveLocaleToUserSettings:function(){var a=m(i);a||j.set(i,a)},getLocale:function(){return h},t:function(a,b,c){var d=g.t(a,b,c);return h==="asterisk"?l(d):d},tp:function(a,b,c,d,e){var f=g.tp(a,b,c,d,e);return h==="asterisk"?l(f):f}}}),
define("lib/deferred-loader",["require","exports","module","underscore","$"],function(a,b,c){var d,e=a("underscore"),f=a("$"),g={};d=c.exports={setPackageMap:function(a){a._prefix&&e.each(a,function(b,c){c.charAt(0)!=="_"&&(a[c]=a._prefix+b)}),this.packageMap=a},loadLayout:function(b){var c=this.packageMap,e=c&&c[b],h,i=g[b],j,k;return i?i:e?(h=f.Deferred(),j=function(){h.resolve(a(b))},k=document.createElement("script"),k.src=e,k.onerror=h.reject,k.addEventListener&&k.addEventListener("load",j,!1),document.getElementsByTagName("head")[0].appendChild(k),i=g[b]=h.promise(),i):d.load(b)},load:function(b){var c=f.Deferred();return e.isArray(b)||(b=[b]),a(b,c.resolve),c},get:function(b){return a(b)}}}),
define("lib/persistent-store",["require","exports","module","lib/store","lib/mixins/persistent","lib/mixins/observing"],function(a,b,c){var d=a("lib/store"),e=a("lib/mixins/persistent"),f=a("lib/mixins/observing"),g;g=c.exports=d.extend(),e.applyTo(g.prototype),f.applyTo(g.prototype)}),
define("lib/play-manager",["require","exports","module","underscore","lib/backbone","lib/collection","config","lib/promise"],function(a,b,c){function l(a,b){if(a&&a!==this.getCurrentSound())return;b.seek!=null&&a.seek(b.seek),a.play(b),a.playlist&&a===this.source&&(x.call(this,a.playlist,b&&b.restoreUrl),z.call(this,0))}function m(){var a=h.get("router").getLayoutInfo();return{args:a.args,layoutName:a.layoutName,url:window.location.href.replace(/^https?:\/\/[^\/]+\//,"")}}function n(){var a=this.source;a&&(this.sourceIsCollection=a instanceof g,this.sourceIsCollection&&(this.listenTo(a,"add",o).listenTo(a,"remove",p).listenTo(a,"reset",q),a.isPopulated()||a.fetch()),a.hold())}function o(a,b){var c=b.indexOf(a);c<=this.sourceCursor&&z.call(this,this.sourceCursor+1)}function p(a,b,c){this.sourceCursor&&c.index<=this.sourceCursor&&z.call(this,this.sourceCursor-1)}function q(){z.call(this,-1)}function r(a){a.sound.release()}function s(a){a.sound.hold()}function t(a,b){b[a]("finish",u,this)}function u(a){var b=a.sound;this.playNext({userInitiated:!1}),b.playlist&&b===b.playlist.getLastSound()?b.playlist.seek(0):b.seek(0)}function v(){if(this.FallbackSource){var a=this.getCurrentSound(),b;if(a&&a.isPublic()){b=new this.FallbackSource(null,{resource_id:a.id,resource_type:a.resource_type});if(this.source!==b)return x.call(this,b,this.fallbackRestoreFn(a)),!0;b.release()}}return x.call(this,null),!1}function w(a,b){return b instanceof g?a>-1?(b.audibleAt||b.at).call(b,a):undefined:a===0?b:undefined}function x(a,b,c){var d=this.source;if(d!==a){if(a&&!a.isAudioSource&&!1)throw new Error("The source of play manager needs to implement `AudioSource` interface.");return this.source=a,this.restoreUrl=b,n.call(this),z.call(this,-1),d&&(this.stopListening(d),d.release()),(!c||!c.silent)&&this.trigger("change:source",this.source),this._autoplay&&!this._autoplayTimeout&&(this._autoplayTimeout=setTimeout(function(){this._autoplay=!1,this._autoplayTimeout=null,this.playCurrent({userInitiated:!1})}.bind(this),400)),!0}return!1}function y(a,b,c){var d=a||i.defer(),e=b==null?k:b,f,g;if(d.state()!=="pending")return;this._fetchDeferred&&this._fetchDeferred!==d&&this._fetchDeferred.reject(),this._fetchDeferred||(this._fetchDeferred=d,d.always(function(){this._fetchDeferred=null}.bind(this)));if(this.historyCursor<this.history.length-1)d.resolve(this.history[this.historyCursor+1].sound,{historyCursor:this.historyCursor+1});else if(this.source&&this.sourceIsCollection){g=-1;while(!f&&this.sourceCursor+ ++g<this.source.length)f=this.sourceCursor+g>-1&&w(this.sourceCursor+g,this.source),f=f&&(g===0?f.getNextSound():f.getFirstSound());f?d.resolve(f,{sourceCursor:this.sourceCursor+g,initialFallback:!!c}):!this.source.isFullyPopulated()&&e?this.source.fetch({add:!0,remove:!1}).fail(d.reject).done(y.bind(this,d,e-1)):v.call(this)?y.call(this,d,e,!0):d.resolve(undefined)}else this.source?(f=this.sourceCursor===-1?this.source.getFirstSound():this.source.getNextSound(),f?d.resolve(f,{sourceCursor:0}):(v.call(this),y.call(this,d,e,!0))):d.reject();return d}function z(a){typeof a=="number"?this.sourceCursor=a:this.sourceIsCollection?this.sourceCursor=this.indexOfSoundInSource(a,this.source):this.sourceCursor=0}function A(a,b){var c=this.getCurrentSound(),d=this.historyCursor,e;if(d===a)return;c&&t.call(this,"off",c),this.historyCursor=a,e=this.getCurrentSound(),e&&t.call(this,"on",e),(!b||!b.silent)&&this.trigger("change:currentSound",{isGoingForward:a>d,prev:c,current:e})}function B(a,b,c){var d=c.getSounds(),e=d.indexOf(a),f=d.indexOf(b),g=e<f,h=g?0:f+1,i=e+1;g&&this.clearHistory(),d.slice(h,i).forEach(function(a){this.addToHistory(a,c)},this)}function C(a,b,c,d){if(b instanceof C)return b;this.sound=a,this.layoutInfo=e.clone(c),this.sourceInfo=b&&b.getSourceInfo(),this.restoreUrl=d}var d,e=a("underscore"),f=a("lib/backbone"),g=a("lib/collection"),h=a("config"),i=a("lib/promise"),j=3,k=3;d=c.exports=e.extend({},f.Events,{history:[],historyCursor:-1,source:null,sourceCursor:-1,initialSourcePriority:-Infinity,layoutInfo:{},restoreUrl:null,FallbackSource:null,_fetchDeferred:null,_sessionPlays:0,_autoplay:!1,_autoplayTimeout:null,setInitialSource:function(a,b,c){b=b||0,this.sourceCursor===-1&&b>this.initialSourcePriority&&(this.initialSourcePriority=b,this.saveLayout(),x.call(this,a,c))},unsetInitialSource:function(a){this.sourceCursor===-1&&this.source===a&&(x.call(this,null),this.initialSourcePriority=-Infinity)},indexOfSoundInSource:function(a,b){var c=-1;return b instanceof g?(b.any(function(d,e){var f=w(e,b);if(f&&f.getSoundIndex(a)>-1)return c=e,!0}),c):b.getSoundIndex(a)},hasPrevSound:function(){return this.historyCursor>0},hasNextSound:function(){var a=this.source,b=this.getCurrentSound();return!!(this.historyCursor<this.history.length-1||a&&this.sourceIsCollection&&(!a.isFullyPopulated()||a.length&&this.sourceCursor<a.length-1)||a&&!this.sourceIsCollection&&(this.sourceCursor<0?a.getFirstSound():a.getNextSound())||b&&b.isPublic()&&this.FallbackSource)},hasCurrentSound:function(){return!!this.getCurrentSound()||!!this.hasNextSound()},getCurrentSound:function(){var a=this.history[this.historyCursor];return a&&a.sound},getPrevSound:function(){return this.getSoundFromHistory(this.historyCursor-1)},getSoundFromHistory:function(a){var b=this.history[a];return b&&b.sound},addToHistory:function(a,b,c){var d,e=a!==this.getCurrentSound(),f,g,i;d=this.historyCursor+(e?1:0),f=h.get("playHistoryLength"),i=new C(a,b,this.layoutInfo,this.restoreUrl),this.history.splice(d).forEach(r),this.history.push(i),s(i),g=Math.max(0,this.history.length-f),g&&(this.history.splice(0,g).forEach(r),this.historyCursor-=g),A.call(this,this.history.length-1,c)},backfillHistoryFromPlaylist:function(a,b){var c=b.getSoundIndex(a),e=b.soundsCollection,f,g,h;if(c>0)for(g=0,h=c;g<=h;g++)f=e.at(g),f&&this.addToHistory(f,b,{silent:!0});z.call(this,d.history.length-1)},reset:function(){var a=this.getCurrentSound();a&&a.pause(),this.clearHistory(),this._sessionPlays=0,this.layoutInfo={},this._fetchDeferred&&this._fetchDeferred.reject(),x.call(this,null),this.FallbackSource=this.fallbackRestoreFn=this.restoreUrl=null,this.initialSourcePriority=-Infinity},clearHistory:function(){this.history.forEach(function(a){a.sound.release()}),A.call(this,-1),this.history=[]},enableAutoplay:function(){this.source?this.playCurrent({userInitiated:!1}):this._autoplay=!0},play:function(a,b){b=b||{};var c=b.keepSource?this.source:b.source||a.playlist||a,d=a.getCurrentSound(),e=this.getCurrentSound(),f=e!==d,g;g=x.call(this,c,b.restoreUrl,{silent:!0}),z.call(this,d),f&&this.pauseCurrent(b),(g||f)&&B.call(this,d,e,c),g&&this.trigger("change:source",c),this.playCurrent(b)},playSource:function(a,b){b=b||{},x.call(this,a,b.restoreUrl)?this.playNext(b):this._fetchDeferred||this.playCurrent(b)},toggle:function(a,b){a.isPlaying()?this.pause(a,b):this.play(a,b)},pause:function(a,b){a.pause(b)},playCurrent:function(a){var b=this.getCurrentSound();b?(a=a||{},l.call(this,b,a)):(d.saveLayout(),d.playNext(a))},pauseCurrent:function(a){var b=this.getCurrentSound();b&&b.pause(a)},toggleCurrent:function(a){var b=this.getCurrentSound();b?b.toggle(a):this.playCurrent(a)},playNext:function(a){return a=e.extend({seek:0},a),this.pauseCurrent(),y.call(this).done(function(b,c){var d;b&&(c.historyCursor!=null?A.call(this,c.historyCursor):(c.sourceCursor!=null&&(z.call(this,c.sourceCursor),d=this.source,this.sourceIsCollection&&c.sourceCursor>=this.source.length-j&&!this.source.isFullyPopulated()&&this.source.fetch({add:!0,remove:!1})),this.addToHistory(b,d)),this.playCurrent(a),c.initialFallback&&this.trigger("fallback"))}.bind(this))},playPrev:function(a){a=e.extend({seek:0},a),this.getPrevSound()&&(this.pauseCurrent(),A.call(this,this.historyCursor-1),this.playCurrent(a))},fetchNextSound:y,setFallbackSource:function(a,b){this.FallbackSource=a,this.fallbackRestoreFn=b},restoreState:function(){var a=this.getCurrentRestoreUrl(),b=this.getCurrentSound(),c,d=h.get("router");a?(c=b.playlist||b,d.navigate(a,{trigger:!0}),h.set("restoreToSound",c.resource_type+c.resource_id)):b&&d.navigateToRoute("listen",[b],{trigger:!0})},getCurrentRestoreUrl:function(){var a=this.history[this.historyCursor];return a&&a.restoreUrl||""},getCurrentMetadata:function(){return this.history[this.historyCursor]},saveLayout:function(){this.layoutInfo=m()}})}),
define("lib/pointer-events",["require","exports","module","underscore","lib/support"],function(a,b,c){function f(){if(e.pointerEvents)return;g("mouseup MSPointerUp touchend",h("pointerup")),g("mousedown MSPointerDown touchstart",h("pointerdown")),g("mousemove MSPointerMove touchmove",h("pointermove")),g("mouseout MSPointerLeave touchleave",h("pointerleave"))}function g(a,b){a.split(" ").forEach(function(a){document.body.addEventListener(a,b)})}function h(a){return function(b){i(b,a)}}function i(a,b){var c,d;c=document.createEvent("CustomEvent"),c.initCustomEvent(b,!0,!0,{}),c.maskedEvent=a,d=j(a),c.x=d.x,c.y=d.y,a.target.dispatchEvent(c)}function j(a){var b=a.type,c,d;return b.indexOf("touch")===0?(c=a.changedTouches[0].pageX,d=a.changedTouches[0].pageY):b.indexOf("mouse")===0?(c=a.clientX+window.pageXOffset,d=a.clientY+window.pageYOffset):(c=a.x,d=a.y),{x:c,y:d}}var d=a("underscore"),e=a("lib/support");c.exports={init:d.once(f)}}),
define("collections/related-sounds",["require","exports","module","lib/mixins/audio-source","lib/collection","config","models/sound","lib/url"],function(a,b,c){function k(a){return a.resource_type=a.kind==="playlist"?"playlist":"sound",a}var d,e=a("lib/mixins/audio-source"),f=a("lib/collection"),g=a("config"),h=a("models/sound"),i=a("lib/url"),j=null;d=c.exports=f.extend(e,{model:h,defaults:{resource_id:null,resource_type:null},getSourceInfo:function(){return{type:"recommender",version:this.audioSourceVersion,resourceId:this.options.resource_id,resourceType:this.options.resource_type}},getSounds:function(){return this.models},parse:function(a){return this.audioSourceVersion=a.version||"no_version",a.collection.map(k)},baseUrl:function(){var a=g.get("me").id||null;return!a&&!j&&(j=Math.floor(Math.random()*1e8)),i.stringify({path:["tracks",this.options.resource_id,"related"],query:{user_id:a,anon_user_id:a?null:j}})}},{hashFn:function(a,b){return b.resource_id}})}),
define("router",["require","exports","module","underscore","lib/backbone","config","lib/event-bus","lib/deferred-loader","config/routes","lib/tracking/tracking-bus"],function(a,b,c){function l(a,b){var c,d;this.currentLayout&&a!==this.currentLayout&&this.currentLayout.dispose(),this.currentLayout=a,c=this._currentLayoutInfo=a.getChangeEventData(b),d=g.get("appView").$("#content")[0],a.render(),d.firstElementChild!==a.el&&(d.innerHTML="",d.appendChild(a.el)),k.pageview(c.layoutName),h.trigger("layout:change",c)}var d,e=a("underscore"),f=a("lib/backbone"),g=a("config"),h=a("lib/event-bus"),i=a("lib/deferred-loader"),j=a("config/routes"),k=a("lib/tracking/tracking-bus");d=c.exports=f.Router.extend({currentLayout:null,_currentLayoutInfo:null,setRoutes:function(a){return a.forEach(function(a){a.handler&&this.route(a.route,a.name,a.handler)}.bind(this)),this},navigateToRoute:function(a,b,c){var e=[a],f;b&&b.length&&(e=e.concat(b)),f=d.getRoute.apply(d,e),this.navigate(f,c)},apply:function(a,b){h.trigger("layout:changing");var c="layouts/"+a,d;d=function(){delete this.setupDeferred}.bind(this),this.setupDeferred&&this.setupDeferred.fail(),this.setupDeferred=i.loadLayout(c).fail(d).done(function(c){var e=this.currentLayout instanceof c?this.currentLayout:new c;e.setArgs(b),this.setupDeferred=e.setup(b).done(l.bind(this,e,a,b)).always(d)}.bind(this))},getLayoutInfo:function(){return this._currentLayoutInfo},getRouteInfo:function(a){return e.find(j,function(b){return b.name===a})},goToSoundPage:function(a){a&&this.navigate(d.getRoute("listen",a),{trigger:!0})}},{getRoute:function(a){var b=e.find(j,function(b){return b.name===a});return b.builder.apply(null,[].slice.call(arguments,1))}})}),
define("config/routes",["require","exports","module","lib/model","lib/url"],function(a,b,c){function i(a){return a.replace(/^https?:.+?\w\//,"/")}function j(a){return a instanceof e?a.toJSON():a}function k(a){return a==="sets"||a==="sounds"||a==="tracks"}function l(a){return g||(g={user:"[a-zA-Z0-9_-]{1,255}",sound:"[a-zA-Z0-9_-]{1,255}",playlist:"[a-zA-Z0-9_-]{1,255}",id:"[0-9]+",secretToken:"s-[a-zA-Z0-9]{5}",planName:"pro(?:-unlimited)?",conversationId:"[0-9]+:(?:[0-9]+|system)"},h=new RegExp(":("+Object.keys(g).join("|")+")","g")),new RegExp("^"+a.replace(h,m)+"(?:\\?([\\s\\S]*))?"+"$")}function m(a,b){return"("+g[b]+")"}function n(a){return a.forEach(function(a){var b=a.redirect;typeof a.route=="string"&&(a.route=l(a.route)),b&&(a.handler=function(){this.navigate(typeof b=="string"?b:b.apply(this,arguments),{replace:!0,trigger:!0})})}),a}var d,e=a("lib/model"),f=a("lib/url"),g,h;d=c.exports=n([{name:"listen",route:":user/:sound(?:/:secretToken)?",handler:function(a,b,c,d,e){this.apply("listen",{userPermalink:a,soundPermalink:b,secretToken:c,forUser:d,commentId:parseInt(e,10)||undefined})},builder:function(a){a=j(a.track||a);var b={},c=a._playlist;return a.user&&a.user.permalink&&a.permalink?b.path="/"+a.user.permalink+"/"+a.permalink+(a.secret_token?"/"+a.secret_token:""):a.permalink_url&&(b.path=i(a.permalink_url)),c&&c.permalink_url&&(b.query={"in":i(c.permalink_url).substr(1)}),f.stringify(b)}},{name:"playlist",route:":user/sets/:playlist(?:/:secretToken)?",handler:function(a,b,c,d){this.apply("playlist",{userPermalink:a,playlistPermalink:b,secretToken:c,forUser:d})},builder:function(a){return a=j(a),a.user?"/"+a.user.permalink+"/sets/"+a.permalink+(a.secret_token?"/"+a.secret_token:""):i(a.permalink_url)}},{name:"user",route:":user/?(?:likes|followers|following|comments|sets|groups|info|tracks)?",handler:function(a){this.apply("user-profile",{userPermalink:a})},builder:function(a,b){return b=k(b)?"posts":b,a=j(a),"/"+a.permalink+(b?"/"+b:"")}},{name:"root",route:"",handler:function(){this.apply("home")},builder:function(){return"/"}},{name:"search",route:"search(?:/(sounds|tracks|sets|playlists|people|groups))?",handler:function(a){a==="sets"&&(a="playlists"),a==="sounds"&&(a="tracks"),this.apply("search",{category:a})},builder:function(a,b){return"/"+f.stringify({path:["search",a],query:{q:b}})}},{name:"mobile",route:"mobile",handler:function(){this.apply("mobile-apps")},builder:function(){return"/mobile"}},{name:"messages",route:"messages(?:/:conversationId)?",handler:function(){this.apply("messages")}},{name:"emailUnsubscribedPage",route:/^pages\/unsubscribed$/,handler:function(){this.apply("unsubscribed")},builder:function(){return"/pages/unsubscribed"}},{name:"streamDeprecated",route:"dashboard(?:/.*)?",redirect:"/"},{name:"youUnused",route:"you(?:/.*)?",redirect:"/"},{name:"streamUnused",route:"stream(?:/.*)?",redirect:"/"},{name:"pages",route:"(terms-of-use(?:-pro)?|community-guidelines|imprint)",handler:function(a){this.apply("static-page",{pageName:a})},builder:function(a){return"/"+a}},{name:"pagesPages",route:"pages/(copyright(?:/report)?|contact|competition|dmca_policy|model-withdrawal-form)/?",handler:function(a){this.apply("static-page",{pageName:"pages/"+a})},builder:function(a){return"/pages/"+a}},{name:"pagesWithVersions",route:"((?:terms-of-use-pro|(:?pages/(?:privacy|cookies)))(?:/[0-9]{2}-[0-9]{4})?)/?",handler:function(a){this.apply("static-page",{pageName:a})},builder:function(a){return"/pages/"+a}},{name:"pressPages",route:"(press(?:/:alphanum)*)",handler:function(a){this.apply("static-page",{pageName:a})},builder:function(a){return"/pages/"+a}}])}),
define("lib/tracking/tracking-core",["require","exports","module","$","underscore","lib/tracking/comscore","config","lib/tracking/helpers/core","vendor/event-logger/event-logger","lib/tracking/tracking-bus","lib/tracking/types/actions","lib/tracking/types/impressions","lib/tracking/types/pageviews"],function(a,b,c){function o(a){var b=i.getContext(a),c=i.getIdentifier(a),d=i.getUserId();j.click(d,b,c)}function p(a){var b=i.getUserId(),c=i.getContext(a);j.pageview(b,c,[])}function q(a){var b=i.getAudioContext(),c=i.getUserId();j.audio({level:b,action:a.verb,id:a.id,user:c,duration:a.duration,trigger:a.trigger,protocol:"http",source:a.source,sourceVersion:a.sourceVersion})}function r(a){var b=i.getImpressionEvent(a),c=i.getLevel(),d=i.getUserId();j.impression(d,c,b)}function s(a){var b=i.getLevel(),c=i.getUserId();j.appLoad(c,{latency:a,level:b})}function t(){j.initialize({id:h.get("client_application_id"),trackingUrl:h.get("eventlogger_tracking_url")})}function u(a,b){return a[f.indexOf(a,b)]}var d,e=a("$"),f=a("underscore"),g=a("lib/tracking/comscore"),h=a("config"),i=a("lib/tracking/helpers/core"),j=a("vendor/event-logger/event-logger"),k=a("lib/tracking/tracking-bus"),l=a("lib/tracking/types/actions"),m=a("lib/tracking/types/impressions"),n=a("lib/tracking/types/pageviews");d=c.exports={initialize:function(){t(),k.on("all",function(a){var b=f.rest(arguments),c=d[a];if(!f.isFunction(c))return;d[a].apply(d,b)}.bind(this)),g.init()},destroy:function(){k.off(),g.destroy()},action:function(a,b,c){var d=l[a],e=d&&d.identifiers,g;g=u(e,b),g&&this.whenRequestAllowed().done(function(){o(f.defaults({identifier:b},c))})},audio:function(a,b,c,d,e,f){this.whenRequestAllowed().done(function(){q({verb:a,id:b,duration:c,trigger:d,source:e,sourceVersion:f})})},saveAudioContext:function(){i.saveAudioContext()},pageview:function(a){var b;b=f.clone(f.find(n,function(b,c){var d=c.split(" ");return f.contains(d,a)})||n["default"]),typeof b.chapter=="function"&&(b.chapter=b.chapter()),this.whenRequestAllowed().done(function(){p(b)})},impression:function(a,b){f.contains(m,a)&&this.whenRequestAllowed().done(function(){r({identifier:a,contextData:b})})},appLoad:function(a){s(a)},whenRequestAllowed:function(){return e.Deferred().resolve()}}}),
define("lib/url",["require","exports","module","underscore","lib/backbone","lib/support"],function(a,b,c){var d,e=a("underscore"),f=a("lib/backbone"),g=a("lib/support"),h=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["---","scheme","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],j;d=c.exports={parse:function(a,b){var c=h.exec(a),e,f,g={};b||(b=i);for(e=1;e<i.length;++e){f=i[e];if(b.indexOf(f)!==-1)if(c[e]||f==="query")switch(f){case"port":g[f]=parseInt(c[e],10);break;case"path":g[f]=c[e].split("/").map(decodeURIComponent).join("/");break;case"query":g[f]=d.parseQueryString(c[e]);break;default:g[f]=c[e]}}return g},joinPath:function(a){return a.filter(Boolean).join("/")},parseQueryString:function(a){var b={};return a&&a.replace(/([^?=&]+)(?:=([^&]*))?/g,function(a,c,d){c=decodeURIComponent(c),d=decodeURIComponent(d||"");switch(typeof b[c]){case"object":b[c].push(d);break;case"undefined":b[c]=d;break;default:b[c]=[b[c],d]}}),b},getQueryParams:function(){var a,b;return function(c){var e=c||(g.pushState?window.location.search:window.location.hash.replace(/^[^?]*/,""));return e!==a&&(a=e,b=d.parseQueryString(e)),b}}(),stringify:function(a,b){var c=[],f,g;return b&&(g=d.parse(b),a.query&&g.query&&(e.extend(g.query,a.query),delete a.query),a=e.extend({},g,a)),a.scheme&&c.push(a.scheme+"://"),a.user&&(c.push(a.user),a.password&&c.push(":"+a.password),c.push("@")),a.host&&c.push(a.host),a.port&&c.push(":"+a.port),a.path&&(typeof a.path=="string"?c.push(a.path.split("/").join("/")):c.push(d.joinPath(a.path))),f=j(a.query),f&&c.push("?"+f),a.fragment&&c.push("#"+a.fragment),c.join("")},modify:function(a,b){var c=d.parse(a);return e.isFunction(b)?c=b.call(null,c):typeof b=="object"&&(b.query&&(e.extend(c.query,b.query),delete b.query),e.extend(c,b)),d.stringify(c)},getQueryParam:function(a){return d.parseQueryString(window.location.search)[a]},currentPath:function(){return f.history?"/"+f.history.getFragment(null,null,!0):""}},j=function(a){var b,c,d,e,f,g=[];if(a)for(b in a)if(a.hasOwnProperty(b)){e=a[b];if(e!==null&&e!==f)if(typeof e=="object"){d=e.length;for(c=0;c<d;++c)g.push(encodeURIComponent(b)+"="+encodeURIComponent(e[c]).replace(/%2F/g,"/"))}else g.push(encodeURIComponent(b)+"="+encodeURIComponent(e).replace(/%2F/g,"/"))}return g.join("&")}}),
define("models/user",["require","exports","module","lib/model","lib/url","lib/mixins/urn"],function(a,b,c){var d,e=a("lib/model"),f=a("lib/url"),g=a("lib/mixins/urn");d=c.exports=e.extend(g,{resource_type:"user",urnPrefix:"soundcloud:users",baseUrl:function(){var a=this.id;if(a)return f.stringify({path:["users",a]});if(this.get("permalink")==="you")return f.stringify({path:"me"})}},{resolve:function(a){return e._resolve(this,a,function(b){return b.get("permalink")===a})}})}),
define("lib/console-box",["require","exports","module","lib/css","lib/console-box.css"],function(a,b,c){function h(b){var c;e||(d.insert(a("lib/console-box.css")),e=document.createElement("div"),e.className="consoleBox",e.addEventListener("click",j),document.body.appendChild(e)),f!==b?(f=b,g=0,c=i(b),e.insertBefore(c,e.firstChild)):e.firstChild.innerText=b+" ("+ ++g+")"}function i(a){var b=document.createElement("p");return b.className="consoleBox__message",b.innerText=a,b}function j(){if(e)while(e.firstChild)e.removeChild(e.firstChild)}var d=a("lib/css"),e,f,g;c.exports={log:h}}),
define("vendor/underscore.deferred/underscore.deferred",["require","exports","module"],function(a,b,c){(function(a){function s(a){var b=r[a]={};return k(a.split(/\s+/),function(a){b[a]=!0}),b}var b={},d=Array.prototype,e=Object.prototype,f=e.hasOwnProperty,g=e.toString,h=d.forEach,i=d.indexOf,j=d.slice,k=function(a,c,d){var e,g,i;if(!a)return;if(h&&a.forEach===h)a.forEach(c,d);else if(a.length===+a.length){for(g=0,i=a.length;g<i;g++)if(g in a&&c.call(d,a[g],g,a)===b)return}else for(e in a)if(f.call(a,e)&&c.call(d,a[e],e,a)===b)return},l=function(a){return!!(a&&a.constructor&&a.call&&a.apply)},m=function(a){return k(j.call(arguments,1),function(b){var c;for(c in b)b[c]!==void 0&&(a[c]=b[c])}),a},n=function(a,b,c){var d;if(b){if(i)return i.call(b,a,c);d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++)if(c in b&&b[c]===a)return c}return-1},o={};k("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){o["[object "+a+"]"]=a.toLowerCase()});var p=function(a){return a==null?String(a):o[g.call(a)]||"object"},q={},r={};q.Callbacks=function(a){a=typeof a=="string"?r[a]||s(a):m({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(k){b=a.memory&&k,c=!0,g=e||0,e=0,f=h.length,d=!0;for(;h&&g<f;g++)if(h[g].apply(k[0],k[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,h&&(i?i.length&&j(i.shift()):b?h=[]:l.disable())},l={add:function(){if(h){var c=h.length;(function g(b){k(b,function(b){var c=p(b);c==="function"?(!a.unique||!l.has(b))&&h.push(b):b&&b.length&&c!=="string"&&g(b)})})(arguments),d?f=h.length:b&&(e=c,j(b))}return this},remove:function(){return h&&k(arguments,function(a){var b;while((b=n(a,h,b))>-1)h.splice(b,1),d&&(b<=f&&f--,b<=g&&g--)}),this},has:function(a){return n(a,h)>-1},empty:function(){return h=[],this},disable:function(){return h=i=b=undefined,this},disabled:function(){return!h},lock:function(){return i=undefined,b||l.disable(),this},locked:function(){return!i},fireWith:function(a,b){return b=b||[],b=[a,b.slice?b.slice():b],h&&(!c||i)&&(d?i.push(b):j(b)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!c}};return l},q.Deferred=function(a){var b=[["resolve","done",q.Callbacks("once memory"),"resolved"],["reject","fail",q.Callbacks("once memory"),"rejected"],["notify","progress",q.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return q.Deferred(function(c){k(b,function(b,d){var f=b[0],g=a[d];e[b[1]](l(g)?function(){var a;try{a=g.apply(this,arguments)}catch(b){c.reject(b);return}a&&l(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f!=="notify"?"resolveWith":f+"With"](this===e?c:this,[a])}:c[f])}),a=null}).promise()},promise:function(a){return a!=null?m(a,d):d}},e={};return d.pipe=d.then,k(b,function(a,f){var g=a[2],h=a[3];d[a[1]]=g.add,h&&g.add(function(){c=h},b[f^1][2].disable,b[2][2].lock),e[a[0]]=g.fire,e[a[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},q.when=function(a){var b=0,c=p(a)==="array"&&arguments.length===1?a:j.call(arguments),d=c.length,e=d!==1||a&&l(a.promise)?d:0,f=e===1?a:q.Deferred(),g=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length>1?j.call(arguments):d,c===h?f.notifyWith(b,c):--e||f.resolveWith(b,c)}},h,i,k;if(d>1){h=new Array(d),i=new Array(d),k=new Array(d);for(;b<d;b++)c[b]&&l(c[b].promise)?c[b].promise().done(g(b,k,c)).fail(f.reject).progress(g(b,i,h)):--e}return e||f.resolveWith(k,c),f.promise()},typeof c!="undefined"&&c.exports?c.exports=q:typeof a._!="undefined"?a._.mixin(q):a._=q})(this)}),
define("domify",["require","exports","module"],function(a,b,c){function e(a){if("string"!=typeof a)throw new TypeError("String expected");var b=/<([\w:]+)/.exec(a);if(!b)throw new Error("No elements were generated.");var c=b[1];if(c=="body"){var e=document.createElement("html");return e.innerHTML=a,[e.removeChild(e.lastChild)]}var g=d[c]||d._default,h=g[0],i=g[1],j=g[2],e=document.createElement("div");e.innerHTML=i+a+j;while(h--)e=e.lastChild;return f(e.children)}function f(a){var b=[];while(a.length)b.push(a[0].parentNode.removeChild(a[0]));return b}c.exports=e;var d={option:[1,'<select multiple="multiple">',"</select>"],optgroup:[1,'<select multiple="multiple">',"</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tbody:[1,"<table>","</table>"],tfoot:[1,"<table>","</table>"],colgroup:[1,"<table>","</table>"],caption:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],th:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:[0,"",""]}}),
define("lib/dollar/dollar-ajax",["require","exports","module","underscore","ajax","vendor/underscore.deferred/underscore.deferred"],function(a,b,c){var d,e=a("underscore"),f=a("ajax"),g=a("vendor/underscore.deferred/underscore.deferred");d=c.exports=function(a){var b=g.Deferred(),c=a.success,d=a.error,h;return c&&b.done(c),d&&b.fail(d),a=e.extend({},a,{success:function(a,c,d){b.resolve.call(d,a,c,d)},error:function(a){b.reject.call(h,a,h.status,h)}}),h=f(a),b},["get","post","getJSON"].forEach(function(a){d[a]=function(b,c,e,f){var g;return typeof c=="function"&&(f=f||e,e=c,c=null),g=d({type:a==="post"?"POST":"GET",url:b,data:c,dataType:a==="getJSON"?"json":f}),typeof e=="function"&&g.done(e),g}})}),
define("lib/dollar/dollar-attrs",["require","exports","module","underscore","classes"],function(a,b,c){var d,e=a("underscore"),f=a("classes");d=c.exports={attr:function(a,b){var c;return this.each(function(){typeof a=="object"?e.each(a,function(a,b){this.setAttribute(b,a)}.bind(this)):b?this.setAttribute(a,b):c=this.getAttribute(a)}),c||this},classList:function(){var a;return this.each(function(){a=(new f(this)).array()}),a},hasClass:function(a){return[].every.call(this,function(b){return(new f(b)).has(a)})}},["add","remove"].forEach(function(a){d[a+"Class"]=function(b){return this.each(function(){return(new f(this))[a](b)})}}),d.toggleClass=function(a,b){var c="toggle";return arguments.length>1&&(c=b?"add":"remove"),this.each(function(){return(new f(this))[c](a)})}}),
define("lib/dollar/dollar-events",["require","exports","module","underscore","vendor/zepto-events"],function(a,b,c){var d=a("underscore"),e=a("vendor/zepto-events");b.Event=e.Event,b.prototypeMethods={bind:function(a,b){return this.each(function(){e.add(this,a,b)})},unbind:function(a,b){return this.each(function(){e.remove(this,a,b)})},one:function(a,b){return this.each(function(c){e.add(this,a,b,null,function(a,b){return function(){var d=a.apply(c,arguments);return e.remove(c,b,a),d}})})},delegate:function(a,b,c){var f=this.constructor;return this.each(function(g){e.add(g,b,c,a,function(b){return function(c){var h,i=f(c.target).closest(a,g)[0];if(i)return h=d.extend(e.createProxy(c),{currentTarget:i,liveFired:g}),b.apply(i,[h].concat([].slice.call(arguments,1)))}})})},undelegate:function(a,b,c){return this.each(function(){e.remove(this,b,c,a)})},on:function(a,b,c){return!b||typeof b=="function"?this.bind(a,b||c):this.delegate(b,a,c)},off:function(a,b,c){return!b||typeof b=="function"?this.unbind(a,b||c):this.undelegate(b,a,c)},trigger:function(a,b){var c=this.constructor;if(typeof a=="string"||typeof a=="object")a=c.Event(a);return a.data=b,this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(a)})}}}),
define("lib/dollar/dollar-manipulation",["require","exports","module"],function(a,b,c){c.exports={remove:function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})},html:function(a){return this.each(function(){if(a)return this.innerHTML=a,this.innerHTML;a=this.innerHTML}),a}}}),
define("lib/dollar/dollar-matches",["require","exports","module"],function(a,b,c){c.exports=function(a,b){var c;if(!a||a.nodeType!==1)return!1;c=a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector||a.matchesSelector;if(c)return c.call(a,b)}}),
define("lib/dollar/dollar-traversal",["require","exports","module","underscore","lib/dollar/dollar-matches"],function(a,b,c){function g(a){return a!=null&&a.nodeType===a.DOCUMENT_NODE}var d,e=a("underscore"),f=a("lib/dollar/dollar-matches");d=c.exports={find:function(a){var b;return this.each(function(c){b=new this.constructor(a,c)},this),b},closest:function(a,b){var c=this[0],d=!1,e=this.constructor;typeof a=="object"&&(d=e(a));while(c&&!(d?[].indexOf.call(d,c)>=0:f(c,a)))c=c!==b&&!g(c)&&c.parentNode;return e(c)},children:function(a){var b=[];return this.each(function(c){var d=c.children;if(!d.length)return;a?(new this.constructor(a,c)).each(function(a){a.parentNode===c&&b.push(a)}):b.push(e.toArray(d))},this),new this.constructor(e.flatten(b))},index:function(){var a=-1,b=this[0],c;if(b&&b.parentNode){c=b.previousElementSibling,a=0;while(c)c=c.previousElementSibling,a++}return a}}}),
define("vendor/underscore",["require","exports","module"],function(a,b,c){((function(){var a=this,d=a._,e={},f=Array.prototype,g=Object.prototype,h=Function.prototype,i=f.push,j=f.slice,k=f.concat,l=g.toString,m=g.hasOwnProperty,n=f.forEach,o=f.map,p=f.reduce,q=f.reduceRight,r=f.filter,s=f.every,t=f.some,u=f.indexOf,v=f.lastIndexOf,w=Array.isArray,x=Object.keys,y=h.bind,z=function(a){if(a instanceof z)return a;if(this instanceof z)this._wrapped=a;else return new z(a)};typeof b!="undefined"?(typeof c!="undefined"&&c.exports&&(b=c.exports=z),b._=z):a._=z,z.VERSION="1.4.3";var A=z.each=z.forEach=function(a,b,c){if(a==null)return;if(n&&a.forEach===n)a.forEach(b,c);else if(a.length===+a.length){for(var d=0,f=a.length;d<f;d++)if(b.call(c,a[d],d,a)===e)return}else for(var g in a)if(z.has(a,g)&&b.call(c,a[g],g,a)===e)return};z.map=z.collect=function(a,b,c){var d=[];return a==null?d:o&&a.map===o?a.map(b,c):(A(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),d)};var B="Reduce of empty array with no initial value";z.reduce=z.foldl=z.inject=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(p&&a.reduce===p)return d&&(b=z.bind(b,d)),e?a.reduce(b,c):a.reduce(b);A(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)});if(!e)throw new TypeError(B);return c},z.reduceRight=z.foldr=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(q&&a.reduceRight===q)return d&&(b=z.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=z.keys(a);f=g.length}A(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)});if(!e)throw new TypeError(B);return c},z.find=z.detect=function(a,b,c){var d;return C(a,function(a,e,f){if(b.call(c,a,e,f))return d=a,!0}),d},z.filter=z.select=function(a,b,c){var d=[];return a==null?d:r&&a.filter===r?a.filter(b,c):(A(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},z.reject=function(a,b,c){return z.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},z.every=z.all=function(a,b,c){b||(b=z.identity);var d=!0;return a==null?d:s&&a.every===s?a.every(b,c):(A(a,function(a,f,g){if(!(d=d&&b.call(c,a,f,g)))return e}),!!d)};var C=z.some=z.any=function(a,b,c){b||(b=z.identity);var d=!1;return a==null?d:t&&a.some===t?a.some(b,c):(A(a,function(a,f,g){if(d||(d=b.call(c,a,f,g)))return e}),!!d)};z.contains=z.include=function(a,b){return a==null?!1:u&&a.indexOf===u?a.indexOf(b)!=-1:C(a,function(a){return a===b})},z.invoke=function(a,b){var c=j.call(arguments,2);return z.map(a,function(a){return(z.isFunction(b)?b:a[b]).apply(a,c)})},z.pluck=function(a,b){return z.map(a,function(a){return a[b]})},z.where=function(a,b){return z.isEmpty(b)?[]:z.filter(a,function(a){for(var c in b)if(b[c]!==a[c])return!1;return!0})},z.max=function(a,b,c){if(!b&&z.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!b&&z.isEmpty(a))return-Infinity;var d={computed:-Infinity,value:-Infinity};return A(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>=d.computed&&(d={value:a,computed:g})}),d.value},z.min=function(a,b,c){if(!b&&z.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!b&&z.isEmpty(a))return Infinity;var d={computed:Infinity,value:Infinity};return A(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},z.shuffle=function(a){var b,c=0,d=[];return A(a,function(a){b=z.random(c++),d[c-1]=d[b],d[b]=a}),d};var D=function(a){return z.isFunction(a)?a:function(b){return b[a]}};z.sortBy=function(a,b,c){var d=D(b);return z.pluck(z.map(a,function(a,b,e){return{value:a,index:b,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||c===void 0)return 1;if(c<d||d===void 0)return-1}return a.index<b.index?-1:1}),"value")};var E=function(a,b,c,d){var e={},f=D(b||z.identity);return A(a,function(b,g){var h=f.call(c,b,g,a);d(e,h,b)}),e};z.groupBy=function(a,b,c){return E(a,b,c,function(a,b,c){(z.has(a,b)?a[b]:a[b]=[]).push(c)})},z.countBy=function(a,b,c){return E(a,b,c,function(a,b){z.has(a,b)||(a[b]=0),a[b]++})},z.sortedIndex=function(a,b,c,d){c=c==null?z.identity:D(c);var e=c.call(d,b),f=0,g=a.length;while(f<g){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},z.toArray=function(a){return a?z.isArray(a)?j.call(a):a.length===+a.length?z.map(a,z.identity):z.values(a):[]},z.size=function(a){return a==null?0:a.length===+a.length?a.length:z.keys(a).length},z.first=z.head=z.take=function(a,b,c){return a==null?void 0:b!=null&&!c?j.call(a,0,b):a[0]},z.initial=function(a,b,c){return j.call(a,0,a.length-(b==null||c?1:b))},z.last=function(a,b,c){return a==null?void 0:b!=null&&!c?j.call(a,Math.max(a.length-b,0)):a[a.length-1]},z.rest=z.tail=z.drop=function(a,b,c){return j.call(a,b==null||c?1:b)},z.compact=function(a){return z.filter(a,z.identity)};var F=function(a,b,c){return A(a,function(a){z.isArray(a)?b?i.apply(c,a):F(a,b,c):c.push(a)}),c};z.flatten=function(a,b){return F(a,b,[])},z.without=function(a){return z.difference(a,j.call(arguments,1))},z.uniq=z.unique=function(a,b,c,d){z.isFunction(b)&&(d=c,c=b,b=!1);var e=c?z.map(a,c,d):a,f=[],g=[];return A(e,function(c,d){if(b?!d||g[g.length-1]!==c:!z.contains(g,c))g.push(c),f.push(a[d])}),f},z.union=function(){return z.uniq(k.apply(f,arguments))},z.intersection=function(a){var b=j.call(arguments,1);return z.filter(z.uniq(a),function(a){return z.every(b,function(b){return z.indexOf(b,a)>=0})})},z.difference=function(a){var b=k.apply(f,j.call(arguments,1));return z.filter(a,function(a){return!z.contains(b,a)})},z.zip=function(){var a=j.call(arguments),b=z.max(z.pluck(a,"length")),c=new Array(b);for(var d=0;d<b;d++)c[d]=z.pluck(a,""+d);return c},z.object=function(a,b){if(a==null)return{};var c={};for(var d=0,e=a.length;d<e;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},z.indexOf=function(a,b,c){if(a==null)return-1;var d=0,e=a.length;if(c)if(typeof c=="number")d=c<0?Math.max(0,e+c):c;else return d=z.sortedIndex(a,b),a[d]===b?d:-1;if(u&&a.indexOf===u)return a.indexOf(b,c);for(;d<e;d++)if(a[d]===b)return d;return-1},z.lastIndexOf=function(a,b,c){if(a==null)return-1;var d=c!=null;if(v&&a.lastIndexOf===v)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);var e=d?c:a.length;while(e--)if(a[e]===b)return e;return-1},z.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);while(e<d)f[e++]=a,a+=c;return f};var G=function(){};z.bind=function(a,b){var c,d;if(a.bind===y&&y)return y.apply(a,j.call(arguments,1));if(!z.isFunction(a))throw new TypeError;return c=j.call(arguments,2),d=function(){if(this instanceof d){G.prototype=a.prototype;var e=new G;G.prototype=null;var f=a.apply(e,c.concat(j.call(arguments)));return Object(f)===f?f:e}return a.apply(b,c.concat(j.call(arguments)))}},z.bindAll=function(a){var b=j.call(arguments,1);return b.length==0&&(b=z.functions(a)),A(b,function(b){a[b]=z.bind(a[b],a)}),a},z.memoize=function(a,b){var c={};return b||(b=z.identity),function(){var d=b.apply(this,arguments);return z.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},z.delay=function(a,b){var c=j.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},z.defer=function(a){return z.delay.apply(z,[a,1].concat(j.call(arguments,1)))},z.throttle=function(a,b){var c,d,e,f,g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)};return function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,j<=0?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},z.debounce=function(a,b,c){var d,e;return function(){var f=this,g=arguments,h=function(){d=null,c||(e=a.apply(f,g))},i=c&&!d;return clearTimeout(d),d=setTimeout(h,b),i&&(e=a.apply(f,g)),e}},z.once=function(a){var b=!1,c;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}},z.wrap=function(a,b){return function(){var c=[a];return i.apply(c,arguments),b.apply(this,c)}},z.compose=function(){var a=arguments;return function(){var b=arguments;for(var c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},z.after=function(a,b){return a<=0?b():function(){if(--a<1)return b.apply(this,arguments)}},z.keys=x||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)z.has(a,c)&&(b[b.length]=c);return b},z.values=function(a){var b=[];for(var c in a)z.has(a,c)&&b.push(a[c]);return b},z.pairs=function(a){var b=[];for(var c in a)z.has(a,c)&&b.push([c,a[c]]);return b},z.invert=function(a){var b={};for(var c in a)z.has(a,c)&&(b[a[c]]=c);return b},z.functions=z.methods=function(a){var b=[];for(var c in a)z.isFunction(a[c])&&b.push(c);return b.sort()},z.extend=function(a){return A(j.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},z.pick=function(a){var b={},c=k.apply(f,j.call(arguments,1));return A(c,function(c){c in a&&(b[c]=a[c])}),b},z.omit=function(a){var b={},c=k.apply(f,j.call(arguments,1));for(var d in a)z.contains(c,d)||(b[d]=a[d]);return b},z.defaults=function(a){return A(j.call(arguments,1),function(b){if(b)for(var c in b)a[c]==null&&(a[c]=b[c])}),a},z.clone=function(a){return z.isObject(a)?z.isArray(a)?a.slice():z.extend({},a):a},z.tap=function(a,b){return b(a),a};var H=function(a,b,c,d){if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return a===b;a instanceof z&&(a=a._wrapped),b instanceof z&&(b=b._wrapped);var e=l.call(a);if(e!=l.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if(typeof a!="object"||typeof b!="object")return!1;var f=c.length;while(f--)if(c[f]==a)return d[f]==b;c.push(a),d.push(b);var g=0,h=!0;if(e=="[object Array]"){g=a.length,h=g==b.length;if(h)while(g--)if(!(h=H(a[g],b[g],c,d)))break}else{var i=a.constructor,j=b.constructor;if(i!==j&&!(z.isFunction(i)&&i instanceof i&&z.isFunction(j)&&j instanceof j))return!1;for(var k in a)if(z.has(a,k)){g++;if(!(h=z.has(b,k)&&H(a[k],b[k],c,d)))break}if(h){for(k in b)if(z.has(b,k)&&!(g--))break;h=!g}}return c.pop(),d.pop(),h};z.isEqual=function(a,b){return H(a,b,[],[])},z.isEmpty=function(a){if(a==null)return!0;if(z.isArray(a)||z.isString(a))return a.length===0;for(var b in a)if(z.has(a,b))return!1;return!0},z.isElement=function(a){return!!a&&a.nodeType===1},z.isArray=w||function(a){return l.call(a)=="[object Array]"},z.isObject=function(a){return a===Object(a)},A(["Arguments","Function","String","Number","Date","RegExp"],function(a){z["is"+a]=function(b){return l.call(b)=="[object "+a+"]"}}),z.isArguments(arguments)||(z.isArguments=function(a){return!!a&&!!z.has(a,"callee")}),typeof /./!="function"&&(z.isFunction=function(a){return typeof a=="function"}),z.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},z.isNaN=function(a){return z.isNumber(a)&&a!=+a},z.isBoolean=function(a){return a===!0||a===!1||l.call(a)=="[object Boolean]"},z.isNull=function(a){return a===null},z.isUndefined=function(a){return a===void 0},z.has=function(a,b){return m.call(a,b)},z.noConflict=function(){return a._=d,this},z.identity=function(a){return a},z.times=function(a,b,c){var d=Array(a);for(var e=0;e<a;e++)d[e]=b.call(c,e);return d},z.random=function(a,b){return b==null&&(b=a,a=0),a+(0|Math.random()*(b-a+1))};var I={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};I.unescape=z.invert(I.escape);var J={escape:new RegExp("["+z.keys(I.escape).join("")+"]","g"),unescape:new RegExp("("+z.keys(I.unescape).join("|")+")","g")};z.each(["escape","unescape"],function(a){z[a]=function(b){return b==null?"":(""+b).replace(J[a],function(b){return I[a][b]})}}),z.result=function(a,b){if(a==null)return null;var c=a[b];return z.isFunction(c)?c.call(a):c},z.mixin=function(a){A(z.functions(a),function(b){var c=z[b]=a[b];z.prototype[b]=function(){var a=[this._wrapped];return i.apply(a,arguments),O.call(this,c.apply(z,a))}})};var K=0;z.uniqueId=function(a){var b=""+ ++K;return a?a+b:b},z.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,M={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\t|\u2028|\u2029/g;z.template=function(a,b,c){c=z.defaults({},c,z.templateSettings);var d=new RegExp([(c.escape||L).source,(c.interpolate||L).source,(c.evaluate||L).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(N,function(a){return"\\"+M[a]}),c&&(f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(f+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),g&&(f+="';\n"+g+"\n__p+='"),e=h+b.length,b}),f+="';\n",c.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(c.variable||"obj","_",f)}catch(h){throw h.source=f,h}if(b)return g(b,z);var i=function(a){return g.call(this,a,z)};return i.source="function("+(c.variable||"obj")+"){\n"+f+"}",i},z.chain=function(a){return z(a).chain()};var O=function(a){return this._chain?z(a).chain():a};z.mixin(z),A(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=f[a];z.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),(a=="shift"||a=="splice")&&c.length===0&&delete c[0],O.call(this,c)}}),A(["concat","join","slice"],function(a){var b=f[a];z.prototype[a]=function(){return O.call(this,b.apply(this._wrapped,arguments))}}),z.extend(z.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})})).call(this)}),
define("lib/layouts/fullheight",["require","exports","module","lib/layout","lib/layouts/fullheight.css","lib/layouts/fullheight.tmpl"],function(a,b,c){var d,e=a("lib/layout");d=c.exports=e.extend({css:a("lib/layouts/fullheight.css"),template:a("lib/layouts/fullheight.tmpl")})}),
define("lib/views/loading",["require","exports","module","lib/view","lib/views/loading.css"],function(a,b,c){var d,e=a("lib/view");d=c.exports=e.extend({css:a("lib/views/loading.css"),className:"loadingThrobber",defaults:{size:"regular"},setup:function(a){this.$el.addClass(a.size)},template:function(){return""}})}),
define("lib/support",["require","exports","module","underscore","lib/helpers/client-environment-helper"],function(a,b,c){var d,e=a("underscore"),f=a("lib/helpers/client-environment-helper").browser,g,h;d=c.exports={},h=function(a){try{if(a.getItem){var b=Date.now();return a.setItem(b,b),a.removeItem(b),!0}}catch(c){}return!1},g={sessionStorage:function(){try{return typeof sessionStorage!="undefined"&&h(sessionStorage)}catch(a){return!1}},localStorage:function(){try{return typeof localStorage!="undefined"&&h(localStorage)}catch(a){return!1}},touch:function(){return g.pointerEvents()||g.touchEvents()},touchEvents:function(){return"ontouchstart"in window},pointerEvents:function(){return!!window.PointerEvent},orientationChange:function(){return"onorientationchange"in window},autoPlay:function(){return f.firefox},pushState:function(){return window.history&&window.history.pushState},nativeScroll:function(){var a=document.createElement("div"),b;return a.style.webkitOverflowScrolling="touch",document.body.appendChild(a),b=!!window.getComputedStyle(a).webkitOverflowScrolling,document.body.removeChild(a),b},typedArrays:function(){return!!window.hasOwnProperty("Uint8Array")}},e.each(g,function(a,b){d[b]=!!a()}),g=null}),
define("lib/view",["require","exports","module","$","underscore","lib/backbone","lib/css","lib/event-bubble","lib/views/mixins/stateful","lib/lingua","lib/template"],function(a,b,c){function m(a,b){var c=this;while(c&&!b.isPropagationStopped())c.trigger(a,b),c=c._parentView}function n(a,b){return f.defaults(b,a.prototype.defaults),a===d?b:n(a.__super__.constructor,b)}function o(a,b){var c,d;b=b||this.model,c=a?b.on:b.off,d=this.getObservedAttributes(b),d.forEach(function(a){c.call(b,"change:"+a,this.onModelChange,this)}.bind(this))}function p(a,b){var c;b=b||this.collection,c=a?"on":"off",b[c]("reset",this.onCollectionReset,this)[c]("add",this.onAdd,this)[c]("remove",this.onRemove,this)[c]("add remove reset",this.onCollectionChange,this)}var d,e=a("$"),f=a("underscore"),g=a("lib/backbone"),h=a("lib/css"),i=a("lib/event-bubble"),j=a("lib/views/mixins/stateful"),k=a("lib/lingua"),l=a("lib/template");d=c.exports=g.View.extend(j,{ModelClass:null,requiredAttributes:null,observedAttributes:null,css:null,template:e.noop,LoadingView:null,loadingViewArgs:null,loadingTemplate:function(){return""},element2selector:null,_element2selector_cache:null,defaults:null,bubbleEvents:null,disposed:!1,subviews:null,_subviews_keys:null,_lastEventId:null,constructorArguments:null,_whenInsertedDefer:null,_deferreds:null,initialize:function(a){var b;a=this.options=n(this.constructor,a||{}),this.constructorArguments=f.clone(a),a.resource_id&&this.ModelClass&&(this.model=b=this.getModel(a.resource_id,a.resource_type)),this._deferreds=[],this.subviews=[],this._subviews_keys=[],this.resetElementCache(),this._setupBubbleListeners(),this._setup.call(this,a),b&&this.model!==b&&b.release(),this.model?this.setupModelListeners():this.collection&&this.setupCollectionListeners()},_setup:function(){this.setup.apply(this,arguments)},setup:e.noop,_dispose:function(){if(this.disposed)return;this._teardown(),this.dispose(),this.disposed=!0;while(this._deferreds.length)typeof this._deferreds[0]=="number"?clearTimeout(this._deferreds.shift()):this._deferreds[0].reject("viewDisposed");this.off(),this.stopListening(),this.model&&(this.teardownModelListeners(),this.model.release()),this.collection&&(this.teardownCollectionListeners(),this.collection.release()),this.$el.remove(),delete this.el,delete this.$el,delete this.model,delete this.collection,this.constructorArguments=null},dispose:e.noop,_teardown:function(){this.disposeSubviews(),this._whenInsertedDefer&&(this._whenInsertedDefer.reject(),this._whenInsertedDefer=null),this.teardown(),this.resetElementCache()},teardown:e.noop,disposeSubviews:function(){while(this.subviews.length)this.subviews.pop()._dispose();this.subviews=[],this._subviews_keys=[]},getModel:function(a,b){var c,d,e,f,g;return f={id:a,resource_type:b},e=this.ModelClass.getClass?this.ModelClass.getClass(f):this.ModelClass,c=e.hashFn(f),d=e.instances.get(c),d?d.hold():(g={id:a},b&&(g.resource_type=b),d=new e(g)),d},setupModelListeners:function(a){o.call(this,!0,a)},teardownModelListeners:function(a){o.call(this,!1,a)},setupCollectionListeners:function(a){p.call(this,!0,a)},teardownCollectionListeners:function(a){p.call(this,!1,a)},_setupBubbleListeners:function(){var a,b,c;for(b in this.bubbleEvents)if(this.bubbleEvents.hasOwnProperty(b)){a=this.bubbleEvents[b],c=typeof a;if(c!=="string"&&c!=="function")throw"Incorrect bubble event handler: "+a+". Bubble event handlers must be either string and "+"represent a method of the view, or a function that will be bound to viewâ€™s context";this.on(b,c==="function"?a:this[a],this)}},getRequiredAttributes:function(a){var b=this.requiredAttributes;return a||(a=this.model),b&&!Array.isArray(b)&&(b=b[a.resource_type]),b||[]},getObservedAttributes:function(a){var b=this.observedAttributes,c;return a||(a=this.model),c=this.getRequiredAttributes(a),b&&!Array.isArray(b)&&(b=b[a.resource_type]),b?b.concat(c):c},addDeferred:function(a){return typeof a=="number"?this._deferreds.push(a):a.state()==="pending"&&(a.always(function(){var b=this._deferreds.indexOf(a);b>-1&&this._deferreds.splice(b,1)}.bind(this)),this._deferreds.push(a)),a},addSubview:function(a,b){return a._parentView=this,this.subviews.push(a),this._subviews_keys.push(b),b&&(this.subviews[b]=a),a},removeSubview:function(a){for(var b=this.subviews.length;b--;)if(this.subviews[b]===a){this._subviews_keys[b]&&(a._parentView=null,delete this.subviews[this._subviews_keys[b]]),this.subviews.splice(b,1),this._subviews_keys.splice(b,1);return}},getAncestorSubviews:function(){var a=[];return this.subviews.forEach(function(b){a.push(b),a=a.concat(b.getAncestorSubviews())}),a},getElement:function(a){var b;return this._element2selector_cache[a]===b&&(this._element2selector_cache[a]=this.$(this.element2selector[a])),this._element2selector_cache[a]},resetElementCache:function(){this._element2selector_cache={}},render:function(){var a=this.hasData(),b=this.getTemplate(a),c=this.model||this.collection,d=this._getTemplateData(a||!c);return b&&(l.render(b.bind(this),d,this.el),l.subviews(this)),this.css&&h.insert(this.css),a?this.renderDecorate():(!b&&this.LoadingView&&this.el.appendChild(this.addSubview(new this.LoadingView(f.result(this,"loadingViewArgs")),"loading").render().el),this.fetchData(c)),this},renderDecorate:e.noop,rerender:function(){this.disposed||(this._teardown(),this.render())},getTemplate:function(a){return a||!this.LoadingView&&!this.loadingTemplate?this.template:this.LoadingView?null:this.loadingTemplate},_getTemplateData:function(a){var b={};return this.model?b=this.getModelData():this.collection&&(b=this.getCollectionData()),b._options=f.clone(this.options),a&&(b=this.getTemplateData(b)||b),b},getTemplateData:e.noop,getCollectionData:function(){return this.collection.toJSON()},getModelData:function(){return this.model.toJSON()},bubble:function(a,b){var c=new i(b);return m.call(this,a,c),c},getContextData:function(){return this.bubble("contextrequest").data},fetchData:function(a){return a.fetch({attrs:this.getObservedAttributes(a)})},hasData:function(a){return a=a||this.model||this.collection,a?a.hasDataForView(this):!0},removeLoader:function(){var a=this.subviews.loading;a&&(a._dispose(),this.removeSubview(a))},isEquivalentTo:function(a,b){var c=b||{};return this.constructor===a&&f.isEqual(n(a,c),this.constructorArguments)},whenInserted:function(a){var b=this._whenInsertedDefer,c,d;return b||(a=a||document.body,d=function(e){e.closest(a).length!==0?b.resolve():c=setTimeout(d,100)}.bind(null,this.$el),this._whenInsertedDefer=b=e.Deferred(),b.fail(function(){clearTimeout(c)}),d()),b},onModelChange:function(a,b,c,d){this._lastEventId!==d&&(this._lastEventId=d,this.rerender())},onCollectionReset:function(){this.rerender()},onCollectionChange:function(){this.disposed||this.trigger("update:collection",this.collection.size())},onAdd:e.noop,onRemove:e.noop,t:k.t,tp:k.tp})}),
define("lib/helpers/viewport-helper",["require","exports","module","$","underscore","lib/support"],function(a,b,c){function k(){return window.pageYOffset||document.compatMode==="CSS1Compat"&&document.documentElement.scrollTop||document.body&&document.body.scrollTop||0}var d,e=a("$"),f=a("underscore"),g=a("lib/support"),h=300,i,j;d=c.exports={hideAddressBar:function(a){var b=a&&a.layoutName==="listen",c=k();g.nativeScroll?f.delay(function(){j[0].scrollTop=0}.bind(this),100):!document.location.hash&&(c<20||b)&&f.defer(function(){window.scrollTo(0,Number(c===1))})},enableNativeScroll:function(a){j=a,a.addClass("g-native-scroll"),setInterval(function(){i!==a[0].scrollTop&&(i=a[0].scrollTop,e(document).trigger("scroll"))}.bind(this),h)}}}),
define("views/app.css",["require","exports","module","dpi"],function(a,b,c,d){var e=c.exports=document.createElement("style"),f=d("#app{background:#f2f2f2}#app,#app>#content,#app>#content>div{height:100%}.app__header{position:fixed;top:0;left:0;height:44px;width:100%}.app__miniPlayer{display:none;height:54px;position:fixed;bottom:0;left:0;width:100%}.app__displayMiniPlayer .app__miniPlayer{display:block}#content{padding-top:98px;opacity:1;-webkit-transition:padding .2s linear,opacity .5s linear;transition:padding .2s linear,opacity .5s linear}.app__hideUpsell #content{padding-top:44px}.app__upsell{position:absolute;padding-top:44px;width:100%}.app__displayMiniPlayer #content{padding-bottom:57px}.app__loading{-webkit-transition:opacity .5s linear;transition:opacity .5s linear;opacity:0;position:absolute;top:44px;left:0;width:100%;height:100%;overflow:hidden}.show-throbber .app__loading{opacity:1}.show-throbber #content{opacity:0}#app.iPhone4Safari{height:416px}#app.iPhone5Safari{height:506px}");e.styleSheet?e.styleSheet.cssText=f:e.appendChild(document.createTextNode(f)),f=null}),
define("views/app.tmpl",["vendor/handlebars-runtime","views/header/header","views/banner/upsell","views/play-controls/play-controls"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f="",g=this.escapeExpression;return f+='<div class="app__header g-z-index-header"> '+g(c.$view.call(b,"views/header/header",{hash:{},data:e}))+'\n</div> <div class="app__upsell g-z-index-upsell"> '+g(c.$view.call(b,"views/banner/upsell",{hash:{},data:e}))+'\n</div> <div class="app__loading g-z-index-hidden"></div> <main id="content" class="l-container" role="main"></main> <div class="app__miniPlayer g-z-index-header"> '+g(c.$view.call(b,"views/play-controls/play-controls",{hash:{},data:e}))+"\n</div> ",f})}),function(a,b){if(typeof define=="function"&&define.amd)
define("backbone",["underscore","$","exports"],function(c,d,e){a.Backbone=b(a,e,c,d)});else if(typeof exports!="undefined"){var c=require("underscore");b(a,exports,c)}else a.Backbone=b(a,{},a._,a.jQuery||a.Zepto||a.ender||a.$)}(this,function(a,b,c,d){var e=a.Backbone,f=[],g=f.push,h=f.slice,i=f.splice;b.VERSION="1.1.2",b.$=d,b.noConflict=function(){return a.Backbone=e,this},b.emulateHTTP=!1,b.emulateJSON=!1;var j=b.Events={on:function(a,b,c){if(!l(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,d){if(!l(this,"once",a,[b,d])||!b)return this;var e=this,f=c.once(function(){e.off(a,f),b.apply(this,arguments)});return f._callback=b,this.on(a,f,d)},off:function(a,b,d){var e,f,g,h,i,j,k,m;if(!this._events||!l(this,"off",a,[b,d]))return this;if(!a&&!b&&!d)return this._events=void 0,this;h=a?[a]:c.keys(this._events);for(i=0,j=h.length;i<j;i++){a=h[i];if(g=this._events[a]){this._events[a]=e=[];if(b||d)for(k=0,m=g.length;k<m;k++)f=g[k],(b&&b!==f.callback&&b!==f.callback._callback||d&&d!==f.context)&&e.push(f);e.length||delete this._events[a]}}return this},trigger:function(a){if(!this._events)return this;var b=h.call(arguments,1);if(!l(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&m(c,b),d&&m(d,arguments),this},stopListening:function(a,b,d){var e=this._listeningTo;if(!e)return this;var f=!b&&!d;!d&&typeof b=="object"&&(d=this),a&&((e={})[a._listenId]=a);for(var g in e)a=e[g],a.off(b,d,this),(f||c.isEmpty(a._events))&&delete this._listeningTo[g];return this}},k=/\s+/,l=function(a,b,c,d){if(!c)return!0;if(typeof c=="object"){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(k.test(c)){var f=c.split(k);for(var g=0,h=f.length;g<h;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},m=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:while(++d<e)(c=a[d]).callback.call(c.ctx);return;case 1:while(++d<e)(c=a[d]).callback.call(c.ctx,f);return;case 2:while(++d<e)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:while(++d<e)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:while(++d<e)(c=a[d]).callback.apply(c.ctx,b);return}},n={listenTo:"on",listenToOnce:"once"};c.each(n,function(a,b){j[b]=function(b,d,e){var f=this._listeningTo||(this._listeningTo={}),g=b._listenId||(b._listenId=c.uniqueId("l"));return f[g]=b,!e&&typeof d=="object"&&(e=this),b[a](d,e,this),this}}),j.bind=j.on,j.unbind=j.off,c.extend(b,j);var o=b.Model=function(a,b){var d=a||{};b||(b={}),this.cid=c.uniqueId("c"),this.attributes={},b.collection&&(this.collection=b.collection),b.parse&&(d=this.parse(d,b)||{}),d=c.defaults({},d,c.result(this,"defaults")),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)};c.extend(o.prototype,j,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return c.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return c.escape(this.get(a))},has:function(a){return this.get(a)!=null},set:function(a,b,d){var e,f,g,h,i,j,k,l;if(a==null)return this;typeof a=="object"?(f=a,d=b):(f={})[a]=b,d||(d={});if(!this._validate(f,d))return!1;g=d.unset,i=d.silent,h=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=c.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in f&&(this.id=f[this.idAttribute]);for(e in f)b=f[e],c.isEqual(l[e],b)||h.push(e),c.isEqual(k[e],b)?delete this.changed[e]:this.changed[e]=b,g?delete l[e]:l[e]=b;if(!i){h.length&&(this._pending=d);for(var m=0,n=h.length;m<n;m++)this.trigger("change:"+h[m],this,l[h[m]],d)}if(j)return this;if(!i)while(this._pending)d=this._pending,this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var d in this.attributes)b[d]=void 0;return this.set(b,c.extend({},a,{unset:!0}))},hasChanged:function(a){return a==null?!c.isEmpty(this.changed):c.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?c.clone(this.changed):!1;var b,d=!1,e=this._changing?this._previousAttributes:this.attributes;for(var f in a){if(c.isEqual(e[f],b=a[f]))continue;(d||(d={}))[f]=b}return d},previous:function(a){return a==null||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(a){a=a?c.clone(a):{},a.parse===void 0&&(a.parse=!0);var b=this,d=a.success;return a.success=function(c){b.lastFetchTime=Date.now();if(!b.set(b.parse(c,a),a))return!1;d&&d(b,c,a),b.trigger("sync",b,c,a)},N(this,a),this.sync("read",this,a)},save:function(a,b,d){var e,f,g,h=this.attributes;a==null||typeof a=="object"?(e=a,d=b):(e={})[a]=b,d=c.extend({validate:!0},d);if(e&&!d.wait){if(!this.set(e,d))return!1}else if(!this._validate(e,d))return!1;e&&d.wait&&(this.attributes=c.extend({},h,e)),d.parse===void 0&&(d.parse=!0);var i=this,j=d.success;return d.success=function(a){i.attributes=h;var b=i.parse(a,d);d.wait&&(b=c.extend(e||{},b));if(c.isObject(b)&&!i.set(b,d))return!1;j&&j(i,a,d),i.trigger("sync",i,a,d)},N(this,d),f=this.isNew()?"create":d.patch?"patch":"update",f==="patch"&&(d.attrs=e),g=this.sync(f,this,d),e&&d.wait&&(this.attributes=h),g},destroy:function(a){a=a?c.clone(a):{};var b=this,d=a.success,e=function(){b.trigger("destroy",b,b.collection,a)};a.success=function(c){(a.wait||b.isNew())&&e(),d&&d(b,c,a),b.isNew()||b.trigger("sync",b,c,a)};if(this.isNew())return a.success(),!1;N(this,a);var f=this.sync("delete",this,a);return a.wait||e(),f},url:function(){var a=c.result(this,"urlRoot")||c.result(this.collection,"url")||M();return this.isNew()?a:a.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},c.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=c.extend({},this.attributes,a);var d=this.validationError=this.validate(a,b)||null;return d?(this.trigger("invalid",this,d,c.extend(b,{validationError:d})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];c.each(p,function(a){o.prototype[a]=function(){var b=h.call(arguments);return b.unshift(this.attributes),c[a].apply(c,b)}});var q=b.Collection=function(a,b){b||(b={}),b.model&&(this.model=b.model),b.comparator!==void 0&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,c.extend({silent:!0},b))},r={add:!0,remove:!0,merge:!0},s={add:!0,remove:!1};c.extend(q.prototype,j,{model:o,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){return this.set(a,c.extend({merge:!1},b,s))},remove:function(a,b){var d=!c.isArray(a);a=d?[a]:c.clone(a),b||(b={});var e,f,g,h;for(e=0,f=a.length;e<f;e++){h=a[e]=this.get(a[e]);if(!h)continue;delete this._byId[h.id],delete this._byId[h.cid],g=this.indexOf(h),this.models.splice(g,1),this.length--,b.silent||(b.index=g,h.trigger("remove",h,this,b)),this._removeReference(h,b)}return d?a[0]:a},set:function(a,b){b=c.defaults({},b,r),b.parse&&(a=this.parse(a,b));var d=!c.isArray(a);a=d?a?[a]:[]:c.clone(a);var e,f,g,h,i,j,k,l=b.at,m=this.model,n=this.comparator&&l==null&&b.sort!==!1,p=c.isString(this.comparator)?this.comparator:null,q=[],s=[],t={},u=b.add,v=b.merge,w=b.remove,x=!n&&u&&w?[]:!1;for(e=0,f=a.length;e<f;e++){i=a[e]||{},i instanceof o?g=h=i:g=i[m.prototype.idAttribute||"id"];if(j=this.get(g))w&&(t[j.cid]=!0),v&&(i=i===h?h.attributes:i,b.parse&&(i=j.parse(i,b)),j.set(i,b),n&&!k&&j.hasChanged(p)&&(k=!0)),a[e]=j;else if(u){h=a[e]=this._prepareModel(i,b);if(!h)continue;q.push(h),this._addReference(h,b)}h=j||h,x&&(h.isNew()||!t[h.id])&&x.push(h),t[h.id]=!0}if(w){for(e=0,f=this.length;e<f;++e)t[(h=this.models[e]).cid]||s.push(h);s.length&&this.remove(s,b)}if(q.length||x&&x.length){n&&(k=!0),this.length+=q.length;if(l!=null)for(e=0,f=q.length;e<f;e++)this.models.splice(l+e,0,q[e]);else{x&&(this.models.length=0);var y=x||q;for(e=0,f=y.length;e<f;e++)this.models.push(y[e])}}k&&this.sort({silent:!0});if(!b.silent){for(e=0,f=q.length;e<f;e++)(h=q[e]).trigger("add",h,this,b);(k||x&&x.length)&&this.trigger("sort",this,b)}return d?a[0]:a},reset:function(a,b){b||(b={});for(var d=0,e=this.models.length;d<e;d++)this._removeReference(this.models[d],b);return b.previousModels=this.models,this._reset(),a=this.add(a,c.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),a},push:function(a,b){return this.add(a,c.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return this.add(a,c.extend({at:0},b))},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(){return h.apply(this.models,arguments)},get:function(a){return a==null?void 0:this._byId[a]||this._byId[a.id]||this._byId[a.cid]},at:function(a){return this.models[a]},where:function(a,b){return c.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),c.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(c.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},pluck:function(a){return c.invoke(this.models,"get",a)},fetch:function(a){a=a?c.clone(a):{},a.parse===void 0&&(a.parse=!0);var b=a.success,d=this;return a.success=function(c){d.lastFetchTime=Date.now();var e=a.reset?"reset":"set";d[e](c,a),b&&b(d,c,a),d.trigger("sync",d,c,a)},N(this,a),this.sync("read",this,a)},create:function(a,b){b=b?c.clone(b):{};if(!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var d=this,e=b.success;return b.success=function(a,c){b.wait&&d.add(a,b),e&&e(a,c,b)},a.save(null,b),a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(a instanceof o)return a;b=b?c.clone(b):{},b.collection=this;var d=new this.model(a,b);return d.validationError?(this.trigger("invalid",this,d.validationError,b),!1):d},_addReference:function(a,b){this._byId[a.cid]=a,a.id!=null&&(this._byId[a.id]=a),a.collection||(a.collection=this),a.on("all",this._onModelEvent,this)},_removeReference:function(a,b){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){if(a!=="add"&&a!=="remove"||c===this)a==="destroy"&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],b.id!=null&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments);else return}});var t=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];c.each(t,function(a){q.prototype[a]=function(){var b=h.call(arguments);return b.unshift(this.models),c[a].apply(c,b)}});var u=["groupBy","countBy","sortBy","indexBy"];c.each(u,function(a){q.prototype[a]=function(b,d){var e=c.isFunction(b)?b:function(a){return a.get(b)};return c[a](this.models,e,d)}});var v=b.View=function(a){this.cid=c.uniqueId("view"),a||(a={}),c.extend(this,c.pick(a,x)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];c.extend(v.prototype,j,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(a,c){return this.$el&&this.undelegateEvents(),this.$el=a instanceof b.$?a:b.$(a),this.el=this.$el[0],c!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=c.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var d=a[b];c.isFunction(d)||(d=this[a[b]]);if(!d)continue;var e=b.match(w),f=e[1],g=e[2];d=c.bind(d,this),f+=".delegateEvents"+this.cid,g===""?this.$el.on(f,d):this.$el.on(f,g,d)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(!this.el){var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id")),this.className&&(a["class"]=c.result(this,"className"));var d=b.$("<"+c.result(this,"tagName")+">").attr(a);this.setElement(d,!1)}else this.setElement(c.result(this,"el"),!1)}}),b.sync=function(a,d,e){var f=z[a];c.defaults(e||(e={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var g={type:f,dataType:"json"};e.url||(g.url=c.result(d,"url")||M()),e.data==null&&d&&(a==="create"||a==="update"||a==="patch")&&(g.contentType="application/json",g.data=JSON.stringify(e.attrs||d.toJSON(e))),e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{});if(e.emulateHTTP&&(f==="PUT"||f==="DELETE"||f==="PATCH")){g.type="POST",e.emulateJSON&&(g.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",f);if(h)return h.apply(this,arguments)}}g.type!=="GET"&&!e.emulateJSON&&(g.processData=!1),g.type==="PATCH"&&y&&(g.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var i=e.xhr=b.ajax(c.extend(g,e));return d.trigger("request",d,i,e),i};var y=typeof window!="undefined"&&!!window.ActiveXObject&&(!window.XMLHttpRequest||!(new XMLHttpRequest).dispatchEvent),z={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var A=b.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},B=/\((.*?)\)/g,C=/(\(\?)?:\w+/g,D=/\*\w+/g,E=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(A.prototype,j,{initialize:function(){},route:function(a,d,e){c.isRegExp(a)||(a=this._routeToRegExp(a)),c.isFunction(d)&&(e=d,d=""),e||(e=this[d]);var f=this;return b.history.route(a,function(c){var g=f._extractParameters(a,c);f.execute(e,g),f.trigger.apply(f,["route:"+d].concat(g)),f.trigger("route",d,g),b.history.trigger("route",f,d,g)}),this},execute:function(a,b){a&&a.apply(this,b)},navigate:function(a,c){return b.history.navigate(a,c),this},_bindRoutes:function(){if(!this.routes)return;this.routes=c.result(this,"routes");var a,b=c.keys(this.routes);while((a=b.pop())!=null)this.route(a,this.routes[a])},_routeToRegExp:function(a){return a=a.replace(E,"\\$&").replace(B,"(?:$1)?").replace(C,function(a,b){return b?a:"([^/?]+)"}).replace(D,"([^?]*?)"),new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,b){var d=a.exec(b).slice(1);return c.map(d,function(a,b){return b===d.length-1?a||null:a?decodeURIComponent(a):null})}});var F=b.History=function(){this.handlers=[],c.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},G=/^[#\/]|\s+$/g,H=/^\/+|\/+$/g,I=/msie [\w.]+/,J=/\/$/,K=/#.*$/;F.started=!1,c.extend(F.prototype,j,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(a==null)if(this._hasPushState||!this._wantsHashChange||b){a=decodeURI(this.location.pathname+this.location.search);var c=this.root.replace(J,"");a.indexOf(c)||(a=a.slice(c.length))}else a=this.getHash();return a.replace(G,"")},start:function(a){if(F.started)throw new Error("Backbone.history has already been started");F.started=!0,this.options=c.extend({root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var d=this.getFragment(),e=document.documentMode,f=I.exec(navigator.userAgent.toLowerCase())&&(!e||e<=7);this.root=("/"+this.root+"/").replace(H,"/");if(f&&this._wantsHashChange){var g=b.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=g.hide().appendTo("body")[0].contentWindow,this.navigate(d)}this._hasPushState?b.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!f?b.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=d;var h=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&h.hash&&(this.fragment=this.getHash().replace(G,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){b.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),F.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();b===this.fragment&&this.iframe&&(b=this.getFragment(this.getHash(this.iframe)));if(b===this.fragment)return!1;this.iframe&&this.navigate(b),this.loadUrl()},loadUrl:function(a){return a=this.fragment=this.getFragment(a),c.any(this.handlers,function(b){if(b.route.test(a))return b.callback(a),!0})},navigate:function(a,b){if(!F.started)return!1;if(!b||b===!0)b={trigger:!!b};var c=this.root+(a=this.getFragment(a||""));a=a.replace(K,"");if(this.fragment===a)return;this.fragment=a,a===""&&c!=="/"&&(c=c.slice(0,-1));if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else if(this._wantsHashChange)this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace));else return this.location.assign(c);if(b.trigger)return this.loadUrl(a)},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),b.history=new F;var L=function(a,b){var d=this,e;a&&c.has(a,"constructor")?e=a.constructor:e=function(){return d.apply(this,arguments)},c.extend(e,d,b);var f=function(){this.constructor=e};return f.prototype=d.prototype,e.prototype=new f,a&&c.extend(e.prototype,a),e.__super__=d.prototype,e};o.extend=q.extend=A.extend=v.extend=F.extend=L;var M=function(){throw new Error('A "url" property or function must be specified')},N=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b),a.trigger("error",a,d,b)}};return b}),
define("lib/mixin",["require","exports","module","underscore"],function(a,b,c){function g(a,b){this.applyTo=function(c){a.applyTo(c,b)}}var d,e=a("underscore"),f=["before","after","around","requires","override","defaults","applyTo"];d=c.exports=Class.extend({initialize:function(a){this.properties=a},applyTo:function(a){var b=this.properties;this.requires(a,b.requires),this.extend(a,b),this.defaults(a,b.defaults),this.override(a,b.override),this.before(a,b.before),this.after(a,b.after),this.around(a,b.around),b.applyTo&&b.applyTo.apply(this,arguments)},before:function(a,b){e.each(b,function(b,c){var d=a[c];a[c]=function(){return b.apply(this,arguments),d.apply(this,arguments)}})},after:function(a,b){e.each(b,function(b,c){var d=a[c];a[c]=function(){var a=d.apply(this,arguments);return b.apply(this,arguments),a}})},around:function(a,b){e.each(b,function(b,c){var d=a[c],f=Array.prototype.slice;a[c]=function(){var a=f.apply(arguments);return a.unshift(d.bind(this)),b.apply(this,a)}})},override:function(a,b){e.extend(a,b)},defaults:function(a,b){e.each(b,function(b,c){a.hasOwnProperty(c)||(a[c]=b)})},extend:function(a,b){e.each(b,function(b,c){f.indexOf(c)<0&&(a[c]=b)})},requires:function(a,b){},withOptions:function(a){return new g(this,a)}}),g.prototype=d.prototype}),
define("lib/mixins/observing",["require","exports","module","underscore","lib/backbone","lib/mixin"],function(a,b,c){var d,e=a("underscore"),f=a("lib/backbone"),g=a("lib/mixin");d=c.exports=new g(e.extend({around:{set:function(a,b,c,d){var e=d&&d.silent,f,g;return e||(g=this.get(b)),f=a(b,c,d),!e&&g!==c&&this.trigger(b,{prev:g,current:c}),f},unset:function(a,b,c){var d=c&&c.silent,e,f;return d||(f=this.get(b)),e=a(b,c),!d&&f!==undefined&&this.trigger(b,{prev:f,current:undefined}),e}},before:{reset:function(a){(!a||!a.silent)&&this.each(function(a,b){this.trigger(b,{prev:this.get(b),current:undefined})},this)}}},f.Events))}),
define("lib/store",["require","exports","module","underscore"],function(a,b,c){var d,e=a("underscore"),f={};["each","forEach","map","find","detect","filter","select","reduce","reject","every","all","any","some","include","contains"].forEach(function(a){f[a]=function(){var b=[this._store];return b.push.apply(b,arguments),e[a].apply(e,b)}}),d=c.exports=Class.extend([f,{initialize:function(a){this._store={},this.length=0,this._final=!1,this.maxLength=a&&a.maxLength||!1,this.maxLength&&(this._keys=[])},maxLength:0,get:function(a){return this._store[a]},set:function(a,b){return this.has(a)?this.maxLength&&this._keys.splice(this._keys.indexOf(a),1):(++this.length,this.maxLength&&this.length>this.maxLength&&this.unset(this._keys[0])),this.maxLength&&this._keys.push(a),this._store[a]=b,this},unset:function(a){var b;return this.has(a)&&(--this.length,this._final?this._store[a]=b:(delete this._store[a],this.maxLength&&this._keys.splice(this._keys.indexOf(a),1))),this},reset:function(){return this._store={},this.maxLength&&(this._keys=[]),this._final=!1,this.length=0,this},has:function(a){return this._store.hasOwnProperty(a)},keys:function(){return Object.keys(this._store)},finalize:function(){this._final=!0}}])}),
define("vendor/i18n/i18n",["require","exports","module"],function(a,b,c){(function(){function f(){this.phrases={},this.locale=null}function g(a,c){return c?a.replace(b,function(a,b,d,f){var g=c[b||d||f];return d?e(g):g}):a}function h(a,b){return d[a](b)}function i(a){return Array.isArray(a)?a[0]:a.toString()}function j(){return 0}function k(a){return a!==1?1:0}function l(a){return a>1?1:0}function m(a){return a%10===1&&a%100!==11?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2}function n(a){return a===1?0:a>=2&&a<=4?1:2}function o(a){return a===1?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2}function p(a){return a%10!==1||a%100===11?1:0}function q(a){var b,c;for(var d=1,e=arguments.length;d<e;d++){b=arguments[d];for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}return a}function r(a){for(var b=1,c=arguments.length;b<c;b++){var d=arguments[b];for(var e in d)a[e]===void 0&&(a[e]=d[e])}return a}var a="[a-zA-Z0-9_]+",b=new RegExp("\\[\\[\\[("+a+")\\]\\]\\]|"+"\\[\\[("+a+")\\]\\]|"+"(%d)","g"),d,e;f.prototype.setLocale=function(a){this.locale=a},f.prototype.extend=function(a){q(this.phrases,a)},f.prototype.t=function(a,b,c){var d=this.phrases[a]||a;return g.call(this,i(d),b)},f.prototype.tp=function(a,b,c,d,e){var f;return f=this.phrases[a]?this.phrases[a][h(this.locale,c)]:h("en",c)?b:a,g.call(this,i(f),r({"%d":c},d))},d={id:j,ja:j,ko:j,ms:j,th:j,tr:j,zh:j,da:k,de:k,en:k,es:k,fi:k,el:k,he:k,hu:k,it:k,nl:k,no:k,pt:k,sv:k,fr:l,tl:l,hr:m,ru:m,cs:n,pl:o,is:p},e=function(){function d(b){return a[b]||"&amp;"}var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},b=/[&<>"'`]/g,c=/[&<>"'`]/;return function(a){return!a&&a!==0?"":(a=""+a,c.test(a)?a.replace(b,d):a)}}(),typeof c!="undefined"&&c.exports?c.exports=f:(window.SC=window.SC||{},window.SC.I18n=f)})()}),
define("config/locales/locale-en",["require","exports","module"],function(a,b,c){c.exports={}}),
define("config/locales/locale-pt",["require","exports","module"],function(a,b,c){c.exports={"Something went wrong":"Ocorreu um erro","Take this track with you and enjoy the full SoundCloud experience with our free app.":"Obtenha esta faixa e aproveite uma experiÃªncia completa do SoundCloud com o nosso aplicativo grÃ¡tis.","[[soundTitle]] by [[authorName]]":"[[soundTitle]] de [[authorName]]",Messages:"Mensagens","Take this playlist with you and enjoy the full SoundCloud experience with our free app.":"Obtenha esta faixa e aproveite uma experiÃªncia completa do SoundCloud com o nosso aplicativo grÃ¡tis.","[[playlistTitle]] by [[authorName]]":"[[playlistTitle]] de [[authorName]]","Search tracks":"","Search playlists":"","Search people":"","Search groups":"","Search [[category]]":"Buscar [[category]]","Unsubscribed successfully":"InscriÃ§Ã£o cancelada com sucesso","Be the first to hear what [[username]] posts next with our free app.":"Seja o primeiro a ouvir o que [[username]] posta com o nosso aplicativo grÃ¡tis.","[[username]]â€™s stream":"Stream de [[username]]","1 hour":["1 hora","%d horas"],"1 minute":["1 minuto","%d minutos"],"1 second":["1 segundo","%d segundos"],"Enjoy the full SoundCloud experience with our app.":"Aproveite uma experiÃªncia completa do SoundCloud com o nosso aplicativo.","1 track":["1 faixa","%d faixas"],"1 play":["1 reproduÃ§Ã£o","%d reproduÃ§Ãµes"],"1 follower":["1 seguidor","%d seguidores"],"Download on the App Store":"Baixar na App Store","Get it on Google Play":"Obtenha pelo Google Play","Get it at BlackBerry World":"Obtenha pelo BlackBerry World","Available at Amazon":"DisponÃ­vel na Amazon","Get it in the Firefox Marketplace":"Obtenha pelo Firefox Marketplace","Listen on SoundCloud Android":"OuÃ§a no SoundCloud Android","Listen on SoundCloud iOS":"OuÃ§a no SoundCloud iOS","Download our free app":"Baixe nosso aplicativo grÃ¡tis","Close banner":"Fechar banner",Retry:"Repetir","Sorry, something went wrong.":"Desculpe, ocorreu um erro.",Legal:"Legal",Privacy:"Privacidade",Cookies:"Cookies",Imprint:"Marca","SoundCloud homepage":"PÃ¡gina inicial do SoundCloud","Hear the world's sounds":"OuÃ§a os sons do mundo","Trending tracks on SoundCloud":"Faixas mais reproduzidas no SoundCloud","Messages are only<br> supported on desktop browsers.":"Mensagens sÃ£o suportadas apenas<br> em navegadores desktop.","Pages may not display correctly <br>in mobile browsers.":"As pÃ¡ginas podem nÃ£o ser exibidas corretamente <br>em navegadores mÃ³veis.","Go to Messages":"Ir para Mensagens","Find More. Play More.<br>Hear More.":"Ache Mais. Toque Mais. <br>OuÃ§a Mais.","Download our app<br>for iPhone and iPad.":"Baixe nosso aplicativo <br>para iPhone e iPad.","Not got our app for<br>Android yet?":"Ainda nÃ£o tem nosso aplicativo para <br>Android?","What are you waiting for?":"O que estÃ¡ esperando?","You have unsubscribed":"VocÃª cancelou sua inscriÃ§Ã£o","We're sorry to see you go":"Sentimos muito em vÃª-lo ir","Review your email subscriptions at":"Rever suas inscriÃ§Ãµes por e-mail em","Play or pause track":"Reproduzir ou pausar faixa",All:"Todos",Tracks:"Faixas",Playlists:"Listas de ReproduÃ§Ã£o",People:"Pessoas","Sorry, nothing matches your search":"Desculpe, nada corresponde a sua busca",Cancel:"Cancelar","Search SoundCloud":"Busca SoundCloud","Find people, tracks and playlists":"Ache pessoas, faixas e listas de reproduÃ§Ã£o","Reposted by [[username]]":"Re-postado por [[username]]","Now Playing":"Reproduzindo","Previous track":"Faixa anterior","Next track":"PrÃ³xima Faixa","We're sorry, track not available on mobile":"Desculpe, faixa nÃ£o disponÃ­vel para dispositivo mÃ³vel",Spotlight:"Spotlight",Track:["Faixa","Faixas"],"Show more tracks":"Mostrar mais faixas",Playlist:["Lista de ReproduÃ§Ã£o","Lista de ReproduÃ§Ã£o"],"Show more playlists":"Mostrar mais listas de reproduÃ§Ã£o",Like:["Curtir","Curtidas"],"Show more likes":"Mostrar mais curtidas"}}),
define("lib/mixins/persistent",["require","exports","module","underscore","lib/mixin","lib/support"],function(a,b,c){function p(a){var b,c,d,f,g,h,i;g={dontPersist:!0};if(!a.key){e.each(e.values(o.local).concat(e.values(o.session)),function(a){a.reset(g)});return}j.lastIndex=0,b=j.exec(a.key),b&&(d=b[1],c=b[2],d&&c&&(f=o[d][c],f&&(i=k(f),h=Object.keys(i),e.each(i,function(a,b){f.set(b,a,g)}),e.difference(f.keys(),h).forEach(function(a){f.unset(a,g)}))))}var d,e=a("underscore"),f=a("lib/mixin"),g=a("lib/support"),h="MW",i="::",j=new RegExp("^"+h+i+"(\\S+?)"+i+"(\\S+)"),k,l,m,n,o={local:{},session:{}};d=c.exports=new f({storage:null,keyName:null,type:null,namespace:null,around:{initialize:function(a,b,c){c=c||"local";if(o[c][b])return o[c][b];o[c][b]=this,a(),this.type=c,this.namespace=b,this.storage=m(c,b),this.keyName=l(c,b),this._store=k(this),this.length=e.keys(this._store).length}},after:{set:function(a,b,c){var d=!c||!c.dontPersist,e;d&&(e=n(this),e||this.unset(a))},unset:function(a,b){(!b||!b.dontPersist)&&n(this)},reset:function(a){(!a||!a.dontPersist)&&n(this)}},dispose:function(){this.storage.removeItem(this.keyName),this.reset({dontPersist:!0}),delete o[this.type][this.namespace]},write:function(){n(this)}}),l=function(a,b){return[h,a,b].join(i)},n=function(a){var b=a.storage;if(b)try{return b.setItem(a.keyName,JSON.stringify(a._store)),!0}catch(c){return!1}},m=function(a){var b;return a==="local"&&g.localStorage?b=window.localStorage:a==="session"&&g.sessionStorage&&(b=window.sessionStorage),b},k=function(a){var b={},c=a.storage;return c&&(b=JSON.parse(c.getItem(a.keyName)||"{}")),b},window.addEventListener("storage",p,!1)}),
define("lib/collection",["require","exports","module","underscore","$","lib/backbone","lib/single","lib/url"],function(a,b,c){var d,e=a("underscore"),f=a("$"),g=a("lib/backbone"),h=a("lib/single"),i=a("lib/url"),j={},k,l;d=g.Collection.extend({next_href:null,lastFetchTime:null,model:j,defaults:{offset:0,limit:10,secret_token:null},initialize:function(a,b){this.options=l(this.constructor,b||{}),this.setup(b)},setup:f.noop,_prepareModel:function(a){var b=a instanceof g.Model;return a=g.Collection.prototype._prepareModel.apply(this,arguments),a&&a.hold(this._usageCount()-(b?0:1)),a},_removeReference:function(a){return a.release(this._usageCount()),g.Collection.prototype._removeReference.apply(this,arguments)},fetch:function(a){var b=a&&a.url||e.result(this,"url");return b?this._requests&&this._requests[b]||g.Collection.prototype.fetch.call(this,a).done(function(a){this.next_href=a.next_href||!1}.bind(this)):f.Deferred().done(a&&a.success).resolve({})},bulkFetch:function(a){var b=arguments[1],c=arguments[2],d,e;if(!b){this._requests=this._requests||{};if(this._requests.bulk)return this._requests.bulk;this._requests.bulk=b=f.Deferred(),b.always(function(){delete this._requests.bulk}.bind(this)),c=this.length,d=this.options.limit,this.next_href||(this.options.limit=a-this.length),b.always(function(){this.options.limit=d,k.call(this,{limit:d})}.bind(this))}return this.length<a&&this.url()?(this.lastFetchTime?e={add:!0}:e={},e.silent=!0,k.call(this,{limit:a-this.length}),this.fetch(e).done(function(){this.bulkFetch(a,b,c)}.bind(this)).fail(b.reject)):(c?this.rest(c).forEach(function(a){this.trigger("add",a,this)},this):this.trigger("reset",this,{}),b.resolve()),b},url:function(){if(this.next_href!==null)return this.next_href;var a=i.parse(e.result(this,"baseUrl"));return e.extend(a.query,{limit:this.options.limit,offset:Math.max(this.options.offset,this.length),linked_partitioning:1}),this.options.secret_token&&(a.query.secret_token=this.options.secret_token),i.stringify(a)},parse:function(a){return a.collection},empty:function(){this.next_href=null,this.lastFetchTime=null,this.options.offset&&(this.options.offset=0),this.reset(null,{silent:!0})},hasDataForView:function(){return this.isPopulated()},isPopulated:function(){return!!this.lastFetchTime||!!this.length},isPrivate:function(){return!!this.options.secret_token},isFullyPopulated:function(){return this.next_href===!1},setLimit:function(a){this.options.limit=a,this.next_href&&(this.next_href=i.modify(this.next_href,{query:{limit:a}}))},indexOfEquivalentModel:function(a,b){var c=-1;return(b||this.models).some(function(b,d){if(a.equivalentTo(b))return c=d,!0}),c},compareModels:function(a,b){return a===b||a.equivalentTo(b)}}),c.exports=h.applyTo(d,{hashFn:function(a,b){return b&&b.resource_id||null},onHold:function(a,b,c){a.length&&a.at(0).hold&&a.invoke("hold",c)},onRelease:function(a,b,c){a.length&&a.at(0).release&&a.invoke("release",c)}}),l=function(a,b){return e.defaults(b,a.prototype.defaults),a===d?b:l(a.__super__.constructor,b)},k=function(a){if(this.next_href){var b=i.parse(this.next_href);e.extend(b.query,a),this.next_href=i.stringify(b)}}}),
define("lib/promise",["require","exports","module","underscore","$"],function(a,b,c){var d=a("underscore"),e=a("$");c.exports={defer:function(a){var b=e.Deferred(),c=b.promise();return d.isFunction(a)?(a.call(c,b.resolve,b.reject),c):(d.isObject(a)&&d.isFunction(a.then)&&a.then(b.resolve,b.reject),b)},all:function(a){return e.when.apply(e,a)},resolve:function(a){return e.Deferred().resolve(a)},reject:function(a){return e.Deferred().reject(a)},promisify:function(a){return function(){var b=e.Deferred();return a.apply(null,d.toArray(arguments).concat(function(a,c){a?b.reject(a):b.resolve(c)})),b.promise()}},call:function(a){var b=e.Deferred(),c=d.tail(arguments,1);try{b.resolve(a.apply(null,c))}catch(f){b.reject(f)}return b.promise()}}}),
define("lib/mixins/audio-source",["require","exports","module","lib/mixin"],function(a,b,c){var d,e=a("lib/mixin");d=c.exports=new e({requires:["getSourceInfo","getSounds"],defaults:{isAudioSource:!0}})}),
define("models/sound",["require","exports","module","underscore","models/audible-interface","lib/mobi-audio","lib/model","lib/url","lib/mixins/urn"],function(a,b,c){var d,e=a("underscore"),f=a("models/audible-interface"),g=a("lib/mobi-audio"),h=a("lib/model"),i=a("lib/url"),j=a("lib/mixins/urn"),k=function(){return this},l=e.constant(1),m=e.constant(0),n=e.constant(undefined);d=c.exports=f.extend(j,{resource_type:"sound",urnPrefix:"soundcloud:tracks",audio:null,setup:function(a,b){f.prototype.setup.apply(this,arguments);var c=!!b&&!!b.suppressGlobalEvents;this.audio=new g(this,c),this.set("playable",!0),e.proxy(this.audio,this,"seek","isPaused","isPlaying","isLoading","loadProgress","currentTime","initAudio")},play:function(a){if(this.playlist){var b=this.playlist.isPaused();this.playlist.seek(this.timeOffset+this.currentTime()),b&&this.playlist.play(a)}else this.audio.play(a)},pause:function(a){this.playlist?this.playlist.pause(a):this.audio.pause(a)},toggle:function(a){this[this.isPlaying()?"pause":"play"](a)},baseUrl:function(){return i.stringify({path:["tracks",this.id]})},parse:function(a){return f.prototype.parse.apply(this,arguments),a.playback_count||(a.playback_count=0),a.waveform_url&&(a.waveform_url=a.waveform_url.replace("wis.","w1.").replace(".json",".png")),a},extractSecretToken:function(a){return i.parse(a.stream_url).query.secret_token},getSounds:function(){return[this]},getSoundAt:k,getCurrentSound:k,getFirstSound:k,getLastSound:k,getNumSounds:l,getPrevSound:n,getNextSound:n,getSoundIndexAt:m,getRelativeTrackLength:l,getSoundIndex:function(a){return a===this?0:-1},isPlayable:function(){return this.get("playable")!==!1},toJSON:function(){var a=h.prototype.toJSON.apply(this,arguments);return a._playlist={},this.playlist&&e.each(["id","permalink","permalink_url","secret_token","user_id"],function(b){a._playlist[b]=this.get(b)}.bind(this.playlist)),a},streamsUrl:function(){var a,b;return a={path:["i1","tracks",this.id,"streams"]},b=this.getSecretToken(),b&&(a.query={secret_token:b}),i.stringify(a)},registerUrl:function(){return i.stringify({path:["tracks",this.id,"plays"],query:{secret_token:this.get("secret_token")}})}},{hashFn:function(a){var b=a.resource_id;return b?typeof b=="object"?[b.playlist_id,b.sound_id].join("_"):b:a.id||null},resolve:function(a,b,c){return h._resolve(this,[a,b,c],function(c){var d=c.get("user");return d&&c.get("permalink")===b&&d.permalink===a})},onCleanup:function(a){a.audio.dispose()}})}),
define("lib/tracking/tracking-bus",["require","exports","module","underscore","lib/backbone"],function(a,b,c){var d,e=a("underscore"),f=a("lib/backbone"),g=["show","hide","cancel","submit","focus","blur","hover","navigate"],h=["play","pause","finish"];d=c.exports=e.extend({},f.Events,{action:function(a,b,c){var d=e.contains(g,a);if(d&&b)return this.trigger("action",a,b,c)},audio:function(a,b,c,d,f,g){var i=e.contains(h,a),j=e.toArray(arguments);j.unshift("audio");if(i&&b&&c&&d)return this.trigger.apply(this,j)},saveAudioContext:function(){return this.trigger("saveAudioContext")},impression:function(a,b){return this.trigger("impression",a,b)},pageview:function(a){return this.trigger("pageview",a)},appLoad:function(a){return this.trigger("appLoad",a)}})}),
define("lib/model",["require","exports","module","$","underscore","api-wrapper","lib/backbone","config","lib/connect","lib/mixins/models/data-dns-prefetcher","lib/single","lib/url"],function(a,b,c){var d,e=a("$"),f=a("underscore"),g=a("api-wrapper"),h=a("lib/backbone"),i=a("config"),j=a("lib/connect"),k=a("lib/mixins/models/data-dns-prefetcher"),l=a("lib/single"),m=a("lib/url"),n=Array.prototype.slice;d=h.Model.extend(k,{resource_type:null,lastFetchTime:null,_submodels:null,submodelMap:null,initialize:function(){this._submodels=[],f.each(this.submodelMap,function(a,b){this.on("change:"+b,this.createSubmodel.bind(this,a,b))},this),this.setup.apply(this,arguments),f.each(this.submodelMap,function(a,b){this.get(b)&&this.createSubmodel(a,b)},this)},setup:e.noop,createSubmodel:function(a,b){this.addSubmodel(new a(this.get(b)))},addSubmodel:function(){n.call(arguments).forEach(function(a){this._submodels.indexOf(a)===-1?this._submodels.push(a):a.release()}.bind(this))},getAttributesToBeSaved:function(){var a=this.toJSON(),b={};return b[g.toAPIResource(this.resource_type)]=a,b},save:function(a,b){return h.Model.prototype.save.call(this,a,f.extend({url:this.saveUrl(),data:e.param(this.getAttributesToBeSaved())},b)).done(function(a){this.set(a),this.updateResourceId()}.bind(this))},saveUrl:function(){var a=f.result(this,"baseUrl");return this.isNew()&&(a=a.split("/").slice(0,-1).join("/")),a},destroy:function(a){return h.Model.prototype.destroy.call(this,f.extend({url:this.destroyUrl()},a))},destroyUrl:function(){return f.result(this,"baseUrl")},baseUrl:function(){throw new Error("baseUrl should be defined for every model")},url:function(a){var b=this.getSecretToken(),c=f.result(this,a||"baseUrl");return b?m.modify(c,{query:{secret_token:b}}):c},getSecretToken:function(){return this.get("secret_token")},signedUrl:function(a){var b=this.get(a),c;return b?(c={scheme:"http",query:{client_id:i.get("client_id")}},j.isLoggedIn()&&(c.scheme="https",c.query.oauth_token=j.getAuthToken()),this.get("secret_token")&&(c.query.secret_token=this.get("secret_token")),m.modify(b,c)):null},equivalentTo:function(a){return this===a||this.id&&this.id===a.id},toJSON:function(){var a=h.Model.prototype.toJSON.apply(this,arguments);return a._resource_id=this.resource_id,a._resource_type=this.resource_type,a},parse:function(a){var b;return typeof this.baseUrl=="string"&&(b=m.parse(this.baseUrl).query.secret_token),b||(b=this.extractSecretToken(a)),b&&(a.secret_token=b),a},extractSecretToken:e.noop,toString:function(){return this.resource_type?this.resource_type+" ("+(this.isNew()?"new":this.resource_id)+")"+": "+(this.attributes.permalink||this.attributes.title||this.attributes.name):Object.prototype.toString.call(this)},hasDataForView:function(a){return a.getRequiredAttributes(this).every(Object.prototype.hasOwnProperty,this.attributes)},updateResourceId:function(){var a=this.constructor.hashFn(this.attributes),b=this.resource_id;a&&(this.resource_id=a,this.constructor.instances.changeKey(b,a))}},{_resolve:function(a,b,c){var d=a.instances.find(c),f=e.Deferred(),g;return d?f.resolve(d):(g=m.stringify({path:"resolve",query:{url:m.stringify({scheme:document.location.protocol.replace(/:/,""),host:i.get("api_host").replace(/^https?:\/\/api\./,""),path:b}),"_status_code_map[302]":200,_status_format:"json"}}),e.ajax({dataType:"json",url:g}).done(function(b){d=a.getNewInstance({}),d.baseUrl=b.location,d.fetch().done(function(){a.instances.add(d),d.release(),f.resolve(d)}).fail(f.reject)}).fail(f.reject)),f}}),c.exports=l.applyTo(d,{hashFn:function(a){return a&&a.id||null},onCleanup:function(a){a._submodels&&a._submodels.length&&(f.invoke(a._submodels,"release"),a._submodels.length=0)},prepareArgs:function(a,b){return b=b||{},a=a||{},b.parse&&(a=this.parse(a)),[a,b]},prepareInstance:function(a,b){return b=b||{},b.collection&&(this.lastFetchTime=Date.now()),f.isEmpty(a)||this.set(a),delete this.attributes.resource_id,this},getIncrementValue:function(a,b){var c=b&&b.collection;return c?c.constructor.instances.countFor(c.resource_id):1}})}),
define("lib/tracking/comscore",["require","exports","module","$"],function(a,b,c){var d,e=a("$"),f="comScore-beacon",g="16601931";d=c.exports={init:function(){var a=document.createElement("script");return window._comscore=window._comscore||[{c1:"2",c2:g}],a.async=!0,a.src=(document.location.protocol==="https:"?"https://sb":"http://b")+".scorecardresearch.com/beacon.js",a.id=f,a.addEventListener("load",function(){this.destroy()}.bind(this)),document.body.appendChild(a),a},destroy:function(){var a=document.getElementById(f);return a?(e(a).remove(),!0):!1}}}),
define("lib/tracking/helpers/core",["require","exports","module","underscore","config"],function(a,b,c){var d,e=a("underscore"),f=a("config"),g,h={listen:"tracks"},i={search:"category"},j={suggestions:{args:{category:"suggestions"},layoutName:"search"}};d=c.exports={getUserId:function(){return f.get("me").id},getLevel:function(a){var b=f.get("router").getLayoutInfo().layoutName;return a&&a.level||h[b]||b},getChapter:function(a){var b=f.get("router").getLayoutInfo(),c=b.layoutName,d=i[c]||"subpage",g=b.args&&b.args[d]||a.chapter||"main";return e.compact([g])},getContext:function(a){return[this.getLevel(a),this.getChapter(a)].join(":")},getAudioContext:function(){var a,b,c,d;return g?(a=g.layoutName,b=h[a]||a,c=i[a]||"subpage",d=g.args&&g.args[c]||"main"):(b="tracks",d="main"),[b,d].join(":")},saveAudioContext:function(a){var b=f.get("router").getLayoutInfo(),c=j[a];g=e.extend(c||e.pick(b,"args","layoutName"),{url:window.location.href.replace(/^https?:\/\/[^\/]+\//,"")})},getImpressionEvent:function(a){return{context:this.getImpressionContext(a),urn:this.getURN(a.contextData)}},getImpressionContext:function(a){return a&&a.contextData&&a.contextData.context||{campaign:a.identifier}},getURN:function(a){var b=a.kind,c=a.id,d=b==="user"?"users":b==="track"?"tracks":undefined;return b&&d&&c?"soundcloud:"+d+":"+c:null},getIdentifier:function(a){return[a.identifier||""]}}}),
define("vendor/event-logger/event-logger",["require","exports","module"],function(a,b,c){(function(){function o(a){var b="."+window.location.hostname.replace(/.*\.(.+\..+)/,"$1"),c=new Date,d;c.setTime(c.getTime()+31536e7),d="; expires="+c.toGMTString(),document.cookie=j+"="+a+d+"; path=/; domain="+b}function p(){var a=document.cookie.split(j+"=");return a.length>1&&a[1].split(";")[0]}function q(){return Math.floor(Math.random()*1e6)}function r(a){var b={},c;for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function s(a,b){var c=r(a),d;for(d in b)b.hasOwnProperty(d)&&(c[d]=b[d]);return c}function t(a){return a=typeof a=="object"?a:{},a.context=a.context||{},a.context.scope=a.context.scope||[],a}function u(a,c){var d,i,j,k;i=[],d=h+a+"?",d+=["anonymous_id="+encodeURIComponent(b),"client_id="+g,"ts="+Date.now(),"url="+window.location.href.split("/").map(encodeURIComponent).join("/")].join("&"),f&&Object.keys(f).forEach(function(a){i.push("exp_"+a+"="+f[a])}),e&&i.push("origin="+e),document.referrer.length>0&&i.push("referrer="+encodeURIComponent(document.referrer));for(j in c)c.hasOwnProperty(j)&&c[j]!=null&&i.push(encodeURIComponent(j)+"="+encodeURIComponent(c[j]));return d+="&"+i.join("&"),k=new Image,k.onload=v.bind(null,k),k.onerror=w.bind(null,k,m),k.src=d,d}function v(a){a.onload=a.onerror=null}function w(a,b){var c=a.src;a.onload=a.onerror=null,a.src=n,setTimeout(function(){a.src=c},b)}function x(a,b){var c=0,d=b.length;for(;c<d;c++)if(a[b[c]]===undefined)return!0;return!1}function y(a){return a?"soundcloud:users:"+a:b}function z(){}function A(a,b){b&&(a.page_params=[b.qid,b.position].join(";"))}var a,b,d,e,f,g,h,i,j="sc_anonymous_id",k=3e4,l=1e3,m=3e4,n="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";i=function(){throw new Error("EventLogger must be initialized")},a={_anonymousId:null,initialize:function(c){if(d)return;if(!c.id)throw new Error("EventLogger: You need to pass an id");e=c.origin,b=this._anonymousId=a.getAnonymousId(),this.checkpointIntervals={},g=c.id,h=c.trackingUrl||"https://eventlogger.soundcloud.com",d=!0,i=z},setExperiments:function(a){f=a},getAnonymousId:function(){var a=p();if(!a||a==="undefined")a=[q(),q(),q(),q()].join("-"),o(a);return a},pageview:function(a,b,c){i();var d=y(a);return u("/pageview",{user:d,level:b,chapter:c.join("::")})},impression:function(a,b,c){i(),c=t(c);var d={ad_urn:c.ad_urn,campaign:c.context.campaign,context:c.context.scope.join(":"),external_media:c.external_media,impression_name:c.impression_name,impression_object:c.impression_object,level:b,monetization_type:c.monetization_type,monetized_object:c.monetized_object,promoted_by:c.promoted_by,urn:c.urn,user:y(a)};u("/impression",s(d,c.params))},click:function(a,b,c,d){i(),d=t(d);var e={ad_urn:d.ad_urn,campaign:d.context.campaign,chapter:c.join("::"),context:d.context.scope.join(":"),external_media:d.external_media,level:b,monetization_type:d.monetization_type,monetized_object:d.monetized_object,promoted_by:d.promoted_by,urn:d.urn,user:y(a),click_name:d.click_name,click_object:d.click_object,click_target:d.click_target,page_name:d.page_name,page_urn:d.page_urn};return A(e,d.context.searchTracking),u("/click",s(e,d.params))},audio:function(a){i();if(x(a,["level","action","id","duration"]))throw new Error("EventLogger â€” Audio : One or multiple mandatory arguments are missing");var b=a.id,c="soundcloud:sounds:"+b,d=Math.floor(a.duration*1e3),e=this.checkpointIntervals,f=typeof a.checkpointInterval=="number"&&a.checkpointInterval>=l?a.checkpointInterval:null,g,h,j,m;return g={action:a.action,ad_urn:a.ad_urn,context:a.context,duration:d,level:a.level,monetization_type:a.monetization_type,monetized_object:a.monetized_object,policy:a.policy,promoted_by:a.promoted_by,protocol:a.protocol,set_id:a.setId,set_position:a.setPosition,sound:c,source:a.source,source_version:a.sourceVersion,trigger:a.trigger,user:y(a.user)},A(g,a.searchTracking),h=u("/audio",g),clearInterval(e[b]),a.action==="play"?(j=Date.now(),m=r(g),m.action="checkpoint",e[b]=setInterval(function(){Date.now()<j+d?u("/audio",m):clearInterval(e[b])},f||k)):delete e[b],h},audioPerformance:function(a){i();if(x(a,["type","latency","protocol","playertype","host"]))throw new Error("EventLogger â€” AudioPerformance : One or multiple mandatory arguments are missing");var b={type:a.type,latency:a.latency,protocol:a.protocol,player_type:a.playertype,host:a.host};return u("/audio_performance",b)},appLoad:function(a,b){i();var c={latency:b.latency,user:y(a),level:b.level};return u("/appload",c)},performRequestWithUser:function(a,b,c){return u(b,s({user:y(a)},c))}},typeof c!="undefined"&&c.exports?c.exports=a:(window.SC=window.SC||{},window.SC.EventLogger=a)})()}),
define("lib/tracking/types/actions",["require","exports","module"],function(a,b,c){c.exports={navigate:{identifiers:["home","sign-in","user","track","playlist"]},submit:{identifiers:["search:submit","download_app_button:download","download_app_badge:download"]},show:{identifiers:["search:prompt"]}}}),
define("lib/tracking/types/impressions",["require","exports","module"],function(a,b,c){var d;d=c.exports=["searchItem","download_app_interstitial"]}),
define("lib/tracking/types/pageviews",["require","exports","module","config"],function(a,b,c){function e(a){return d.get("router").getLayoutInfo().args[a]}function f(a){return a=a||"subpage",[e(a)||"main"]}var d=a("config");c.exports={"default":{chapter:["default",window.location],level:"default"},listen:{chapter:f,level:"tracks"},search:{chapter:f.bind(f,"category"),level:"search"},"static-page":{chapter:f.bind(f,"pageName"),level:"static-page"},messages:{chapter:f,level:"messages"},error:{chapter:f,level:"error-page"},playlist:{chapter:f,level:"playlist"},user:{chapter:f,level:"profile"}}}),
define("lib/mixins/urn",["require","exports","module","lib/mixin"],function(a,b,c){var d,e=a("lib/mixin");d=c.exports=new e({requires:["urnPrefix"],getUrn:function(){var a=this.id||this.resource_id;return this.urnPrefix&&a?this.urnPrefix+":"+a:undefined}})}),
define("lib/css",["require","exports","module","underscore"],function(a,b,c){var d,e=a("underscore"),f=document.getElementsByTagName("head")[0];d=c.exports={insert:function(a){e.isArray(a)||(a=[a]),a.forEach(function(a){if(a.parentNode)return;f.appendChild(a)})}}}),
define("lib/console-box.css",["require","exports","module","dpi"],function(a,b,c,d){var e=c.exports=document.createElement("style"),f=d('.consoleBox{display:block;height:30%;width:100%;z-index:9999;position:absolute;top:0;left:0;right:0;padding:3px;font-family:"Monaco","Courier New",monospace;font-size:11px;box-sizing:border-box;background-color:#002240;overflow-x:hidden;overflow-y:auto}.consoleBox__message{white-space:nowrap;color:#FF9D00}');e.styleSheet?e.styleSheet.cssText=f:e.appendChild(document.createTextNode(f)),f=null}),
define("ajax",["require","exports","module","type"],function(require,exports,module){function triggerAndReturn(a,b,c){return!0}function triggerGlobal(a,b,c,d){if(a.global)return triggerAndReturn(b||document,c,d)}function ajaxStart(a){a.global&&ajax.active++===0&&triggerGlobal(a,null,"ajaxStart")}function ajaxStop(a){a.global&&!--ajax.active&&triggerGlobal(a,null,"ajaxStop")}function ajaxBeforeSend(a,b){var c=b.context;if(b.beforeSend.call(c,a,b)===!1||triggerGlobal(b,c,"ajaxBeforeSend",[a,b])===!1)return!1;triggerGlobal(b,c,"ajaxSend",[a,b])}function ajaxSuccess(a,b,c){var d=c.context,e="success";c.success.call(d,a,e,b),triggerGlobal(c,d,"ajaxSuccess",[b,c,a]),ajaxComplete(e,b,c)}function ajaxError(a,b,c,d){var e=d.context;d.error.call(e,c,b,a),triggerGlobal(d,e,"ajaxError",[c,d,a]),ajaxComplete(b,c,d)}function ajaxComplete(a,b,c){var d=c.context;c.complete.call(d,b,a),triggerGlobal(c,d,"ajaxComplete",[b,c]),ajaxStop(c)}function empty(){}function mimeToDataType(a){return a&&(a==htmlType?"html":a==jsonType?"json":scriptTypeRE.test(a)?"script":xmlTypeRE.test(a)&&"xml")||"text"}function appendQuery(a,b){return(a+"&"+b).replace(/[&?]{1,2}/,"?")}function serializeData(a){type(a.data)==="object"&&(a.data=param(a.data)),a.data&&(!a.type||a.type.toUpperCase()=="GET")&&(a.url=appendQuery(a.url,a.data))}function serialize(a,b,c,d){var e=type(b)==="array";for(var f in b){var g=b[f];d&&(f=c?d:d+"["+(e?"":f)+"]"),!d&&e?a.add(g.name,g.value):(c?type(g)==="array":type(g)==="object")?serialize(a,g,c,f):a.add(f,g)}}function param(a,b){var c=[];return c.add=function(a,b){this.push(escape(a)+"="+escape(b))},serialize(c,a,b),c.join("&").replace("%20","+")}function extend(a){var b=Array.prototype.slice;return b.call(arguments,1).forEach(function(b){for(key in b)b[key]!==undefined&&(a[key]=b[key])}),a}var type=require("type"),jsonpID=0,document=window.document,key,name,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,scriptTypeRE=/^(?:text|application)\/javascript/i,xmlTypeRE=/^(?:text|application)\/xml/i,jsonType="application/json",htmlType="text/html",blankRE=/^\s*$/,ajax=module.exports=function(options){var settings=extend({},options||{});for(key in ajax.settings)settings[key]===undefined&&(settings[key]=ajax.settings[key]);ajaxStart(settings),settings.crossDomain||(settings.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(settings.url)&&RegExp.$2!=window.location.host);var dataType=settings.dataType,hasPlaceholder=/=\?/.test(settings.url);if(dataType=="jsonp"||hasPlaceholder)return hasPlaceholder||(settings.url=appendQuery(settings.url,"callback=?")),ajax.JSONP(settings);settings.url||(settings.url=window.location.toString()),serializeData(settings);var mime=settings.accepts[dataType],baseHeaders={},protocol=/^([\w-]+:)\/\//.test(settings.url)?RegExp.$1:window.location.protocol,xhr=ajax.settings.xhr(),abortTimeout;settings.crossDomain||(baseHeaders["X-Requested-With"]="XMLHttpRequest"),mime&&(baseHeaders.Accept=mime,mime.indexOf(",")>-1&&(mime=mime.split(",",2)[0]),xhr.overrideMimeType&&xhr.overrideMimeType(mime));if(settings.contentType||settings.data&&settings.type.toUpperCase()!="GET")baseHeaders["Content-Type"]=settings.contentType||"application/x-www-form-urlencoded";settings.headers=extend(baseHeaders,settings.headers||{}),xhr.onreadystatechange=function(){if(xhr.readyState==4){clearTimeout(abortTimeout);var result,error=!1;if(xhr.status>=200&&xhr.status<300||xhr.status==304||xhr.status==0&&protocol=="file:"){dataType=dataType||mimeToDataType(xhr.getResponseHeader("content-type")),result=xhr.responseText;try{dataType=="script"?(1,eval)(result):dataType=="xml"?result=xhr.responseXML:dataType=="json"&&(result=blankRE.test(result)?null:JSON.parse(result))}catch(e){error=e}error?ajaxError(error,"parsererror",xhr,settings):ajaxSuccess(result,xhr,settings)}else ajaxError(null,"error",xhr,settings)}};var async="async"in settings?settings.async:!0;xhr.open(settings.type,settings.url,async);for(name in settings.headers)xhr.setRequestHeader(name,settings.headers[name]);return ajaxBeforeSend(xhr,settings)===!1?(xhr.abort(),!1):(settings.timeout>0&&(abortTimeout=setTimeout(function(){xhr.onreadystatechange=empty,xhr.abort(),ajaxError(null,"timeout",xhr,settings)},settings.timeout)),xhr.send(settings.data?settings.data:null),xhr)};ajax.active=0,ajax.JSONP=function(a){if("type"in a){var b="jsonp"+ ++jsonpID,c=document.createElement("script"),d=function(){b in window&&(window[b]=empty),ajaxComplete("abort",e,a)},e={abort:d},f;return a.error&&(c.onerror=function(){e.abort(),a.error()}),window[b]=function(c){clearTimeout(f),delete window[b],ajaxSuccess(c,e,a)},serializeData(a),c.src=a.url.replace(/=\?/,"="+b),a.timeout>0&&(f=setTimeout(function(){e.abort(),ajaxComplete("timeout",e,a)},a.timeout)),e}return ajax(a)},ajax.settings={type:"GET",beforeSend:empty,success:empty,error:empty,complete:empty,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:jsonType,xml:"application/xml, text/xml",html:htmlType,text:"text/plain"},crossDomain:!1,timeout:0},ajax.get=function(a,b){return ajax({url:a,success:b})},ajax.post=function(a,b,c,d){return type(b)==="function"&&(d=d||c,c=b,b=null),ajax({type:"POST",url:a,data:b,success:c,dataType:d})},ajax.getJSON=function(a,b){return ajax({url:a,success:b,dataType:"json"})};var escape=encodeURIComponent}),
define("classes",["require","exports","module","indexof"],function(a,b,c){function f(a){this.el=a,this.list=a.classList}var d=a("indexof"),e=/\s+/;c.exports=function(a){return new f(a)},f.prototype.add=function(a){if(this.list)return this.list.add(a),this;var b=this.array(),c=d(b,a);return~c||b.push(a),this.el.className=b.join(" "),this},f.prototype.remove=function(a){if(this.list)return this.list.remove(a),this;var b=this.array(),c=d(b,a);return~c&&b.splice(c,1),this.el.className=b.join(" "),this},f.prototype.toggle=function(a){return this.list?(this.list.toggle(a),this):(this.has(a)?this.remove(a):this.add(a),this)},f.prototype.array=function(){var a=this.el.className.split(e);return""===a[0]&&a.pop(),a},f.prototype.has=f.prototype.contains=function(a){return this.list?this.list.contains(a):!!~d(this.array(),a)}}),
define("vendor/zepto-events",["require","exports","module"],function(a,b,c){function i(a){return a._zid||(a._zid=e++)}function j(a,b,c,e){b=k(b);if(b.ns)var f=l(b.ns);return(d[i(a)]||[]).filter(function(a){return a&&(!b.e||a.e==b.e)&&(!b.ns||f.test(a.ns))&&(!c||i(a.fn)===i(c))&&(!e||a.sel==e)})}function k(a){var b=(""+a).split(".");return{e:b[0],ns:b.slice(1).sort().join(" ")}}function l(a){return new RegExp("(?:^| )"+a.replace(" "," .* ?")+"(?: |$)")}function m(a,b,c){typeof a!="string"?h.each(a,c):a.split(/\s/).forEach(function(a){c(a,b)})}function n(a,b){return a.del&&(a.e=="focus"||a.e=="blur")||!!b}function o(a){return g[a]||a}var d={},e=1,f={},g={mouseenter:"mouseover",mouseleave:"mouseout"},h={};h.each=function(a){return[].every.call(this,function(b,c){return a.call(b,c,b)!==!1}),this},f.click=f.mousedown=f.mouseup=f.mousemove="MouseEvents",b.add=add=function(a,b,c,e,f,h){var j=i(a),l=d[j]||(d[j]=[]);m(b,c,function(b,c){var d=k(b);d.fn=c,d.sel=e,d.e in g&&(c=function(a){var b=a.relatedTarget;if(!b||b!==this&&!this.contains(b))return d.fn.apply(this,arguments)}),d.del=f&&f(c,b);var i=d.del||c;d.proxy=function(b){var c=i.apply(a,[b].concat(b.data));return c===!1&&(b.preventDefault(),b.stopPropagation()),c},d.i=l.length,l.push(d),a.addEventListener(o(d.e),d.proxy,n(d,h))})},b.remove=remove=function(a,b,c,e,f){var g=i(a);m(b||"",c,function(b,c){j(a,b,c,e).forEach(function(b){delete d[g][b.i],a.removeEventListener(o(b.e),b.proxy,n(b,f))})})};var p=function(){return!0},q=function(){return!1},r=/^([A-Z]|layer[XY]$)/,s={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};b.createProxy=createProxy=function(a){var b,c={originalEvent:a};for(b in a)!r.test(b)&&a[b]!==undefined&&(c[b]=a[b]);return h.each(s,function(b,d){c[b]=function(){return this[d]=p,a[b].apply(a,arguments)},c[d]=q}),c},b.Event=Event=function(a,b){typeof a!="string"&&(b=a,a=b.type);var c=document.createEvent(f[a]||"Events"),d=!0;if(b)for(var e in b)e=="bubbles"?d=!!b[e]:c[e]=b[e];return c.initEvent(a,d,!0,null,null,null,null,null,null,null,null,null,null,null,null),c.isDefaultPrevented=function(){return this.defaultPrevented},c}}),
define("lib/layout",["require","exports","module","underscore","$","lib/backbone","lib/css","lib/helpers/title-helper","lib/lingua","lib/deferred-loader","lib/mixins/layouts/performance-measuring","lib/template"],function(a,b,c){var d,e=a("underscore"),f=a("$"),g=a("lib/backbone"),h=a("lib/css"),i=a("lib/helpers/title-helper"),j=a("lib/lingua"),k=a("lib/deferred-loader"),l=a("lib/mixins/layouts/performance-measuring"),m=a("lib/template"),n,o,p;n="l-footer",o="views/footer/footer",p=j.t("Enjoy the full SoundCloud experience with our app.",null,"Default page title"),d=c.exports=g.View.extend({css:null,template:null,views:null,_currentViews:null,_viewPaths:null,slots:null,includeFooter:".l-main",footerClassName:"",getPageUrn:function(){return""},initialize:function(){this.views={},this._currentViews={}},setArgs:function(a){this.args=a||{}},setup:function(){var a=f.Deferred();return e.defer(a.resolve),a},dispose:function(){e.invoke(this._currentViews,"_dispose"),e.invoke(this.views,"_dispose"),this.$el.remove(),delete this.slots,delete this.views,delete this._viewPaths,delete this._currentViews},render:function(){var a,b;return this.includeFooter&&(a=this.views[n]),this.css&&h.insert(this.css),this.el.innerHTML===""&&(m.render(this.template,{},this.el),this.slots={},e.each(this.views,function(a,b){this.slots[b]=this.$("."+b)[0]},this)),e.each(this.views,function(a,b){this._currentViews[b]!==a&&(this._currentViews[b]&&this._currentViews[b]._dispose(),a.render(),b!==n&&this.slots[b].appendChild(a.el),this._currentViews[b]=a)},this),b=this.$(this.includeFooter)[0],b&&a&&(this.footerClassName&&(a.el.className+=" "+this.footerClassName),b.appendChild(a.el)),this},setViews:function(a){this.includeFooter&&(a[n]=[o,{upsellText:this.getUpsellText()}]);var b=Object.keys(a),c=e.pluck(a,0),d=f.Deferred();return k.load(c).done(function(){this._viewPaths={},e.each(arguments,function(d,e){var f=b[e],g=a[f][1];if(!this._currentViews[f]||!this._currentViews[f].isEquivalentTo(d,g))this.views[f]=new d(g);this._viewPaths[f]=c[e]},this)}.bind(this)).done(d.resolve).fail(d.reject),d},getChangeEventData:function(a){var b={};return e.each(this._viewPaths,function(a,c){b[a]=this.views[c].constructorArguments},this),{layout:this,layoutName:a,views:b,args:this.args}},setTitle:function(a){i.set(a)},getUpsellText:function(){return p},t:j.t,tp:j.tp}),l.applyTo(d.prototype),i.initialize()}),
define("lib/layouts/fullheight.css",["require","exports","module","dpi"],function(a,b,c,d){var e=c.exports=document.createElement("style"),f=d(".l-fullheight{height:100%;background:#000}.l-fullheight>.l-main{height:100%}");e.styleSheet?e.styleSheet.cssText=f:e.appendChild(document.createTextNode(f)),f=null}),
define("lib/layouts/fullheight.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<div class="l-fullheight"> <div class="l-main"> </div> <div class="l-footnote"> </div>\n</div>\n'})}),
define("lib/views/loading.css",["require","exports","module","dpi"],function(a,b,c,d){var e=c.exports=document.createElement("style"),f=d(".loadingThrobber{background:transparent url(https://m.soundcloud.com/assets/images/ldpi/loader-81295ad2.gif) 50% 50% no-repeat;background-size:32px 32px;clear:both;text-align:center;height:40px;width:100%;padding:100px}.loadingThrobber.small{height:20px;background-size:16px}.loadingThrobber.fullscreen{top:44px;left:0;right:0;bottom:0;position:fixed;background-color:#f2f2f2;height:100%}");e.styleSheet?e.styleSheet.cssText=f:e.appendChild(document.createTextNode(f)),f=null}),
define("lib/event-bubble",["require","exports","module"],function(a,b,c){var d;d=c.exports=Class.extend({_propagate:!0,data:null,initialize:function(a){this.data=a||{}},stopPropagation:function(){this._propagate=!1},isPropagationStopped:function(){return!this._propagate}})}),
define("lib/views/mixins/stateful",["require","exports","module","underscore","lib/mixin"],function(a,b,c){var d,e=a("underscore"),f=a("lib/mixin");d=c.exports=new f({states:null,_states:null,toggleState:function(a,b){var c,d;return this.disposed?this:(this.states||(this.states={}),this.states[a]||(this.states[a]=a),this._states=this._states||{},this._states[a]=this._states[a]||!1,b=typeof b!="undefined"?!!b:!this._states[a],this._states[a]===b?this:(this._states[a]=b,c=this.states[a],typeof c=="string"?(d=c,this.$el[b?"addClass":"removeClass"](d)):e.isFunction(c)?c.call(this,b):c&&c[b?"setup":"teardown"].call(this),this.trigger("state:"+a,b),this))},getState:function(a){return!!this._states&&!!this._states[a]}})}),
define("lib/template",["require","exports","module","underscore","vendor/handlebars-runtime","lib/subview-plugin","lib/template-helpers"],function(a,b,c){var d,e=a("underscore"),f=a("vendor/handlebars-runtime"),g=a("lib/subview-plugin"),h=a("lib/template-helpers");e.each(h,function(a,b){f.registerHelper(b,a)}),d=c.exports={render:function(a,b,c){var d=a(b||{});c&&(c.innerHTML=d)},subviews:function(a){g.replacePlaceholders(a)}}}),
define("dpi",["require","exports","module","lib/helpers/client-environment-helper"],function(a,b,c){var d,e=a("lib/helpers/client-environment-helper"),f="/"+e.device.dpi+"/";d=c.exports=function(a){return a.replace(/\/ldpi\//g,f)}}),
define("vendor/handlebars-runtime",["require","exports","module"],function(a,b,c){var d=function(){var a=function(){function b(a){this.string=a}"use strict";var a;return b.prototype.toString=function(){return""+this.string},a=b,a}(),b=function(a){function g(a){return d[a]||"&amp;"}function h(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}function l(a){return a instanceof c?a.toString():!a&&a!==0?"":(a=""+a,f.test(a)?a.replace(e,g):a)}function m(a){return!a&&a!==0?!0:k(a)&&a.length===0?!0:!1}"use strict";var b={},c=a,d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},e=/[&<>"'`]/g,f=/[&<>"'`]/;b.extend=h;var i=Object.prototype.toString;b.toString=i;var j=function(a){return typeof a=="function"};j(/x/)&&(j=function(a){return typeof a=="function"&&i.call(a)==="[object Function]"});var j;b.isFunction=j;var k=Array.isArray||function(a){return a&&typeof a=="object"?i.call(a)==="[object Array]":!1};return b.isArray=k,b.escapeExpression=l,b.isEmpty=m,b}(a),c=function(){function c(a,c){var d;c&&c.firstLine&&(d=c.firstLine,a+=" - "+d+":"+c.firstColumn);var e=Error.prototype.constructor.call(this,a);for(var f=0;f<b.length;f++)this[b[f]]=e[b[f]];d&&(this.lineNumber=d,this.column=c.firstColumn)}"use strict";var a,b=["description","fileName","lineNumber","message","name","number","stack"];return c.prototype=new Error,a=c,a}(),d=function(a,b){function m(a,b){this.helpers=a||{},this.partials=b||{},n(this)}function n(a){a.registerHelper("helperMissing",function(a){if(arguments.length===2)return undefined;throw new e("Missing helper: '"+a+"'")}),a.registerHelper("blockHelperMissing",function(b,c){var d=c.inverse||function(){},e=c.fn;return j(b)&&(b=b.call(this)),b===!0?e(this):b===!1||b==null?d(this):i(b)?b.length>0?a.helpers.each(b,c):d(this):e(b)}),a.registerHelper("each",function(a,b){var c=b.fn,d=b.inverse,e=0,f="",g;j(a)&&(a=a.call(this)),b.data&&(g=q(b.data));if(a&&typeof a=="object")if(i(a))for(var h=a.length;e<h;e++)g&&(g.index=e,g.first=e===0,g.last=e===a.length-1),f+=c(a[e],{data:g});else for(var k in a)a.hasOwnProperty(k)&&(g&&(g.key=k,g.index=e,g.first=e===0),f+=c(a[k],{data:g}),e++);return e===0&&(f=d(this)),f}),a.registerHelper("if",function(a,b){return j(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||d.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})}),a.registerHelper("with",function(a,b){j(a)&&(a=a.call(this));if(!d.isEmpty(a))return b.fn(a)}),a.registerHelper("log",function(b,c){var d=c.data&&c.data.level!=null?parseInt(c.data.level,10):1;a.log(d,b)})}function p(a,b){o.log(a,b)}"use strict";var c={},d=a,e=b,f="1.3.0";c.VERSION=f;var g=4;c.COMPILER_REVISION=g;var h={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};c.REVISION_CHANGES=h;var i=d.isArray,j=d.isFunction,k=d.toString,l="[object Object]";c.HandlebarsEnvironment=m,m.prototype={constructor:m,logger:o,log:p,registerHelper:function(a,b,c){if(k.call(a)===l){if(c||b)throw new e("Arg not supported with multiple helpers");d.extend(this.helpers,a)}else c&&(b.not=c),this.helpers[a]=b},registerPartial:function(a,b){k.call(a)===l?d.extend(this.partials,a):this.partials[a]=b}};var o={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(a,b){if(o.level<=a){var c=o.methodMap[a];typeof console!="undefined"&&console[c]&&console[c].call(console,b)}}};c.logger=o,c.log=p;var q=function(a){var b={};return d.extend(b,a),b};return c.createFrame=q,c}(b,c),e=function(a,b,c){function i(a){var b=a&&a[0]||1,c=g;if(b!==c){if(b<c){var d=h[c],e=h[b];throw new f("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new f("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function j(a,b){if(!b)throw new f("No environment passed to template");var c=function(a,c,d,e,g,h){var i=b.VM.invokePartial.apply(this,arguments);if(i!=null)return i;if(b.compile){var j={helpers:e,partials:g,data:h};return g[c]=b.compile(a,{data:h!==undefined},b),g[c](d,j)}throw new f("The partial "+c+" could not be compiled when running in runtime-only mode")},d={escapeExpression:e.escapeExpression,invokePartial:c,programs:[],program:function(a,b,c){var d=this.programs[a];return c?d=l(a,b,c):d||(d=this.programs[a]=l(a,b)),d},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c={},e.extend(c,b),e.extend(c,a)),c},programWithDepth:b.VM.programWithDepth,noop:b.VM.noop,compilerInfo:null};return function(c,e){e=e||{};var f=e.partial?e:b,g,h;e.partial||(g=e.helpers,h=e.partials);var i=a.call(d,f,c,g,h,e.data);return e.partial||b.VM.checkRevision(d.compilerInfo),i}}function k(a,b,c){var d=Array.prototype.slice.call(arguments,3),e=function(a,e){return e=e||{},b.apply(this,[a,e.data||c].concat(d))};return e.program=a,e.depth=d.length,e}function l(a,b,c){var d=function(a,d){return d=d||{},b(a,d.data||c)};return d.program=a,d.depth=0,d}function m(a,b,c,d,e,g){var h={partial:!0,helpers:d,partials:e,data:g};if(a===undefined)throw new f("The partial "+b+" could not be found");if(a instanceof Function)return a(c,h)}function n(){return""}"use strict";var d={},e=a,f=b,g=c.COMPILER_REVISION,h=c.REVISION_CHANGES;return d.checkRevision=i,d.template=j,d.programWithDepth=k,d.program=l,d.invokePartial=m,d.noop=n,d}(b,c,d),f=function(a,b,c,d,e){"use strict";var f,g=a,h=b,i=c,j=d,k=e,l=function(){var a=new g.HandlebarsEnvironment;return j.extend(a,g),a.SafeString=h,a.Exception=i,a.Utils=j,a.VM=k,a.template=function(b){return k.template(b,a)},a},m=l();return m.create=l,f=m,f}(d,a,c,b,e);return f}();c.exports=d}),
define("views/header/header",["require","exports","module","lib/tracking/tracking-bus","lib/view","views/header/header.css","views/header/header.tmpl"],function(a,b,c){function g(){var a=this.subviews.searchBox;a&&a.toggleState("open")}function h(){e.action("navigate","home")}var d,e=a("lib/tracking/tracking-bus"),f=a("lib/view");d=c.exports=f.extend({tagName:"header",className:"header sc-selection-disabled",attributes:{id:"header",role:"banner"},events:{"click .header__logo":h},bubbleEvents:{"searchButton:click":g},css:a("views/header/header.css"),template:a("views/header/header.tmpl"),renderDecorate:function(){}})}),
define("views/banner/upsell",["require","exports","module","underscore","lib/helpers/client-environment-helper","lib/event-bus","lib/helpers/firefoxos-helper","lib/native-links","lib/persistent-store","lib/tracking/tracking-bus","lib/views/mixins/update-on-layout-change","lib/view","views/banner/upsell.css","views/banner/upsell.tmpl"],function(a,b,c){function p(a){k.action("submit","download_app_button:download"),f.firefoxOS?(a.originalEvent.preventDefault(),h.installApp.call(this,q.bind(this))):r()&&q.call(this)}function q(){this.toggleState("slide",!0)}function r(){return!i.useNativeDeeplinks()&&(!f.hasNativeApp||!!n.get("disabled"))}var d,e=a("underscore"),f=a("lib/helpers/client-environment-helper").device,g=a("lib/event-bus"),h=a("lib/helpers/firefoxos-helper"),i=a("lib/native-links"),j=a("lib/persistent-store"),k=a("lib/tracking/tracking-bus"),l=a("lib/views/mixins/update-on-layout-change"),m=a("lib/view"),n=new j("upsell-banner"),o=200;d=c.exports=m.extend(l,{className:"upsellBanner",css:a("views/banner/upsell.css"),template:a("views/banner/upsell.tmpl"),events:{"click .upsellBanner__button":p,"click .upsellBanner__close":q},element2selector:{"upsell-button":".upsellBanner__button"},states:{hide:function(a){this.$el.toggleClass("sc-hidden",a),a&&g.trigger("upsell:hide")},slide:function(){n.set("disabled",!0),this.$el.addClass("slideOut"),this.addDeferred(e.delay(function(){this.toggleState("hide",!0)}.bind(this),o)),g.trigger("upsell:slide")}},setup:function(){this.toggleState("hide",r()),f.firefoxOS&&h.isAppInstalled().fail(this.toggleState.bind(this,"hide",!1))},renderDecorate:function(){i.useNativeDeeplinks()||(this.getElement("upsell-button")[0].target="_blank")},getTemplateData:function(a,b){var c,d;return b&&i.useNativeDeeplinks()?f.android?(c=i.getAndroidDeepLink(b),d=this.t("Listen on our free app",null,"Upsell text when viewed on android device")):(c=i.getIOSDeepLink(b),d=this.t("Listen on SoundCloud iOS",null,"Upsell text when viewed on ios device")):(c=i.getUpsellLink(),d=this.t("Download our free app",null,"Upsell text when viewed on non-ios/android devices")),a.url=c,a.text=d,a}})}),
define("views/play-controls/play-controls",["require","exports","module","lib/event-bus","lib/play-manager","lib/view","views/play-controls/play-controls.css","views/play-controls/play-controls.tmpl"],function(a,b,c){function h(){f.toggleCurrent({userInitiated:!0})}function i(a){j.call(this,a.sound)}function j(a){this.toggleState("playing",a.isPlaying());if(this.currentSound===a)return;this.currentSound=a,this.rerender()}var d,e=a("lib/event-bus"),f=a("lib/play-manager"),g=a("lib/view");d=c.exports=g.extend({className:"playControls",css:a("views/play-controls/play-controls.css"),template:a("views/play-controls/play-controls.tmpl"),states:{playing:"playing"},setup:function(){this.listenTo(e,"audio:play audio:pause",i)},events:{"click .playControls__playPause":h},currentSound:null,getTemplateData:function(){return{sound:this.currentSound&&this.currentSound.toJSON()}}})}),
define("lib/single",["require","exports","module","$","underscore","backbone","lib/gc-store"],function(a,b,c){var d=a("$"),e=a("underscore"),f=a("backbone"),g=a("lib/gc-store"),h=d.noop,i=0,j=6e4,k;c.exports={applyTo:function l(a,b){b=e.extend({neverRelease:!1,cleanupInstantly:!1,hashFn:function(){return null},prepareArgs:function(){return arguments},prepareInstance:function(){return this},getIncrementValue:function(){return 1},onHold:h,onRelease:h,onCleanup:null,GC_INTERVAL:j},b,a),delete b.prototype;var c,d=a.extend||f.Model.extend,m=b.neverRelease,n,o,p,q,r,s;return c=new g({autoCleanup:b.cleanupInstantly,onCleanup:b.onCleanup,onIncrement:b.onHold,onDecrement:b.onRelease}),m?p=q=r=h:(r=function(){c.cleanup(),o=c.length?setTimeout(r,b.GC_INTERVAL):null},p=function(a){c.increment(this.resource_id,a)},q=function(a){c.decrement(this.resource_id,a)}),s={hold:p,release:q,_usageCount:function(){return c.countFor(this.resource_id)},constructor:function(){var d=n.prepareArgs.apply(this,arguments),e=n.hashFn.apply(this,d)||"f-"+ ++i,f=n.neverRelease?1:n.getIncrementValue.apply(null,d),g=c.get(e);if(g)return this.constructor.neverRelease||g.hold(f),n.prepareInstance.apply(g,d),g;g=this,!o&&!n.cleanupInstantly&&(o=setTimeout(r,b.GC_INTERVAL)),c.set(e,g),g.constructor.neverRelease||g.hold(f-1),g.resource_id=e,k(a).apply(g,d),n.prepareInstance.apply(g,d)}},n=d.call(a,s,b),e.extend(n,{__constructor__:k(a),reset:function(){c.reset(),o&&(clearTimeout(o),o=null)},extend:function(b){var c,f;return b=b||{},e.isArray(b)&&(b=e.extend.apply(null,[{}].concat(b))),b.hasOwnProperty("constructor")||(b.constructor=k(a)),c=d.apply(n,arguments),c.extend=d,f=l(c,n),f.__super__&&(f.__super__=f.__super__.constructor.__super__),f},instances:function(){return c.add=function(a){var b=n.hashFn(a.attributes);a.resource_id=b,b&&this.set(b,a)},c}(),getNewInstance:function(){function d(){return k(a).apply(this,b)}var b=arguments,c;return d.prototype=n.prototype,c=new d,c}})}},k=function(a){return a.__constructor__||a}}),
define("models/audible-interface",["require","exports","module","lib/mixins/audio-source","lib/helpers/datetime-helper","lib/model","lib/play-manager"],function(a,b,c){var d,e=a("lib/mixins/audio-source"),f=a("lib/helpers/datetime-helper"),g=a("lib/model"),h=a("lib/play-manager");d=c.exports=g.extend(e,{setup:function(){this.listenTo(this,"destroy",this.pause)},getSourceInfo:function(){return{type:"single",resourceId:this.resource_id,resourceType:this.resource_type}},getSounds:function(){throw new Error("AudibleInterface::getSounds() method is not implemented.")},initAudio:function(){var a=this.getCurrentSound();a&&a.audio.initAudio()},isNowPlaying:function(){return h.getCurrentSound()===this},isPrivate:function(){return this.get("sharing")==="private"},isPublic:function(){return!this.isPrivate()},toggle:function(a){this[this.isPlaying()?"pause":"play"](a)},isPaused:function(){return!this.isPlaying()},seekRelative:function(a){this.seek(this.currentTime()+a)},duration:function(){return this.get("duration")},progress:function(){return this.currentTime()/this.duration()},timecode:function(){return f.timecode(this.currentTime())}})}),
define("lib/mobi-audio",["require","exports","module","underscore","lib/audiomanager","lib/integrations/promoted","lib/event-bus","vendor/event-logger/event-logger","vendor/scaudio/scaudio","lib/tracking/tracking-bus"],function(a,b,c){function n(a,b,c){var d=o(b),e;d&&(e={sound:a},a.trigger(d,e),this.triggerGlobalEvents&&h.trigger("audio:"+d,e),p(d,a,c));switch(b){case m.STREAMS:case m.NO_STREAMS:a.set("playable",!!this.streamInfo);break;case m.REGISTERED:g.trackEvent("play","context"),a.set("playback_count",a.get("playback_count")+1)}}function o(a){var b;switch(a){case m.PLAY:b="play-intent";break;case m.PLAY_START:b="play";break;case m.PAUSE:b="pause";break;case m.FINISH:b="finish";break;case m.SEEKED:b="seeked";break;case m.TIME:b="position"}return b}function p(a,b,c){if(l.indexOf(a)===-1)return;c=c||{};var d=b.id,e=b.duration()/1e3,f=c.userInitiated?"manual":"auto",g=b.getSourceInfo().type;k.audio(a,d,e,f,g)}var d,e=a("underscore"),f=a("lib/audiomanager"),g=a("lib/integrations/promoted"),h=a("lib/event-bus"),i=a("vendor/event-logger/event-logger"),j=a("vendor/scaudio/scaudio"),k=a("lib/tracking/tracking-bus"),l=["play","pause","finish"],m=j.Events;d=c.exports=j.extend({constructor:function(a,b){e.isUndefined(b)&&(b=!1),this.triggerGlobalEvents=!b;var c={soundId:a.resource_id,duration:a.duration.bind(a),registerEndpoint:a.registerUrl.bind(a),streamUrlsEndpoint:a.streamsUrl.bind(a),protocols:[j.Protocols.HTTP],asyncFetch:!1,debug:!1};j.prototype.constructor.call(this,f,c),this.on("all",n.bind(this,a),this)},logAudioPerformance:function(a){i.audioPerformance(a)}})}),
define("lib/mixins/models/data-dns-prefetcher",["require","exports","module","underscore","lib/helpers/dns-helper","lib/mixin"],function(a,b,c){var d,e=a("underscore"),f=a("lib/helpers/dns-helper"),g=a("lib/mixin");d=c.exports=new g({before:{parse:function(a){f.lookup(e.compact(e.flatten([a.avatar_url,a.artwork_url,a.waveform_url,e.values(a.streams)])))}}})}),
define("type",["require","exports","module"],function(a,b,c){var d=Object.prototype.toString;c.exports=function(a){switch(d.call(a)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array"}return a===null?"null":a===undefined?"undefined":a===Object(a)?"object":typeof a}}),
define("indexof",["require","exports","module"],function(a,b,c){var d=[].indexOf;c.exports=function(a,b){if(d)return a.indexOf(b);for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}}),
define("lib/helpers/title-helper",["require","exports","module","lib/event-bus","lib/play-manager"],function(a,b,c){function l(a){a=a.sound||a,a.isPaused()&&j()}function m(a){i(a.sound||a)}var d,e=a("lib/event-bus"),f=a("lib/play-manager"),g="SoundCloud - Hear the worldâ€™s sounds",h,i,j,k=!1;d=c.exports={initialize:function(){k||(k=!0,e.on("audio:play",m).on("audio:pause",l))},deinitialize:function(){k&&(k=!1,e.off("audio:play",m).off("audio:pause",l))},set:function(a){h=a;var b=f.getCurrentSound(),c=!b||!b.isPlaying();c&&j()},update:function(){var a=f.getCurrentSound();a&&a.isPlaying()&&i(a)},_setTitle:function(a){document.title=a}},j=function(){d._setTitle((h?h+" on ":"")+g)},i=function(a){var b=a.getCurrentSound();b.has("title")&&b.has("user")?d._setTitle(["â–¶",b.get("title"),"by",b.get("user").username].join(" ")):b.fetch().done(function(){d._setTitle(["â–¶",b.get("title"),"by",b.get("user").username].join(" "))})}}),
define("lib/mixins/layouts/performance-measuring",["require","exports","module","lib/tracking/tracking-bus","lib/mixin"],function(a,b,c){function l(a,b,c){function f(){clearTimeout(e),clearTimeout(d)}function h(){a()&&(f(),c())}var d=setTimeout(f,b),e=setInterval(h,g);h()}var d,e=a("lib/tracking/tracking-bus"),f=a("lib/mixin"),g=50,h=15e3,i=window.performance&&window.performance.timing,j="fetchStart",k=!0;d=c.exports=i?new f({defaults:{performanceSelector:null},after:{render:function(){var a,b,c;if(!k)return;k=!1;if(a=this.performanceSelector)b=function(){return this.$(a).length}.bind(this),c=function(){var a=Date.now()-i[j];e.appLoad(a)},l(b,h,c)}}}):new f({})}),
define("views/footer/footer",["require","exports","module","lib/helpers/client-environment-helper","lib/event-bus","lib/helpers/firefoxos-helper","lib/view","views/footer/footer.tmpl","views/footer/footer.css"],function(a,b,c){var d,e=a("lib/helpers/client-environment-helper").device,f=a("lib/event-bus"),g=a("lib/helpers/firefoxos-helper"),h=a("lib/view");d=c.exports=h.extend({className:"footer",template:a("views/footer/footer.tmpl"),css:a("views/footer/footer.css"),defaults:{upsellText:""},states:{show:"show"},setup:function(){this.listenTo(f,"layout:change",this.onLayoutChange),e.firefoxOS&&(this._upsellFirefoxOS=!1,g.isAppInstalled().fail(function(){this._upsellFirefoxOS=!0,this.rerender()}.bind(this)))},dispose:function(){this.stopListening(f,"layout:change",this.onLayoutChange)},onLayoutChange:function(){this.toggleState("show")},getTemplateData:function(a){return a.shouldUpsell=e.hasNativeApp||this._upsellFirefoxOS,a}})}),
define("lib/subview-plugin",["require","exports","module","underscore","vendor/handlebars-runtime"],function(a,b,c){function h(b,c){var d=b.getAttribute("data-id"),e=f[d],g,h,i;e.__path?(h=a(e.__path),delete e.__path):(h=e.__class,delete e.__class),delete f[d],e.key&&(i=e.key,delete e.key),g=c.addSubview(new h(e),i),g.render(),b.parentNode.replaceChild(g.el,b)}function i(b,c){var h,i;return typeof b=="string"?(c.hash.__path=b,i=a(b)):(c.hash.__class=b,i=b),c.hash.args&&(d.isFunction(c.hash.args)&&(c.hash.args=c.hash.args(this)),c.hash=d.extend({},c.hash.args,c.hash)),delete c.hash.args,c.fn&&(c.hash.blockContent=new e.SafeString(c.fn(this))),c.hash.className&&(c.hash.className=[i.prototype.className,c.hash.className].filter(Boolean).join(" ")),h=g++,f[h]=c.hash,'<view data-id="'+h+'"></view>'}function j(a){a.$("view").each(function(){h(this,a)})}var d=a("underscore"),e=a("vendor/handlebars-runtime"),f={},g=0;b.handlebarHelper=i,b.replacePlaceholders=j}),
define("lib/template-helpers",["require","exports","module","underscore","lib/helpers/a11y-helper","lib/helpers/count-helper","vendor/handlebars-runtime","lib/helpers/i18n-helper","lib/helpers/image-helper","lib/lingua","router","lib/subview-plugin"],function(a,b,c){function n(a,b,c,d){return new h.SafeString(k.tp(b,c,a,d.hash,d.hash._comment))}function o(a,b){return new h.SafeString(k.tp(i.cleanBlockText(b.fn()),i.cleanBlockText(b.inverse()),a,b.hash,b.hash._comment))}function p(a,b){return new h.SafeString(k.t(a,b.hash,b.hash._comment))}function q(a){return new h.SafeString(k.t(i.cleanBlockText(a.fn()),a.hash,a.hash._comment))}var d,e=a("underscore"),f=a("lib/helpers/a11y-helper"),g=a("lib/helpers/count-helper"),h=a("vendor/handlebars-runtime"),i=a("lib/helpers/i18n-helper"),j=a("lib/helpers/image-helper"),k=a("lib/lingua"),l=a("router"),m=a("lib/subview-plugin");d=c.exports={$a11y:function(a){return new h.SafeString(f.getAccessibleMarkup(a.hash))},$count:function(a,b){return g.render(a,b.hash)},$debug:function(){return""},$view:function(){return new h.SafeString(m.handlebarHelper.apply(this,arguments))},$image:function(a,b){return new h.SafeString(j.markup(a,b.hash))},$route:function(){var a=e.toArray(arguments).slice(0,-1);return l.getRoute.apply(l,a)},$t:function(){var a=arguments.length;if(a===2)return p.apply(this,arguments);if(a===1)return q.apply(this,arguments);throw new Error("Invalid signature to t helper, expected 1 or 2 arguments, got "+a)},$tp:function(){var a=arguments.length;if(a===4)return n.apply(null,arguments);if(a===2)return o.apply(null,arguments);throw new Error("Invalid signature to tp helper, expected 4 or 2 arguments, got: "+a)}}}),
define("views/header/header.css",["require","exports","module","dpi"],function(a,b,c,d){var e=c.exports=document.createElement("style"),f=d(".header{height:44px;box-shadow:0 0 2px 0 rgba(0,0,0,.5);background:#fff}.header__logo{background:url(https://m.soundcloud.com/assets/images/ldpi/logo-881c7ae2.png) 0 50% no-repeat;background-size:128px 16px;width:128px;height:44px;margin:0 auto;display:block}");e.styleSheet?e.styleSheet.cssText=f:e.appendChild(document.createTextNode(f)),f=null}),
define("views/header/header.tmpl",["vendor/handlebars-runtime","views/header/search-button","views/search/search-box"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f="",g=this.escapeExpression;return f+='<a class="header__logo" href="'+g(c.$route.call(b,"root",{hash:{},data:e}))+'"> '+g(c.$a11y.call(b,{hash:{screenreader:c.$t.call(b,"SoundCloud homepage",{hash:{},data:e})},data:e}))+"\n</a> "+g(c.$view.call(b,"views/header/search-button",{hash:{key:"searchButton"},data:e}))+"\n"+g(c.$view.call(b,"views/search/search-box",{hash:{key:"searchBox"},data:e}))+"\n",f})}),
define("lib/helpers/firefoxos-helper",["require","exports","module","$"],function(a,b,c){var d,e=a("$"),f="https://m.soundcloud.com/manifest.webapp";d=c.exports={isAppInstalled:function(){var a=new e.Deferred,b=navigator.mozApps.checkInstalled(f);return b.onsuccess=function(){b.result?a.resolve(!0):a.reject(!1)},a},installApp:function(a){navigator.mozApps.install(f).onsuccess=a}}}),
define("lib/native-links",["require","exports","module","lib/helpers/client-environment-helper"],function(a,b,c){function q(){return d.iOS||d.android}function r(){return d.iOS?f:d.android?g:s()}function s(){return d.iOS?j:d.android?k:d.blackberry?n:d.amazon?o:d.firefoxOS?p:""}function t(a){var b="";return d.iOS?b=l:d.android&&(b=m),x(b,w(a))}function u(a){return x(i,w(a))}function v(a){return x(h,w(a))}function w(a){var b="",c=a.layout.getPageUrn();switch(d.brand){case"iOS":b=y(c);break;case"android":b=c}return b}function x(a,b){return a&&(a+="?deep_link="+(b||(d.android?"soundcloud://stream":"soundcloud:stream"))),a}function y(a){var b=a.split(":"),c=b[2],d=b[1],e="";switch(d){case"tracks":e="soundcloud://sounds:"+c;break;case"users":e="soundcloud://users:"+c;break;case"playlists":e="soundcloud://sets:"+c}return e}var d=a("lib/helpers/client-environment-helper").device,e="market://details?id=com.soundcloud.android&referrer=utm_source%3Dsoundcloud%26Dutm_medium%3Dmobileweb",f="https://app.adjust.io/12ozk8?redirect=https%3A%2F%2Fitunes.apple.com%2Fus%2Fapp%2Fsoundcloud-music-audio%2Fid336353151%3Fmt%3D8%26uo%3D4%26at%3D11lPIB",g=e+"%26utm_campaign%3Ddownload_button_header",h="https://app.adjust.io/wua7pf",i="https://app.adjust.io/n8gynn",j="https://app.adjust.io/7rfiwt?redirect=https%3A%2F%2Fitunes.apple.com%2Fus%2Fapp%2Fsoundcloud-music-audio%2Fid336353151%3Fmt%3D8%26uo%3D4%26at%3D11lPIB",k=e+"%26utm_campaign%3Ddownload_button_footer",l="https://app.adjust.io/y4c1r7",m="https://app.adjust.io/padgq5",n="appworld://content/41097895",o="amzn://apps/android?asin=B004HXIZVC",p="https://marketplace.firefox.com/app/soundcloud";c.exports={getStoreLink:s,getStoreDeepLink:t,getUpsellLink:r,getAndroidDeepLink:u,getIOSDeepLink:v,useNativeDeeplinks:q}}),
define("lib/views/mixins/update-on-layout-change",["require","exports","module","config","lib/event-bus","lib/mixin"],function(a,b,c){function h(a){var b=a?"on":"off";f[b]("layout:change",i,this)}function i(){this.rerender()}var d,e=a("config"),f=a("lib/event-bus"),g=a("lib/mixin");d=c.exports=new g({before:{setup:function(){h.call(this,!0)},dispose:function(){h.call(this,!1)}},around:{getTemplateData:function(a,b){var c=e.get("router").getLayoutInfo();return a.call(this,b,c)}}})}),
define("views/banner/upsell.css",["require","exports","module","dpi"],function(a,b,c,d){var e=c.exports=document.createElement("style"),f=d(".upsellBanner{background:#333;height:54px;position:relative;overflow:hidden;-webkit-transition:-webkit-transform .2s linear;transition:transform .2s linear}.upsellBanner.slideOut{-webkit-transform:translate3d(0,-54px,0);transform:translate3d(0,-54px,0)}.upsellBanner__button,.upsellBanner__button:hover,.upsellBanner__button:active,.upsellBanner__button:focus{position:absolute;left:10px;top:10px;font-size:16px;float:left;height:36px;line-height:30px;background-color:#F76700;background-image:-webkit-linear-gradient(#F76700,#FA3219);background-image:linear-gradient(#F76700,#FA3219);border-color:#C53421;text-shadow:none;color:#fff;-webkit-box-shadow:none;box-shadow:none}.upsellBanner__close,.upsellBanner__close:hover,.upsellBanner__close:active,.upsellBanner__close:focus{margin-top:2px;background:url(https://m.soundcloud.com/assets/images/ldpi/interstitial/dismiss_button-9bb8d964.png) 0 0 no-repeat;width:29px;height:29px;background-size:29px 29px;position:absolute;right:10px;top:12px}");e.styleSheet?e.styleSheet.cssText=f:e.appendChild(document.createTextNode(f)),f=null}),
define("views/banner/upsell.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f="",g,h="function",i=this.escapeExpression;return f+='<a href="'+i((g=b&&b.url,typeof g===h?g.apply(b):g))+'" class="upsellBanner__button g-button g-touch-padding">'+i((g=b&&b.text,typeof g===h?g.apply(b):g))+'</a>\n<button class="upsellBanner__close g-button-nostyle g-touch-padding">'+i(c.$a11y.call(b,{hash:{screenreader:c.$t.call(b,"Close banner",{hash:{},data:e})},data:e}))+"</button>\n",f})}),
define("views/play-controls/play-controls.css",["require","exports","module","dpi"],function(a,b,c,d){var e=c.exports=document.createElement("style"),f=d(".playControls{height:54px}.playControls__content{position:relative;padding:7px 10px;overflow:hidden;background:#333}.playControls__nowPlaying{margin:0 45px 0 0;display:block}.playControls__artwork{float:left;margin:0 10px 0 0}.playControls__username,.playControls__title{display:block}.playControls__username{font-size:12px;color:#999;line-height:19px}.playControls__title{font-size:14px;color:#fff;line-height:19px}.playControls__playPause{float:right;height:40px;width:40px;background:rgba(0,0,0,.25) url(https://m.soundcloud.com/assets/images/ldpi/player/mini_play_pause_button-6b8e48e4.png) 1px -38px no-repeat;background-size:100% auto;border:1px solid #fff;border-radius:40px;-webkit-transition:background-color .1s ease-in;transition:background-color .1s ease-in}.playControls.playing .playControls__playPause{background-position:0 0}.playControls__playPause:active{background-color:rgba(0,0,0,.5)}.playControls.playing .playControls__playIndicator{-webkit-transform:translate3d(0,-3px,0);transform:translate3d(0,-3px,0)}");e.styleSheet?e.styleSheet.cssText=f:e.appendChild(document.createTextNode(f)),f=null}),
define("views/play-controls/play-controls.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function k(a,b){var d="",e;return d+='\n<div class="playControls__content g-z-index-overlay"> <a role="button" class="playControls__playPause g-touch-padding sc-selection-disabled">'+h(c.$a11y.call(a,{hash:{screenreader:c.$t.call(a,"Play or pause track",{hash:{_comment:"Help text on a play button"},data:b})},data:b}))+'</a> <a class="playControls__nowPlaying" href="'+h(c.$route.call(a,"listen",a&&a.sound,{hash:{},data:b}))+'"> '+h(c.$image.call(a,a&&a.sound,{hash:{size:40,"class":"playControls__artwork"},data:b}))+' <span class="playControls__username sc-truncate">'+h((e=(e=(e=a&&a.sound,e==null||e===!1?e:e.user),e==null||e===!1?e:e.username),typeof e===i?e.apply(a):e))+'</span> <span class="playControls__title sc-truncate">'+h((e=(e=a&&a.sound,e==null||e===!1?e:e.title),typeof e===i?e.apply(a):e))+'</span> </a>\n</div>\n<div class="playControls__playIndicator g-z-index-banner g-play-indicator"></div>\n',d}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f="",g,h=this.escapeExpression,i="function",j=this;g=c["if"].call(b,b&&b.sound,{hash:{},inverse:j.noop,fn:j.program(1,k,e),data:e});if(g||g===0)f+=g;return f+="\n",f})}),
define("lib/gc-store",["require","exports","module","lib/store","lib/mixins/usage-counting"],function(a,b,c){var d,e=a("lib/store"),f=a("lib/mixins/usage-counting");d=c.exports=e.extend(),f.applyTo(d.prototype)}),
define("lib/helpers/datetime-helper",["require","exports","module","underscore","lib/lingua"],function(a,b,c){var d,e=a("underscore"),f=a("lib/lingua"),g=1e3,h=6e4,i=36e5,j={inWords:!1};d=c.exports={timecode:function(a,b){var c,d;return b=b||{},b=e.defaults(b,j),isNaN(a)?a:(c=[],d={h:Math.floor(a/i),m:Math.floor(a/h%60),s:Math.floor(a/g%60)},b.inWords?(d.h>0&&c.push(f.tp("1 hour","%d hours",d.h)),d.m>0&&c.push(f.tp("1 minute","%d minutes",d.m)),(d.s>0||d.m===0&&d.h===0)&&c.push(f.tp("1 second","%d seconds",d.s)),c.join(" ")):(d.h>0&&c.push(d.h),c.push(d.m<10&&d.h>0?"0"+d.m:d.m,d.s<10?"0"+d.s:d.s),c.join(":")))}}}),
define("lib/audiomanager",["require","exports","module","vendor/audiomanager/audiomanager_mobile"],function(a,b,c){var d,e=a("vendor/audiomanager/audiomanager_mobile");d=c.exports=new e({debug:!1}),d.Errors=e.Errors,d.States=e.States}),
define("lib/integrations/promoted",["require","exports","module","underscore","config","lib/persistent-store","lib/url"],function(a,b,c){function m(a){var b=new Image;b.src=a}var d,e=a("underscore"),f=a("config"),g=a("lib/persistent-store"),h=a("lib/url"),i=new g("promoted-session","session"),j=new g("promoted-persistent"),k={impression:"impression",play:"sound_play",soundClickThrough:"sound_click",userClickThrough:"profile_click"},l={search:"/promoted/search/mobileweb"};d=c.exports={getAdUrl:function(a,b){return h.modify(f.get("promotedContentServer"),{path:l[a],query:e.extend({user_id:j.get("user_id"),session_id:i.get("session_id"),geo_id:i.get("geo_id"),access_token:f.get("promotedContentAccessToken"),user_urn:f.get("me").getUrn()},b)})},trackEvent:function(a,b){d.getTrackingUrls(a,b).forEach(m)},parseResponse:function(a){var b=e.first(a.promoted)||{};return b.session_id&&b.geo_id&&b.user_id?(i.set("session_id",b.session_id),i.set("geo_id",decodeURIComponent(b.geo_id)),j.set("user_id",b.user_id),b):{}},getTrackingUrls:function(a,b){var c=b&&b.tracking&&b.tracking[k[a]]||[];return e.isArray(c)?c:[c]}}}),
define("vendor/scaudio/scaudio",["require","exports","module"],function(a,b,c){(function(a,b){typeof c!="undefined"&&c.exports?c.exports=b():a.SCAudio=b()})(this,function(){var a,b,c;return function(d){function p(a,b){return m.call(a,b)}function q(a,b){var c,d,e,f,g,h,i,j,l,m,n,p=b&&b.split("/"),q=k.map,r=q&&q["*"]||{};if(a&&a.charAt(0)===".")if(b){p=p.slice(0,p.length-1),a=a.split("/"),g=a.length-1,k.nodeIdCompat&&o.test(a[g])&&(a[g]=a[g].replace(o,"")),a=p.concat(a);for(l=0;l<a.length;l+=1){n=a[l];if(n===".")a.splice(l,1),l-=1;else if(n==="..")if(l!==1||a[2]!==".."&&a[0]!=="..")l>0&&(a.splice(l-1,2),l-=2);else break}a=a.join("/")}else a.indexOf("./")===0&&(a=a.substring(2));if((p||r)&&q){c=a.split("/");for(l=c.length;l>0;l-=1){d=c.slice(0,l).join("/");if(p)for(m=p.length;m>0;m-=1){e=q[p.slice(0,m).join("/")];if(e){e=e[d];if(e){f=e,h=l;break}}}if(f)break;!i&&r&&r[d]&&(i=r[d],j=l)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join("/"))}return a}function r(a,b){return function(){return f.apply(d,n.call(arguments,0).concat([a,b]))}}function s(a){return function(b){return q(b,a)}}function t(a){return function(b){i[a]=b}}function u(a){if(p(j,a)){var b=j[a];delete j[a],l[a]=!0,e.apply(d,b)}if(!p(i,a)&&!p(l,a))throw new Error("No "+a);return i[a]}function v(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function w(a){return function(){return k&&k.config&&k.config[a]||{}}}var e,f,g,h,i={},j={},k={},l={},m=Object.prototype.hasOwnProperty,n=[].slice,o=/\.js$/;g=function(a,b){var c,d=v(a),e=d[0];return a=d[1],e&&(e=q(e,b),c=u(e)),e?c&&c.normalize?a=c.normalize(a,s(b)):a=q(a,b):(a=q(a,b),d=v(a),e=d[0],a=d[1],e&&(c=u(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}},h={require:function(a){return r(a)},exports:function(a){var b=i[a];return typeof b!="undefined"?b:i[a]={}},module:function(a){return{id:a,uri:"",exports:i[a],config:w(a)}}},e=function(a,b,c,e){var f,k,m,n,o,q=[],s=typeof c,v;e=e||a;if(s==="undefined"||s==="function"){b=!b.length&&c.length?["require","exports","module"]:b;for(o=0;o<b.length;o+=1){n=g(b[o],e),k=n.f;if(k==="require")q[o]=h.require(a);else if(k==="exports")q[o]=h.exports(a),v=!0;else if(k==="module")f=q[o]=h.module(a);else if(p(i,k)||p(j,k)||p(l,k))q[o]=u(k);else if(n.p)n.p.load(n.n,r(e,!0),t(k),{}),q[o]=i[k];else throw new Error(a+" missing "+k)}m=c?c.apply(i[a],q):undefined;if(a)if(f&&f.exports!==d&&f.exports!==i[a])i[a]=f.exports;else if(m!==d||!v)i[a]=m}else a&&(i[a]=c)},a=b=f=function(a,b,c,i,j){if(typeof a=="string")return h[a]?h[a](b):u(g(a,b).f);if(!a.splice){k=a,k.deps&&f(k.deps,k.callback);if(!b)return;b.splice?(a=b,b=c,c=null):a=d}return b=b||function(){},typeof c=="function"&&(c=i,i=j),i?e(d,a,b,c):setTimeout(function(){e(d,a,b,c)},4),f},f.config=function(a){return f(a)},a._defined=i,c=function(a,b,c){b.splice||(c=b,b=[]),!p(i,a)&&!p(j,a)&&(j[a]=[a,b,c])},c.amd={jQuery:!0}}(),c("../vendor/almond/almond",function(){}),c("browser",["require","exports","module"],function(a,b,c){function f(a){return a.test(window.navigator.userAgent.toLowerCase())}function g(){return!i()&&f(/safari/)}function h(){return g()&&f(/version\/7\.1/)}function i(){return f(/chrome/)}function j(){try{return window.hasOwnProperty("Audio")&&!!(new window.Audio).canPlayType("audio/mpeg")}catch(a){return!1}}function k(){try{var a=g()&&f(/version\/5\.0/),b=window.hasOwnProperty("Audio")&&(!!(new window.Audio).canPlayType('audio/x-mpegURL; codecs="mp3"')||!!(new window.Audio).canPlayType('vnd.apple.mpegURL; codecs="mp3"'));return!a&&b}catch(c){return!1}}function l(){return n(m())>=e}function m(){var a,b,c,d;if(typeof window.ActiveXObject!="undefined")try{d=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"),d&&(a=d.GetVariable("$version"))}catch(e){}else window.navigator&&window.navigator.plugins&&window.navigator.plugins.length>0&&(c="application/x-shockwave-flash",b=window.navigator.mimeTypes,b&&b[c]&&b[c].enabledPlugin&&b[c].enabledPlugin.description&&(a=b[c].enabledPlugin.description));return a}function n(a){if(!a)return 0;var b=a.match(/\d\S+/)[0].replace(/,/g,".").split(".");return parseFloat([b[0],b[1]].join("."))||0}var d,e=9;d=c.exports={isSafari:g,isSafari71:h,isChrome:i,supportsHLSAudio:k,supportsHTML5Audio:j,supportsFlash:l}}),c("utils",["require","exports","module"],function(a,b,c){var d=c.exports={extend:function(a){var b=Array.prototype.slice.call(arguments,1);return b.forEach(function(b){if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}),a},each:function(a,b,c){Object.keys(a).forEach(function(d){b.call(c||null,a[d],d)})},find:function(a,b,c){var d;return a.some(function(a){if(b.call(c,a))return d=a,!0}),d},has:function(a,b){return Object.keys(a).indexOf(b)>-1},inherits:function(a,b){var c=this,e;a&&d.has(a,"constructor")?e=a.constructor:e=function(){return c.apply(this,arguments)},d.extend(e,c,b);var f=function(){this.constructor=e};return f.prototype=c.prototype,e.prototype=new f,a&&d.extend(e.prototype,a),e.__super__=c.prototype,e},without:function(a,b){var c=a.indexOf(b);c>-1&&a.splice(c,1)},result:function(a){var b=a;return d.isFunction(b)&&(b=a()),b},isFunction:function(a){return typeof a=="function"},after:function(a,b){return function(){if(--a<1)return b.apply(this,arguments)}},isNull:function(a){return a===null}}}),c("protocols",["require","exports","module"],function(a,b,c){var d=c.exports={HTTP:"http",RTMP:"rtmp",HLS:"hls"}}),c("stream-urls",["require","exports","module","protocols","utils"],function(a,b,c){function i(a,b){if(!a)return!1;var c=a.issuedAt+j(a.protocol,a.duration);return k(a.protocol)?Date.now()+a.duration-(b||0)<c:Date.now()<c}function j(a,b){var c=k(a);return h+(c?f.result(b):0)}function k(a){return a===e.HTTP||a===e.HLS}function l(a,b){function q(a,b){return Math.abs(b-d)-Math.abs(a-d)}function r(a){return a*-1}var c={},d=b.maxBitrate,e=b.protocols,g=b.extensions,h,i,j,k,l,m,n,o,p;f.each(a,function(a,b){var d=b.split("_"),e=d[0],f=d[1],g=d[2];c[e]=c[e]||{},c[e][f]=c[e][f]||{},c[e][f][g]=a});for(l=0,m=e.length;l<m;++l){k=e[l];for(o=0,p=g.length;o<p;++o){n=g[o];if(c[k]&&c[k][n])return h=Object.keys(c[k][n]).map(Number).sort(r),i=d===Infinity,j=d===-Infinity,i||j?d=h[i?"pop":"shift"]():d=h.sort(q).pop(),{url:c[k][n][d],bitrate:d,protocol:k,extension:n,issuedAt:Date.now(),duration:f.result(b.duration)}}}return null}var d,e=a("protocols"),f=a("utils"),g=.9,h=Math.floor(12e4*g);d=c.exports={choosePreferredStream:l,streamValidForPlayingFrom:i}}),c("events",["require","exports","module"],function(a,b,c){var d=c.exports={CREATED:"created",STATE_CHANGE:"state-change",DESTROYED:"destroyed",PLAY:"play",PLAY_START:"play-start",PLAY_RESUME:"play-resume",METADATA:"metadata",PAUSE:"pause",FINISH:"finish",RESET:"reset",SEEK:"seek",SEEKED:"seeked",GEO_BLOCKED:"geo_blocked",BUFFERRING_START:"buffering_start",BUFFERRING_END:"buffering_end",FLASH_NOT_LOADED:"flash_not_loaded",FLASH_BLOCK:"flash_blocked",FLASH_UNBLOCK:"flash_unblocked",AUDIO_ERROR:"audio_error",TIME:"time",NO_STREAMS:"no_streams",STREAMS:"streams",NO_PROTOCOL:"no_protocol",NO_CONNECTION:"no_connection",REGISTERED:"registered"}}),c("audio-logger",["require","exports","module","events"],function(a,b,c){function f(a){this.listenTime+=a.from-this.currentTime,this.currentTime=a.to}function g(a){this.listenTime+=a.position-this.currentTime,this.currentTime=a.position}function h(a){this.currentTime=a.position}var d,e=a("events");d=c.exports=function(a){this.scAudio=a,this.listenTime=0,this.currentTime=0,this.scAudio.on(e.SEEK,f,this).on(e.PLAY_START,h,this).on(e.PAUSE,g,this)},d.prototype={constructor:d,getListenTime:function(){return this.listenTime+this.scAudio.currentTime()-this.currentTime}}}),c("observable",["require","exports","module"],function(a,b,c){function e(a,b,c,e){if(!c)return!0;if(typeof c=="object")for(var f in c)c.hasOwnProperty(f)&&a[b].apply(a,[f,c[f]].concat(e));else{if(!d.test(c))return!0;var g=c.split(d);for(var h=0,i=g.length;h<i;h++)a[b].apply(a,[g[h]].concat(e))}}function f(a,b){var c,d=-1,e=a.length;switch(b.length){case 0:while(++d<e)c=a[d],c.callback.call(c.ctx);return;case 1:while(++d<e)(c=a[d]).callback.call(c.ctx,b[0]);return;case 2:while(++d<e)(c=a[d]).callback.call(c.ctx,b[0],b[1]);return;case 3:while(++d<e)(c=a[d]).callback.call(c.ctx,b[0],b[1],b[2]);return;default:while(++d<e)(c=a[d]).callback.apply(c.ctx,b)}}var d=/\s+/;c.exports={on:function(a,b,c){if(!e(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},off:function(a,b,c){var d,f,g,h,i,j,k,l;if(!this._events||!e(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;h=a?[a]:Object.keys(this._events);for(i=0,j=h.length;i<j;i++){a=h[i];if(g=this._events[a]){this._events[a]=d=[];if(b||c)for(k=0,l=g.length;k<l;k++)f=g[k],(b&&b!==f.callback&&b!==f.callback._callback||c&&c!==f.context)&&d.push(f);d.length||delete this._events[a]}}return this},trigger:function(a){if(!this._events)return this;var b=Array.prototype.slice.call(arguments,1);if(!e(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&f(c,b),d&&f(d,arguments),this}}}),c("url",["require","exports","module"],function(a,b,c){var d=c.exports={getUrlParams:function(a){var b={},c=a.indexOf("?");return c>-1&&a.substr(c+1).split("&").forEach(function(a){var c=a.split("=");b[c[0]]=c[1]}),b},getUrlHost:function(a){var b=a.split("//"),c;return b[0]===a?c=b[0].split("/")[0]:c=b[1]?b[1].split("/")[0]:"",c}}}),c("audio-perf-monitor",["require","exports","module","events","observable","url","utils"],function(a,b,c){function i(a){return"AudioPerfMonitor ("+this.scAudio.getId()+") : "+a}function j(){if(!this.scAudio.controller){this.printWarning("CanÂ´t initialize when controller is null");return}if(this.controller){this.printWarning(i.call(this,"Setup was called while it was already initialized (returned with a no-op)"));return}this.scAudio.options.debug&&window.console.info(i.call(this,"Initialized for instance %s"),this.scAudio.getId()),this.controller=this.scAudio.controller,this.protocol=this.scAudio.streamInfo.protocol,this.host=g.getUrlHost(this.scAudio.streamInfo.url)}function k(){if(!this.controller){this.printWarning(i.call(this,"Reset was called while it was already de-initialized (returned with a no-op)"));return}this.scAudio.options.debug&&window.console.info(i.call(this,"Reset for instance %s"),this.scAudio.getId()),this.controller=null,this.protocol=null,this.host=null,this.timeToPlayMeasured=!1}function l(a){var b=this.scAudio.getAudioManagerStates();a===b.LOADING?this.timeToPlayMeasured&&s.call(this):h.isNull(this.bufferingStartTime)||t.call(this)}function m(){this.metadataLoadStartTime=Date.now()}function n(){if(h.isNull(this.metadataLoadStartTime)){this.printWarning(i.call(this,"onMetadataEnd was called without onMetadataStart being called before."));return}this.log({type:"metadata",latency:Date.now()-this.metadataLoadStartTime}),this.metadataLoadStartTime=null}function o(){this.playClickTime=Date.now()}function p(){if(this.timeToPlayMeasured)return;if(h.isNull(this.playClickTime)){this.printWarning(i.call(this,"onPlayResume was called without onPlayStart being called before."));return}this.log({type:"play",latency:Date.now()-this.playClickTime}),this.playClickTime=null,this.timeToPlayMeasured=!0}function q(){if(this.scAudio.isPaused())return;this.seekStartTime=Date.now()}function r(){if(this.scAudio.isPaused())return;if(h.isNull(this.seekStartTime)){this.printWarning(i.call(this,"onSeekEnd was called without onSeekStart being called before."));return}this.log({type:"seek",latency:Date.now()-this.seekStartTime}),this.seekStartTime=null}function s(){if(this.bufferingStartTime)return;this.bufferingStartTime=Date.now()}function t(){if(h.isNull(this.bufferingStartTime)){this.printWarning(i.call(this,"onBufferingEnd was called without onBufferingStart being called before."));return}u.call(this),this.bufferingStartTime=null}function u(){h.isNull(this.bufferingStartTime)||(h.isNull(this.bufferingTimeAccumulated)&&(this.bufferingTimeAccumulated=0),this.bufferingTimeAccumulated+=Date.now()-this.bufferingStartTime)}function v(){u.call(this);if(h.isNull(this.bufferingTimeAccumulated))return;this.log({type:"buffer",latency:this.bufferingTimeAccumulated}),this.bufferingStartTime=this.bufferingTimeAccumulated=null}var d,e=a("events"),f=a("observable"),g=a("url"),h=a("utils");d=c.exports=function(a,b){this.scAudio=a,this.logFn=b,this.controller=null,this.reset(),a.on(e.CREATED,j,this).on(e.RESET,k,this).on(e.DESTROYED,k,this).on(e.SEEK,q,this).on(e.SEEKED,r,this).on(e.PLAY,o,this).on(e.PLAY_START,m,this).on(e.PLAY_RESUME,p,this).on(e.PAUSE,v,this).on(e.FINISH,v,this).on(e.STATE_CHANGE,l,this).on(e.METADATA,n,this)},h.extend(d.prototype,f,{constructor:d,log:function(a){if(!this.controller){this.printWarning(i.call(this,"Monitor log was called while controller is null (returned with a no-op)"));return}h.extend(a,{protocol:this.protocol,host:this.host,playertype:this.controller.getType()}),this.scAudio.options.debug&&window.console.info(i.call(this,"%s latency: %d protocol: %s host: %s playertype: %s"),a.type,a.latency,a.protocol,a.host,a.playertype),this.logFn(a)},reset:function(){this.bufferingStartTime=this.bufferingTimeAccumulated=this.playClickTime=this.seekStartTime=this.metadataLoadStartTime=null,this.timeToPlayMeasured=!1},printWarning:function(a){this.scAudio.options.debug&&window.console.warn(a)}})}),c("extensions",["require","exports","module"],function(a,b,c){var d=c.exports={AAC:"aac",MP3:"mp3",OGG:"ogg",OPUS:"opus",WAV:"wav"}}),c("protocol-selector",["require","exports","module","protocols","browser"],function(a,b,c){function i(a){var b=!1;switch(a){case e.RTMP:b=f.supportsFlash();break;case e.HTTP:b=f.supportsHTML5Audio()||f.supportsFlash();break;case e.HLS:b=(g&&f.isSafari()||!g)&&(f.supportsHLSAudio()||h&&f.supportsFlash())}return b}var d,e=a("protocols"),f=a("browser"),g=!0,h=!1;d=c.exports={isProtocolSupported:i}}),c("scaudio",["require","exports","module","browser","utils","stream-urls","audio-logger","audio-perf-monitor","events","extensions","observable","protocols","protocol-selector"],function(a,b,c){function A(a){var b=this.options,c;return c={id:this.getId(),src:a.url,duration:f.result(b.duration),mimeType:a.mimeType,forceSingle:b.useSinglePlayer},o.createAudioPlayer(c)}function B(a,b){var c=b?"on":"off";a[c]("stateChange",S,this)[c]("positionChange",D,this)[c]("loadedmetadata",C,this)}function C(){this.trigger(j.METADATA)}function D(){this._prevPosition!==this.currentTime()&&(this.trigger(j.TIME),this._prevPosition=this.currentTime())}function E(){this._initAudioDefer&&(this._initAudioDefer.reject(),this._initAudioDefer=null,this.streamInfo=null)}function F(){E.call(this),this.controller&&(this._storedPosition=this.currentTime(),this.controller.kill(),this.controller=null,this.trigger(j.RESET))}function G(){this._registerPlays=!0,this.pause(),this.trigger(j.FINISH)}function H(){var a=$.Deferred();return this.streamInfo?a.resolve(this.streamInfo):I.call(this).done(function(b){var c=g.choosePreferredStream(b,this.options);c?a.resolve(c):(this.trigger(j.NO_PROTOCOL),this.options.debug&&window.console.warn(V("SCAudio (%s): Could not match a protocol of given media descriptor to one of the supported protocols ("+this.options.protocols+"), aborting attempt to play."),this.getId()),a.reject())}.bind(this)).fail(function(b){this.options.debug&&window.console.warn(V("Stream request failed with status: %d"),b.status),J.call(this,b),K.call(this,b),a.reject()}.bind(this)),a}function I(){if(this.options.streamUrls&&!this._usedPrefetchUrls){this._usedPrefetchUrls=!0;var a=typeof this.options.streamUrls=="function"?this.options.streamUrls():this.options.streamUrls;return $.Deferred().resolve(a)}return $.ajax({async:this.options.asyncFetch,dataType:"json",timeout:this.options.asyncFetch?t:s,url:f.result(this.options.streamUrlsEndpoint)})}function J(a){var b=a.status>=400&&(a.responseText||"").indexOf("geo_blocked")!==-1;b&&this.trigger(j.GEO_BLOCKED)}function K(a){a.status===0&&this.trigger(j.NO_CONNECTION)}function L(a){return this._initAudioDefer&&this._initAudioDefer.state()==="resolved"&&g.streamValidForPlayingFrom(this.streamInfo,a)}function M(a){a&&!this._bufferingTimeout?this._bufferingTimeout=setTimeout(function(){this._isBuffering=!0,this.trigger(j.BUFFERRING_START)}.bind(this),u):a||(this._bufferingTimeout&&(clearTimeout(this._bufferingTimeout),this._bufferingTimeout=null),this._isBuffering&&(this._isBuffering=!1,this.trigger(j.BUFFERRING_END)))}function N(){this.off(j.TIME,this.seekTimeEventHandler),this.trigger(j.SEEKED),this.seekTimeEventHandler=null}function O(){this._errorRecoveryFlagsResetTimeout=setTimeout(function(){this._errorRecoveryTime=null,this._errorRecoveryCounts=0},y)}function P(){this._errorRecoveryFlagsResetTimeout&&clearTimeout(this._errorRecoveryFlagsResetTimeout)}function Q(){var a,b=Date.now(),c=this.isPlaying(),d=o.Errors,e=function(){P.call(this);if(this._errorRecoveryTime&&this._errorRecoveryTime+w>b&&this._errorRecoveryCounts>x){this.trigger(j.AUDIO_ERROR,this);return}this._errorRecoveryTime=Date.now(),this._errorRecoveryCounts++,F.call(this),c&&this.play({seek:this.currentTime()})};if(!this.controller){this.options.debug&&window.console.error(V("SCAudio: controller is null, aborting error handler ("+this.getId()+")."),this),e.call(this);return}a=this.controller.getErrorID();switch(a){case d.FLASH_PROXY_CANT_LOAD_FLASH:this.trigger(j.FLASH_NOT_LOADED);break;case d.FLASH_PROXY_FLASH_BLOCKED:this.trigger(j.FLASH_BLOCK);break;case d.FLASH_RTMP_CONNECT_FAILED:f.without(this.options.protocols,m.RTMP);case d.FLASH_RTMP_CANNOT_PLAY_STREAM:case d.FLASH_RTMP_CONNECT_CLOSED:case d.HTML5_AUDIO_NETWORK:case d.HTML5_AUDIO_ABORTED:case d.HTML5_AUDIO_DECODE:case d.HTML5_AUDIO_SRC_NOT_SUPPORTED:case d.HTML5_AUDIO_ENDED_EARLY:e.call(this);break;case d.HTML5_AUDIO_OVERRUN:G.call(this);break;default:throw new Error("SCAudio: Unhandled audio error code: "+a)}this.options.debug&&typeof this.controller.getErrorMessage!="undefined"&&window.console.error(V("SCAudio error ("+this.getId+"): "+this.controller.getErrorMessage()),this)}function R(a){this.options.debug&&U.call(this,a);switch(a){case j.PAUSE:this._isPlaying=!1,this._isPlayActionQueued=!1;break;case j.PLAY:this._isPlaying=!1,this._isPlayActionQueued=!0;break;case j.PLAY_START:this._isPlaying=!0,this._isPlayActionQueued=!1,this._registerPlays&&this.registerPlay();break;case j.BUFFERRING_START:case j.SEEK:this._isPlaying&&(this._isPlaying=!1,this._isPlayActionQueued=!0);break;case j.BUFFERRING_END:case j.SEEKED:this._isPlayActionQueued&&(this._isPlaying=!0,this._isPlayActionQueued=!1)}}function S(a){var b=o.States,c=o.Errors;switch(a){case b.IDLE:this._initAudioDefer&&this._initAudioDefer.resolve(),this.controller.getErrorID()===c.FLASH_PROXY_FLASH_BLOCKED&&this.trigger(j.FLASH_UNBLOCK);break;case b.PAUSED:M.call(this,!1),this.seekTimeEventHandler&&this.isPaused()&&N.call(this);break;case b.PLAYING:M.call(this,!1),O.call(this),this.trigger(j.PLAY_RESUME);break;case b.LOADING:case b.SEEKING:M.call(this,!0);break;case b.ENDED:G.call(this);break;case b.ERROR:M.call(this,!1),Q.call(this)}this.trigger(j.STATE_CHANGE,a)}function T(){e.isSafari71()&&(this.options.protocols=[m.HTTP,m.HLS,m.RTMP]),this.options.protocols=this.options.protocols.filter(n.isProtocolSupported)}function U(a){var b=window.console.log,c;a!==j.TIME?(c=[V("SCAudio event ("+this.getId()+"):")],c.push.apply(c,arguments),b.apply(window.console,c),this._loggedTime=!1):this._loggedTime||(b.call(window.console,V("SCAudio time (%s): %d ms"),this.getId(),this.currentTime()),this._loggedTime=!0)}function V(a){return(new Date).toString()+" | "+a}var d,e=a("browser"),f=a("utils"),g=a("stream-urls"),h=a("audio-logger"),i=a("audio-perf-monitor"),j=a("events"),k=a("extensions"),l=a("observable"),m=a("protocols"),n=a("protocol-selector"),o,p={},q={muted:!1,volume:1},r={soundId:p,duration:p,registerEndpoint:p,streamUrlsEndpoint:p,resourceId:!1,debug:!1,asyncFetch:!0,useSinglePlayer:!0,protocols:[m.HLS,m.RTMP,m.HTTP],extensions:[k.MP3],maxBitrate:Infinity},s=6e3,t=6e3,u=400,v=6e4,w=6e3,x=3,y=3e4,z=[];d=c.exports=function(a,b){arguments.length===1?b=a:d.setAudioManager(a);if(!o)throw new Error("SCAudio: AudioManager instance must be set with `SCAudio.setAudioManager()` or passed via the constructor");this.options=f.extend({},r,b);var c=Object.keys(this.options).filter(function(a){return this.options[a]===p},this);if(c.length)throw new Error("SCAudio: pass into constructor the following options: "+c.join(", "));T.call(this),this.controller=null,this.streamInfo=null,this._registerPlays=!0,this._registerCounts=this._errorRecoveryCounts=0,this._isPlayActionQueued=this._usedPrefetchUrls=this._isPlaying=this._isBuffering=!1,this._initAudioDefer=this._expirationTimeout=this._bufferingTimeout=this._errorRecoveryTime=this._errorRecoveryFlagsResetTimeout=this._storedPosition=this._prevPosition=null,b.debug&&(this._loggedTime=!1),this.on("all",R,this),this.audioPerfMonitor=new i(this,this.logAudioPerformance.bind(this)),this.audioLogger=new h(this)},f.extend(d.prototype,l,{constructor:d,initAudio:function(){return this._initAudioDefer||(this._initAudioDefer=$.Deferred(),H.call(this).done(function(a){var b=!0;this.streamInfo&&(b=!1),this.streamInfo=a,b&&this.trigger(j.STREAMS),this.controller=A.call(this,a),B.call(this,this.controller,!0),S.call(this,this.controller.getState())}.bind(this)).fail(function(){this.trigger(j.NO_STREAMS)}.bind(this)),this._initAudioDefer.done(function(){this.trigger(j.CREATED)}.bind(this))),this._initAudioDefer},registerPlay:function(){var a=this.options.soundId,b=!1;return z.indexOf(a)===-1&&(z.push(a),setTimeout(function(){var b=z.indexOf(a);b>-1&&z.splice(b,1)},v),$.ajax({type:"POST",dataType:"json",statusCode:{429:$.noop},url:f.result(this.options.registerEndpoint)}),this._registerCounts++,this._registerPlays=!1,this.trigger(j.REGISTERED),b=!0),b},toggle:function(){this[this.isPaused()?"play":"pause"]()},play:function(a){var b=a&&a.seek!=null?a.seek:this.currentTime();a=f.extend({},a,{position:b}),this.trigger(j.PLAY,a),L.call(this,b)||F.call(this),this.initAudio().done(function(){this._isPlayActionQueued&&(this._storedPosition=null,this.trigger(j.PLAY_START,a),this.controller.play(b))}.bind(this)),M.call(this,!0)},pause:function(a){if(this.isPaused())return;a=f.extend({},a,{position:this.currentTime()}),this.trigger(j.PAUSE,a),this.controller&&this.controller.pause(),M.call(this,!1)},getListenTime:function(){return this.audioLogger?this.audioLogger.getListenTime():0},dispose:function(){this.audioLogger=null,this.audioPerfMonitor=null,this.off(),f.without(z,this.options.soundId),clearTimeout(this._bufferingTimeout),E.call(this),this.controller&&(this.controller.kill(),this.controller=null),delete this.controller,this.trigger(j.DESTROYED)},seek:function(a){if(!this.controller)return;if(a>=f.result(this.options.duration)){G.call(this);return}this.seekTimeEventHandler&&this.off(j.TIME,this.seekTimeEventHandler),this.seekTimeEventHandler=f.after(2,function(){N.call(this)}.bind(this)),this.on(j.TIME,this.seekTimeEventHandler),this.trigger(j.SEEK,{from:this.currentTime(),to:a});if(this.isPlaying()&&!L.call(this,a)){F.call(this),this.play({seek:a});return}this.controller.seek(a)},seekRelative:function(a){this.controller&&this.seek(this.currentTime()+a)},currentTime:function(){return this._storedPosition?this._storedPosition:this.controller?this.controller.getCurrentPosition():0},loadProgress:function(){var a=0;return this.controller&&(a=this.controller.getLoadedPosition()/this.controller.getDuration(),a=a>=.99?1:a),a},buffered:function(){return this.controller&&this.controller.getDuration()||0},isPaused:function(){return!this.isPlaying()},isBuffering:function(){return this._isBuffering},isPlaying:function(){return this._isPlayActionQueued||this._isPlaying},isLoading:function(){return!!this.controller&&this.controller.getState()===o.States.LOADING},toggleMute:function(a){d.toggleMute(a)},isMuted:function(){return d.isMuted()},setVolume:function(a){d.setVolume(a)},getVolume:function(){return d.getVolume()},logAudioPerformance:function(){},getAudioManagerStates:function(){return o.States},getId:function(){return this.options.resourceId||this.options.soundId}}),f.extend(d,{extend:f.inherits,getSettings:function(){return q},setSettings:function(a){f.extend(q,a)},setAudioManager:function(a){o=a,a&&(d.AudioManagerStates=a.States,this.toggleMute(q.muted),this.setVolume(q.volume))},toggleMute:function(a){q.muted=a===undefined?!q.muted:!!a,o&&o.setVolume(q.muted?0:1)},isMuted:function(){return q.muted},setVolume:function(a){q.volume=a===undefined?1:a,o&&o.setVolume(q.volume)},getVolume:function(){return q.volume},Extensions:k,Protocols:m,Events:j,BUFFER_DELAY:u,PLAY_REGISTRATION_TIMEOUT:v})}),b("scaudio")})}),
define("lib/helpers/dns-helper",["require","exports","module","lib/url"],function(a,b,c){var d,e=a("lib/url"),f=[];d=c.exports={lookup:function(a){var b=document.createDocumentFragment(),c;a=typeof a=="string"?[a]:a,a.length&&(a.forEach(function(a){c=e.parse(a).host;if(c&&f.indexOf(c)===-1){f.push(c);var d=document.createElement("link");d.rel="dns-prefetch",d.href="//"+c,b.appendChild(d)}}),b.childNodes.length&&document.head.appendChild(b))}}}),
define("views/footer/footer.tmpl",["vendor/handlebars-runtime","views/app-buttons/app-buttons"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function k(a,b){var d="",e;return d+=' <div class="footer__appButtonContainer"> <p class="footer__appButtonText"> '+i((e=(e=a&&a._options,e==null||e===!1?e:e.upsellText),typeof e===h?e.apply(a):e))+" </p> "+i(c.$view.call(a,"views/app-buttons/app-buttons",{hash:{},data:b}))+" </div>\n",d}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f="",g,h="function",i=this.escapeExpression,j=this;g=c["if"].call(b,b&&b.shouldUpsell,{hash:{},inverse:j.noop,fn:j.program(1,k,e),data:e});if(g||g===0)f+=g;return f+=' <div class="footer__links g-font-12"> <a href="'+i(c.$route.call(b,"pages","terms-of-use",{hash:{},data:e}))+'" title="Terms of use">'+i(c.$t.call(b,"Legal",{hash:{},data:e}))+'</a>&nbsp;âƒ <a href="'+i(c.$route.call(b,"pagesPages","privacy",{hash:{},data:e}))+'" title="Privacy policy">'+i(c.$t.call(b,"Privacy",{hash:{},data:e}))+'</a>&nbsp;âƒ <a href="'+i(c.$route.call(b,"pagesPages","cookies",{hash:{},data:e}))+'" title="Cookies policy">'+i(c.$t.call(b,"Cookies",{hash:{},data:e}))+'</a>&nbsp;âƒ <a href="'+i(c.$route.call(b,"pages","imprint",{hash:{},data:e}))+'" title="Company information">'+i(c.$t.call(b,"Imprint",{hash:{},data:e}))+"</a>\n</div>\n",f})}),
define("views/footer/footer.css",["require","exports","module","dpi"],function(a,b,c,d){var e=c.exports=document.createElement("style"),f=d(".footer{text-align:center;margin:28px 0 0;padding:0 0 18px;display:none}.footer.show{display:block}.app__displayMiniPlayer .footer{padding:0 0 78px}.footer__links,.footer__links a{color:#999}.footer__appButtonContainer{margin:0 25px 28px}.footer__appButtonText{color:#333;font-size:16px;text-align:center;margin:0 0 18px}");e.styleSheet?e.styleSheet.cssText=f:e.appendChild(document.createTextNode(f)),f=null}),
define("lib/helpers/a11y-helper",["require","exports","module","vendor/handlebars-runtime"],function(a,b,c){var d,e=a("vendor/handlebars-runtime");d=c.exports={getAccessibleMarkup:function(a){return'<span class="sc-visuallyhidden">'+e.Utils.escapeExpression(a.screenreader)+"</span>"+(a.visible?'<span aria-hidden="true">'+e.Utils.escapeExpression(a.visible)+"</span>":"")}}}),
define("lib/helpers/count-helper",["require","exports","module","underscore"],function(a,b,c){function g(a){return typeof a!="number"&&(a=parseInt(a,10)),a!==a?"":a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}var d,e=a("underscore"),f;f={max:null,suffix:"+"},d=c.exports={render:function(a,b){return b=b||{},e.defaults(b,f),b.max=b.max||a,a>b.max?b.max+b.suffix:g(a)}}}),
define("lib/helpers/i18n-helper",["require","exports","module"],function(a,b,c){var d=/\r?\n/g,e=/\s+/g;c.exports={cleanBlockText:function(a){return a.trim().replace(d," ").replace(e," ")}}}),
define("lib/helpers/image-helper",["require","exports","module","$","underscore","lib/helpers/client-environment-helper","vendor/experiments/experiments","lib/helpers/name-helper","lib/support"],function(a,b,c){function u(a){o.lastIndex=0;var b=o.exec(a),c;return b&&(c=b[3].charCodeAt(0)%4+1,c!==1&&(a=a.replace("//i1.","//i"+c+"."))),a}function v(a){var b=n(a);b&&(m[b.type][b.key]=m[b.type][b.key]|Math.pow(2,b.index))}function w(a){var b=[];return a.background&&(delete a.alt,delete a.width),a.classList.length&&(a.class=a.classList.join(" ")),f.each(a,function(a,c){f.indexOf(p,c)!==-1&&b.push(c+'="'+a+'"')}),b.join(" ")}function x(a){a.classList.push("image__defer","g-transition-fade-out"),a["data-src"]=a.src,delete a.src}function y(a){a.classList.push("g-transition-fade g-transition-fade-out"),a.onload="(function() { this.classList.remove('g-transition-fade-out'); }.bind(this)())"}var d,e=a("$"),f=a("underscore"),g=a("lib/helpers/client-environment-helper").device,h=a("vendor/experiments/experiments"),i=a("lib/helpers/name-helper"),j=a("lib/support"),k,l,m,n,o,p,q,r,s,t;l=/default_avatar/,o=/^.*(artworks|avatars)-0*([0-9]+)-([a-z0-9]+)-([a-z0-9]+)\.jpg.*$/i,s=/\/images\/default\/.*?x[0-9]+(?:-[a-z0-9]+)?\.png$/,m={artworks:{},avatars:{}},k=[[20,"t20x20"],[50,"t50x50"],[120,"t120x120"],[200,"t200x200"],[500,"t500x500"]],h.get("mweb_listening","hocuspocus")==="hocuspocus"&&(g.dpi==="hdpi"?k=[[60,"t120x120"],[120,"t240x240"],[500,"t500x500"]]:k=[[60,"t60x60"],[120,"t120x120"],[500,"t500x500"]]),p=["alt","class","height","src","title","width","data-src","onload"],r={cloud:{40:"https://m.soundcloud.com/assets/images/default/cloudx40-397e0b30.png",50:"https://m.soundcloud.com/assets/images/default/cloudx50-397e0b30.png",60:"https://m.soundcloud.com/assets/images/default/cloudx80-397e0b30.png",80:"https://m.soundcloud.com/assets/images/default/cloudx80-397e0b30.png",120:"https://m.soundcloud.com/assets/images/default/cloudx120-397e0b30.png",200:"https://m.soundcloud.com/assets/images/default/cloudx200-397e0b30.png"},group:{40:"https://m.soundcloud.com/assets/images/default/groupx40-397e0b30.png",50:"https://m.soundcloud.com/assets/images/default/groupx50-397e0b30.png",60:"https://m.soundcloud.com/assets/images/default/groupx80-397e0b30.png",80:"https://m.soundcloud.com/assets/images/default/groupx80-397e0b30.png",120:"https://m.soundcloud.com/assets/images/default/groupx120-397e0b30.png",200:"https://m.soundcloud.com/assets/images/default/groupx200-397e0b30.png"},user:{40:"https://m.soundcloud.com/assets/images/default/userx40-397e0b30.png",50:"https://m.soundcloud.com/assets/images/default/userx50-397e0b30.png",60:"https://m.soundcloud.com/assets/images/default/userx80-397e0b30.png",80:"https://m.soundcloud.com/assets/images/default/userx80-397e0b30.png",120:"https://m.soundcloud.com/assets/images/default/userx120-397e0b30.png",200:"https://m.soundcloud.com/assets/images/default/userx200-397e0b30.png"}},d=c.exports={load:function(a){var b=new Image,c=e.Deferred();return j.corsImg&&(b.crossOrigin=location.host,a+="?xd=true"),e(b).on("load",function(){c.resolve(this)}).on("error",function(){c.reject(this)}),b.src=a,c},markup:function(a,b){return b.size==="fill"&&(b.fill=!0,b.size="100%"),f.defaults(b,{src:d.urlFrom(a,b.size),width:b.size,height:b.size,alt:d.getAltText(a)}),v(b.src),b.classList=b.class?b.class.split(" "):[],b.fill&&delete b.height,b.defer&&x(b),b.fade&&y(b),d.getMarkup(b)},getMarkup:function(a){var b;return a.fill?a.fill&&(b='<div class="g-image-fill"><img '+w(a)+"></div>"):b="<img "+w(a)+">",b},getAltText:function(a){return a.username?i.get(a,!0)+" avatar":i.get(a)},getPlaceholderUrl:function(a,b){var c,e,g,h,i;g=n(d.setFormat(a,b));if(g){c=g.key;if(m[g.type][c]){e=f.find(k,function(a,c){return i=c,b<=a[0]});while(i>=0){if(m[g.type][c]&Math.pow(2,i)){h=k[i];break}--i}}if(e&&h===e)return!1;if(h)return d.setFormat(a,h[0])}return null},urlFrom:function(a,b){var c=a&&(a.artwork_url||a.avatar_url||a.user&&a.user.avatar_url)||"";return d.isDefaultImage(c)?d.getDefaultImage(a.kind,b):(c=u(c),b?d.setFormat(c,b):c)},isDefaultImage:function(a){return!a||l.test(a)},getDefaultImage:function(a,b){return(r[a]||r.cloud)[t(b)]},setFormat:function(a,b){if(s.test(a))return a.replace(/[0-9]+((?:-[a-z0-9]+)?\.png)$/,t(b)+"$1");o.lastIndex=0;var c=o.exec(a),d=c[1],e=c[4],f=q(d,b);return f?a.replace(e,f):a},fadeInBackground:function(a,b){return d.load(a).done(function(){b.style.backgroundImage="url("+a+" )",b.classList.remove("g-transition-fade-out")})}},n=function(a){var b,c,d;return o.lastIndex=0,b=a.replace(o,function(a,b,e,g){return f.find(k,function(a,b){if(a[1]===g)return c=b,!0}),d=b,e}),d?{index:c,key:parseInt(b,10),type:d}:null},q=function(a,b){var c=f.find(k,function(a){return a[0]>=b})||f.last(k);return c[1]==="t20x20"&&a==="artworks"?"tiny":c[1]},t=function(){var a=Object.keys(r.cloud),b;return a.sort(function(a,b){return a-b}),b=f.last(a),f.memoize(function(c){var d,e;for(d=0;e=a[d];++d)if(e>=c)return e;return b})}()}),
define("views/header/search-button",["require","exports","module","lib/tracking/tracking-bus","lib/view","views/header/search-button.css"],function(a,b,c){function g(){this.bubble("searchButton:click"),e.action("show","search:prompt")}var d,e=a("lib/tracking/tracking-bus"),f=a("lib/view");d=c.exports=f.extend({template:function(){return"Search"},tagName:"button",css:a("views/header/search-button.css"),className:"searchButton g-touch-padding g-button-nostyle",states:{initiate:"initiate"},events:{click:g},renderDecorate:function(){this.whenInserted().done(function(){this.toggleState("initiate")}.bind(this))}})}),
define("views/search/search-box",["require","exports","module","config","lib/event-bus","lib/views/mixins/form","views/search/suggestions-overlay","views/search/suggestions-list","lib/tracking/tracking-bus","lib/view","lib/url","views/search/search-box.tmpl","views/search/search-box.css"],function(a,b,c){function m(){this.toggleState("open",!1),r.call(this)}function n(){var a=this.getElement("input")[0];a.value="",a.setAttribute("value",""),a.focus()}function o(){var a=this.getElement("input")[0].value,b;this.toggleState("filled",!!a.length),b=this.getState("filled"),b?q.call(this,a):!b&&this.suggestionsOverlay&&r.call(this)}function p(){return l.parse(window.location.href).path.indexOf("search")===1}function q(a){if(p())return;var b=!0;this.suggestionsOverlay&&(this.suggestionsOverlay.close(),b=!1,delete this.suggestionsOverlay),this.suggestionsOverlay=new h({Subview:i,subviewArgs:{query:a,maxDisplay:10},showHeader:!0,animate:b}),this.suggestionsOverlay.open()}function r(){this.suggestionsOverlay&&(this.suggestionsOverlay.close(),delete this.suggestionsOverlay)}var d,e=a("config"),f=a("lib/event-bus"),g=a("lib/views/mixins/form"),h=a("views/search/suggestions-overlay"),i=a("views/search/suggestions-list"),j=a("lib/tracking/tracking-bus"),k=a("lib/view"),l=a("lib/url");d=c.exports=k.extend(g,{template:a("views/search/search-box.tmpl"),css:a("views/search/search-box.css"),className:"searchBox g-z-index-overlay",events:{"click .searchBox__searchCancel":m,"click .searchBox__searchEmpty":n,"keyup .searchBox__searchInput":o,"focus .searchBox__searchInput":o},element2selector:{input:".searchBox__searchInput"},states:{open:function(a){this.$el.toggleClass("open",a),a&&this.getElement("input")[0].focus()}},setup:function(){this.listenTo(f,"layout:change",this.rerender),this.listenTo(f,"suggestion-item:click",this.rerender)},dispose:function(){this.stopListening()},renderDecorate:function(){this.toggleState("open",p()),o.call(this)},onSubmit:function(){var a=this.getElement("input")[0],b=a.value.trim(),c=e.get("router"),d;r.call(this),b.length&&(j.action("submit","search:submit"),a.blur(),d=c.getLayoutInfo().args.category||"",c.navigateToRoute("search",[d,b],{trigger:!0}))},onReset:function(){this.getElement("input")[0].focus()},getTemplateData:function(a){var b=l.parse(window.location.href),c=b.query.q;a.needsCancel=!p(),a.q=c}})}),
define("lib/mixins/usage-counting",["require","exports","module","lib/mixin"],function(a,b,c){var d,e=a("lib/mixin");d=c.exports=new e({onCleanup:null,onIncrement:null,onDecrement:null,after:{initialize:function(a){this._counts={},this._needsGC=!1,a=a||{},this._autoCleanup=!!a.autoCleanup,this.onCleanup=a.onCleanup,this.onIncrement=a.onIncrement,this.onDecrement=a.onDecrement},reset:function(){this._counts={},this._needsGC=!1},set:function(a,b){this._counts[a]||(this._counts[a]=1,this.onIncrement&&this.onIncrement(b,a,1))},unset:function(a){delete this._counts[a]}},before:{reset:function(){this.onCleanup&&this.forEach(this.onCleanup)}},countFor:function(a){return this._counts[a]||0},increment:function(a,b){return this.has(a)&&(b=typeof b=="number"?b:1,b>0?(this._counts[a]=(this._counts[a]||0)+b,this.onIncrement&&this.onIncrement(this.get(a),a,b)):b<0&&this.decrement(a,-b)),this},decrement:function(a,b){return this.has(a)&&(b=typeof b=="number"?b:1,b>0?(this._counts[a]=(this._counts[a]||1)-b,this.onDecrement&&this.onDecrement(this.get(a),a,b),this._counts[a]<=0&&(this._needsGC=!0,this._autoCleanup&&this.cleanup())):b<0&&this.increment(a,-b)),this},cleanup:function(){var a,b=this.onCleanup;if(this._needsGC){for(a in this._counts)this._counts.hasOwnProperty(a)&&this._counts[a]===0&&(b&&b(this.get(a),a),this.unset(a));this._needsGC=!1}},changeKey:function(a,b){if(a===b)return;var c=this.get(a),d=this.countFor(a);this.unset(a),this.set(b,c),this.increment(b,d-1)}})}),
define("vendor/audiomanager/audiomanager_mobile",["require","exports","module"],function(a,b,c){(function(a,b){typeof c!="undefined"&&c.exports?c.exports=b():a.AudioManager=b()})(this,function(){var a,b,c;return function(d){function o(a,b){return m.call(a,b)}function p(a,b){var c,d,e,f,g,h,i,j,l,m,n=b&&b.split("/"),o=k.map,p=o&&o["*"]||{};if(a&&a.charAt(0)===".")if(b){n=n.slice(0,n.length-1),a=n.concat(a.split("/"));for(j=0;j<a.length;j+=1){m=a[j];if(m===".")a.splice(j,1),j-=1;else if(m==="..")if(j!==1||a[2]!==".."&&a[0]!=="..")j>0&&(a.splice(j-1,2),j-=2);else break}a=a.join("/")}else a.indexOf("./")===0&&(a=a.substring(2));if((n||p)&&o){c=a.split("/");for(j=c.length;j>0;j-=1){d=c.slice(0,j).join("/");if(n)for(l=n.length;l>0;l-=1){e=o[n.slice(0,l).join("/")];if(e){e=e[d];if(e){f=e,g=j;break}}}if(f)break;!h&&p&&p[d]&&(h=p[d],i=j)}!f&&h&&(f=h,g=i),f&&(c.splice(0,g,f),a=c.join("/"))}return a}function q(a,b){return function(){return f.apply(d,n.call(arguments,0).concat([a,b]))}}function r(a){return function(b){return p(b,a)}}function s(a){return function(b){i[a]=b}}function t(a){if(o(j,a)){var b=j[a];delete j[a],l[a]=!0,e.apply(d,b)}if(!o(i,a)&&!o(l,a))throw new Error("No "+a);return i[a]}function u(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function v(a){return function(){return k&&k.config&&k.config[a]||{}}}var e,f,g,h,i={},j={},k={},l={},m=Object.prototype.hasOwnProperty,n=[].slice;g=function(a,b){var c,d=u(a),e=d[0];return a=d[1],e&&(e=p(e,b),c=t(e)),e?c&&c.normalize?a=c.normalize(a,r(b)):a=p(a,b):(a=p(a,b),d=u(a),e=d[0],a=d[1],e&&(c=t(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}},h={require:function(a){return q(a)},exports:function(a){var b=i[a];return typeof b!="undefined"?b:i[a]={}},module:function(a){return{id:a,uri:"",exports:i[a],config:v(a)}}},e=function(a,b,c,e){var f,k,m,n,p,r=[],u;e=e||a;if(typeof c=="function"){b=!b.length&&c.length?["require","exports","module"]:b;for(p=0;p<b.length;p+=1){n=g(b[p],e),k=n.f;if(k==="require")r[p]=h.require(a);else if(k==="exports")r[p]=h.exports(a),u=!0;else if(k==="module")f=r[p]=h.module(a);else if(o(i,k)||o(j,k)||o(l,k))r[p]=t(k);else if(n.p)n.p.load(n.n,q(e,!0),s(k),{}),r[p]=i[k];else throw new Error(a+" missing "+k)}m=c.apply(i[a],r);if(a)if(f&&f.exports!==d&&f.exports!==i[a])i[a]=f.exports;else if(m!==d||!u)i[a]=m}else a&&(i[a]=c)},a=b=f=function(a,b,c,i,j){return typeof a=="string"?h[a]?h[a](b):t(g(a,b).f):(a.splice||(k=a,b.splice?(a=b,b=c,c=null):a=d),b=b||function(){},typeof c=="function"&&(c=i,i=j),i?e(d,a,b,c):setTimeout(function(){e(d,a,b,c)},4),f)},f.config=function(a){return k=a,k.deps&&f(k.deps,k.callback),f},c=function(a,b,c){b.splice||(c=b,b=[]),!o(i,a)&&!o(j,a)&&(j[a]=[a,b,c])},c.amd={jQuery:!0}}(),c("vendor/almond",function(){}),!function(a){function b(a,b,c){if(!a||!E[typeof a])return a;b=b&&typeof c=="undefined"?b:h.createCallback(b,c);var d=a.length;if(c=-1,d&&k(a))for(;++c<d&&(c+="",!1!==b(a[c],c,a)););else for(c in d=typeof a=="function",a)if((!d||"prototype"!=c)&&!1===b(a[c],c,a))break;return a}function d(a,b,c){var d,e=a,f=e;if(!e)return f;var g=arguments,i=0,j=typeof c=="number"?2:g.length;if(3<j&&"function"==typeof g[j-2])var l=h.createCallback(g[--j-1],g[j--],2);else 2<j&&"function"==typeof g[j-1]&&(l=g[--j]);for(;++i<j;)if((e=g[i])&&E[typeof e]){var m=e.length;if(d=-1,m&&k(e))for(;++d<m;)d+="",f[d]=l?l(f[d],e[d]):e[d];else for(d in m=typeof e=="function",e)m&&"prototype"==d||!K.call(e,d)||(f[d]=l?l(f[d],e[d]):e[d])}return f}function e(a){var b,c=[];if(!a||!E[typeof a])return c;var d=a.length;if(b=-1,d&&k(a))for(;++b<d;)b+="",c.push(b);else for(b in d=typeof a=="function",a)d&&"prototype"==b||!K.call(a,b)||c.push(b);return c}function f(){}function g(a){a.length=0,s.length<v&&s.push(a)}function h(){}function i(a,b,c){function d(){var i=arguments,k=f?this:b;return e||(a=b[g]),c.length&&(i=i.length?(i=R.call(i),h?i.concat(c):c.concat(i)):c),this instanceof d?(k=j(a.prototype),i=a.apply(k,i),o(i)?i:k):a.apply(k,i)}var e=n(a),f=!c,g=b;if(f){var h=void 0;c=b}else if(!e)throw new TypeError;return d}function j(a){return o(a)?O(a):{}}function k(a){return M.call(a)==w}function l(a){var c=[];return b(a,function(a,b){n(a)&&c.push(b)}),c.sort()}function m(a,c,d,e,f,i){var j=d===u;if(typeof d=="function"&&!j){d=h.createCallback(d,e,2);var k=d(a,c);if(typeof k!="undefined")return!!k}if(a===c)return 0!==a||1/a==1/c;var l=typeof a,o=typeof c;if(a===a&&(!a||"function"!=l&&"object"!=l)&&(!c||"function"!=o&&"object"!=o))return!1;if(null==a||null==c)return a===c;if(o=M.call(a),l=M.call(c),o==w&&(o=B),l==w&&(l=B),o!=l)return!1;switch(o){case y:case z:return+a==+c;case A:return a!=+a?c!=+c:0==a?1/a==1/c:a==+c;case C:case D:return a==c+""}if(l=o==x,!l){if(K.call(a,"__wrapped__")||K.call(c,"__wrapped__"))return m(a.__wrapped__||a,c.__wrapped__||c,d,e,f,i);if(o!=B)return!1;var o=a.constructor,p=c.constructor;if(o!=p&&!(n(o)&&o instanceof o&&n(p)&&p instanceof p))return!1}for(p=!f,f||(f=s.pop()||[]),i||(i=s.pop()||[]),o=f.length;o--;)if(f[o]==a)return i[o]==c;var q=0,k=!0;if(f.push(a),i.push(c),l){if(o=a.length,q=c.length,k=q==a.length,!k&&!j)return k;for(;q--;)if(l=o,p=c[q],j)for(;l--&&!(k=m(a[l],p,d,e,f,i)););else if(!(k=m(a[q],p,d,e,f,i)))break;return k}return b(c,function(b,c,g){return K.call(g,c)?(q++,k=K.call(a,c)&&m(a[c],b,d,e,f,i)):void 0}),k&&!j&&b(a,function(a,b,c){return K.call(c,b)?k=-1<--q:void 0}),p&&(g(f),g(i)),k}function n(a){return typeof a=="function"}function o(a){return!!a&&!!E[typeof a]}function p(a,b,c){if(b&&typeof c=="undefined"&&T(a)){c=-1;for(var d=a.length;++c<d&&!1!==b(a[c],c,a););}else if(a)if(b=b&&typeof c=="undefined"?b:h.createCallback(b,c),d=a.length,c=-1,typeof d=="number")for(;++c<d&&!1!==b(a[c],c,a););else for(c in d=typeof a=="function",a)if((!d||"prototype"!=c)&&K.call(a,c)&&!1===b(a[c],c,a))break;return a}function q(a,b){return S.fastBind||N&&2<arguments.length?N.call.apply(N,arguments):i(a,b,R.call(arguments,2))}function r(a){return a}var s=[],t=0,u={},v=40,w="[object Arguments]",x="[object Array]",y="[object Boolean]",z="[object Date]",A="[object Number]",B="[object Object]",C="[object RegExp]",D="[object String]",E={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,"undefined":!1},F=E[typeof global]&&global;!F||F.global!==F&&F.window!==F||(a=F);var G=[],F=Error.prototype,H=Object.prototype,I=RegExp("^"+(H.valueOf+"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),J=G.concat,K=H.hasOwnProperty,L=H.propertyIsEnumerable,M=H.toString,N=I.test(N=M.bind)&&N,O=I.test(O=Object.create)&&O,P=I.test(P=Array.isArray)&&P,Q=I.test(Q=Object.keys)&&Q,R=G.slice;a=I.test(a.attachEvent),a=N&&!/\n|true/.test(N+a);var S=h.support={};S.enumErrorProps=L.call(F,"message")||L.call(F,"name"),S.enumPrototypes=!0,S.fastBind=N&&!a,S.nonEnumArgs=!0,O||(j=function(a){if(o(a)){f.prototype=a;var b=new f;f.prototype=null}return b||{}});var T=P||function(a){return a?typeof a=="object"&&M.call(a)==x:!1},U=Q?function(a){return o(a)?S.enumPrototypes&&typeof a=="function"||S.nonEnumArgs&&a.length&&k(a)?e(a):Q(a):[]}:e;n(/x/)&&(n=function(a){return typeof a=="function"&&"[object Function]"==M.call(a)}),h.assign=d,h.bind=q,h.bindAll=function(a){for(var b=1<arguments.length?J.apply(G,R.call(arguments,1)):l(a),c=-1,d=b.length;++c<d;){var e=b[c];a[e]=q(a[e],a)}return a},h.createCallback=function(a,b,c){if(null==a)return r;var d=typeof a;if("function"!=d){if("object"!=d)return function(b){return b[a]};var e=U(a);return function(b){for(var c=e.length,d=!1;c--&&(d=m(b[e[c]],a[e[c]],u)););return d}}return typeof b=="undefined"?a:1===c?function(c){return a.call(b,c)}:2===c?function(c,d){return a.call(b,c,d)}:4===c?function(c,d,e,f){return a.call(b,c,d,e,f)}:function(c,d,e){return a.call(b,c,d,e)}},h.defaults=function(a,b,c){var d,e=a,f=e;if(!e)return f;for(var g=arguments,h=0,i=typeof c=="number"?2:g.length;++h<i;)if((e=g[h])&&E[typeof e]){var j=e.length;if(d=-1,j&&k(e))for(;++d<j;)d+="","undefined"==typeof f[d]&&(f[d]=e[d]);else for(d in j=typeof e=="function",e)j&&"prototype"==d||!K.call(e,d)||"undefined"==typeof f[d]&&(f[d]=e[d])}return f},h.forEach=p,h.forIn=b,h.functions=l,h.invoke=function(a,b){var c=R.call(arguments,2),d=-1,e=typeof b=="function",f=a?a.length:0,g=Array(typeof f=="number"?f:0);return p(a,function(a){g[++d]=(e?b:a[b]).apply(a,c)}),g},h.keys=U,h.once=function(a){var b,c;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}},h.pick=function(a,c,d){var e={};if(typeof c!="function")for(var f=-1,g=J.apply(G,R.call(arguments,1)),i=o(a)?g.length:0;++f<i;){var j=g[f];j in a&&(e[j]=a[j])}else c=h.createCallback(c,d),b(a,function(a,b,d){c(a,b,d)&&(e[b]=a)});return e},h.values=function(a){for(var b=-1,c=U(a),d=c.length,e=Array(d);++b<d;)e[b]=a[c[b]];return e},h.each=p,h.extend=d,h.methods=l,h.identity=r,h.isArguments=k,h.isArray=T,h.isEqual=m,h.isFunction=n,h.isObject=o,h.isString=function(a){return typeof a=="string"||M.call(a)==D},h.uniqueId=function(a){var b=++t;return(null==a?"":a)+""+b},h.VERSION="1.3.1",typeof c=="function"&&typeof c.amd=="object"&&c.amd&&c("underscore",[],function(){return h})}(this),c("browserutils",{supportHTML5Audio:function(){var a;try{if(window.HTMLAudioElement&&typeof Audio!="undefined")return a=new Audio,!0}catch(b){return!1}},supportSourceSwappingWithPreload:function(){return/Firefox/i.test(navigator.userAgent)},isMobile:function(a){var b=window.navigator.userAgent,c=["mobile","iPhone","iPad","iPod","Android","Skyfire"];return c.some(function(a){return a=new RegExp(a,"i"),a.test(b)})},isIE10Mobile:function(){return/IEmobile\/10\.0/gi.test(navigator.userAgent)},canPlayType:function(a){var b=document.createElement("audio");return!b||!b.canPlayType?!1:b.canPlayType(a).match(/maybe|probably/i)?!0:!1},isNativeHlsSupported:function(){var a=navigator.userAgent,b=["iPhone","iPad","iPod"],c,d,e;return c=function(b){return b.test(a)},d=!c(/chrome/i)&&!c(/opera/i)&&c(/safari/i),e=b.some(function(a){return c(new RegExp(a,"i"))}),e||d},isMSESupported:function(){return!!window.MediaSource||!!window.WebKitMediaSource},isMSESupportMPEG:function(){var a=window.MediaSource||window.WebKitMediaSource;return a?a.isTypeSupported("audio/mpeg"):!1}}),c("errors",{FLASH_HLS_PLAYLIST_NOT_FOUND:"HLS_PLAYLIST_NOT_FOUND",FLASH_HLS_PLAYLIST_SECURITY_ERROR:"HLS_SECURITY_ERROR",FLASH_HLS_NOT_VALID_PLAYLIST:"HLS_NOT_VALID_PLAYLIST",FLASH_HLS_NO_TS_IN_PLAYLIST:"HLS_NO_TS_IN_PLAYLIST",FLASH_HLS_NO_PLAYLIST_IN_MANIFEST:"HLS_NO_PLAYLIST_IN_MANIFEST",FLASH_HLS_TS_IS_CORRUPT:"HLS_TS_IS_CORRUPT",FLASH_HLS_FLV_TAG_CORRUPT:"HLS_FLV_TAG_CORRUPT",FLASH_HTTP_FILE_NOT_FOUND:"HTTP_FILE_NOT_FOUND",FLASH_RTMP_CONNECT_FAILED:"RTMP_CONNECT_FAILED",FLASH_RTMP_CONNECT_CLOSED:"RTMP_CONNECT_CLOSED",FLASH_RTMP_CANNOT_PLAY_STREAM:"RTMP_CANNOT_PLAY_STREAM",FLASH_PROXY_CANT_LOAD_FLASH:"CANT_LOAD_FLASH",FLASH_PROXY_FLASH_BLOCKED:"FLASH_PROXY_FLASH_BLOCKED",HTML5_AUDIO_ABORTED:"HTML5_AUDIO_ABORTED",HTML5_AUDIO_NETWORK:"HTML5_AUDIO_NETWORK",HTML5_AUDIO_DECODE:"HTML5_AUDIO_DECODE",HTML5_AUDIO_SRC_NOT_SUPPORTED:"HTML5_AUDIO_SRC_NOT_SUPPORTED",HTML5_AUDIO_ENDED_EARLY:"HTML5_AUDIO_ENDED_EARLY",HTML5_AUDIO_OVERRUN:"HTML5_AUDIO_OVERRUN",MSE_NOT_SUPPORTED:"MSE_NOT_SUPPORTED",MSE_MP3_NOT_SUPPORTED:"MSE_MP3_NOT_SUPPORTED",MSE_HLS_NOT_VALID_PLAYLIST:"MSE_HLS_NOT_VALID_PLAYLIST",MSE_HLS_PLAYLIST_NOT_FOUND:"MSE_HLS_PLAYLIST_NOT_FOUND",MSE_HLS_SEGMENT_NOT_FOUND:"MSE_HLS_SEGMENT_NOT_FOUND"}),c("vendor/events",["require","exports","module","underscore"],function(a,b,c){var d=a("underscore"),e=[],f=e.push,g=e.slice,h=e.splice,i=/\s+/,j=function(a,b,c,d){if(!c)return!0;if(typeof c=="object")for(var e in c)a[b].apply(a,[e,c[e]].concat(d));else{if(!i.test(c))return!0;var f=c.split(i);for(var g=0,h=f.length;g<h;g++)a[b].apply(a,[f[g]].concat(d))}},k=function(a,b){var c,d=-1,e=a.length;switch(b.length){case 0:while(++d<e)c=a[d],c.callback.call(c.ctx);return;case 1:while(++d<e)(c=a[d]).callback.call(c.ctx,b[0]);return;case 2:while(++d<e)(c=a[d]).callback.call(c.ctx,b[0],b[1]);return;case 3:while(++d<e)(c=a[d]).callback.call(c.ctx,b[0],b[1],b[2]);return;default:while(++d<e)(c=a[d]).callback.apply(c.ctx,b)}},l={on:function(a,b,c){if(!j(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,c){if(!j(this,"once",a,[b,c])||!b)return this;var e=this,f=d.once(function(){e.off(a,f),b.apply(this,arguments)});return f._callback=b,this.on(a,f,c)},off:function(a,b,c){var e,f,g,h,i,k,l,m;if(!this._events||!j(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;h=a?[a]:d.keys(this._events);for(i=0,k=h.length;i<k;i++){a=h[i];if(g=this._events[a]){this._events[a]=e=[];if(b||c)for(l=0,m=g.length;l<m;l++)f=g[l],(b&&b!==f.callback&&b!==f.callback._callback||c&&c!==f.context)&&e.push(f);e.length||delete this._events[a]}}return this},trigger:function(a,b){if(!this._events)return this;var b=g.call(arguments,1);if(!j(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&k(c,b),d&&k(d,arguments),this},stopListening:function(a,b,c){var d=this._listeners;if(!d)return this;var e=!b&&!c;typeof b=="object"&&(c=this),a&&((d={})[a._listenerId]=a);for(var f in d)d[f].off(b,c,this),e&&delete this._listeners[f];return this}},m={listenTo:"on",listenToOnce:"once"};d.each(m,function(a,b){l[b]=function(b,c,e){var f=this._listeners||(this._listeners={}),g=b._listenerId||(b._listenerId=d.uniqueId("l"));return f[g]=b,typeof c=="object"&&(e=this),b[a](c,e,this),this}}),l.bind=l.on,l.unbind=l.off,c.exports=l}),c("states",{PLAYING:"playing",LOADING:"loading",SEEKING:"seeking",PAUSED:"paused",ERROR:"error",IDLE:"idle",INITIALIZE:"initialize",ENDED:"ended",DEAD:"dead"}),c("logger",["require","exports","module"],function(a,b,c){var d;c.exports=d=function(a,b,c){this.enabled=c.debug,this.type=a,this.id=b},d.prototype.log=function(a){if(!this.enabled)return;window.console.log("#"+this.type+" "+this.id+"# "+a)}}),c("html5audioplayer",["require","exports","module","underscore","vendor/events","states","errors","logger","browserutils"],function(a,b,c){var d,e=a("underscore"),f=a("vendor/events"),g=a("states"),h=a("errors"),i=a("logger"),j=a("browserutils");c.exports=d=function(a,b){this._id=a.id,this._descriptor=a,this._isLoaded=!1,this._settings=b,this._bufferingTimeout=null,this._currentPosition=0,this._loadedPosition=0,this._prevCurrentPosition=0,this._prevCheckTime=0,this._positionUpdateTimer=0,this._playRequested=!1,this._startFromPosition=0,a.duration&&(this._duration=a.duration),e.bindAll(this,"_onPositionChange","_onHtml5AudioStateChange","_onLoaded","_onLoadedMetadata","_onBuffering"),this._init(),this._toggleEventListeners(!0),this._descriptor.preload&&this._preload(),a.autoPlay?this.play():this._setState(g.IDLE)},e.extend(d.prototype,f),d.prototype.getId=function(){return this._id},d.prototype.getType=function(){return"HTML5 audio"},d.prototype.play=function(a){if(this._isInOneOfStates(g.ERROR,g.DEAD))return;if(this._isInOneOfStates(g.PAUSED,g.ENDED)){this.resume();return}this._logger.log("play"),this._startFromPosition=a||0,this._setState(g.LOADING),this._playRequested=!0,this._isLoaded?this._playAfterLoaded():(this._preload(),this.once("loaded",this._playAfterLoaded))},d.prototype.pause=function(){this._playRequested=!1;if(this._isInOneOfStates(g.ERROR,g.DEAD))return;this._logger.log("pause"),this._html5Audio.pause(),clearTimeout(this._bufferingTimeout),clearInterval(this._positionUpdateTimer)},d.prototype.seek=function(a){var b=!1,c=a/1e3,d=this._html5Audio.seekable,e;if(this._isInOneOfStates(g.ERROR,g.DEAD))return;if(!this._isLoaded){this.once("loaded",function(){this.seek(a)});return}if(j.isIE10Mobile)b=!0;else for(e=0;e<d.length;e++)if(c<=d.end(e)&&c>=d.start(e)){b=!0;break}if(!b)return;this._logger.log("seek"),this._setState(g.SEEKING),this._html5Audio.currentTime=c,this._currentPosition=a,clearTimeout(this._bufferingTimeout)},d.prototype.resume=function(){if(this._isInOneOfStates(g.ERROR,g.DEAD))return;this._logger.log("resume"),this.getState()===g.PAUSED?(this._setState(g.LOADING),this._html5Audio.play(this._html5Audio.currentTime)):this.getState()===g.ENDED&&(this._setState(g.LOADING),this._html5Audio.play(0)),clearInterval(this._positionUpdateTimer),this._positionUpdateTimer=setInterval(this._onPositionChange,this._settings.updateInterval)},d.prototype.setVolume=function(a){if(!this._html5Audio)return;this._html5Audio.volume=a},d.prototype.getVolume=function(){return this._html5Audio?this._html5Audio.volume:1},d.prototype.setMute=function(a){if(!this._html5Audio)return;this._html5Audio.muted=a},d.prototype.getMute=function(){return this._html5Audio?this._html5Audio.muted:!1},d.prototype.getState=function(){return this._state},d.prototype.getCurrentPosition=function(){return this._currentPosition},d.prototype.getLoadedPosition=function(){return this._loadedPosition},d.prototype.getDuration=function(){return this._duration},d.prototype.kill=function(){if(this._state===g.DEAD)return;clearInterval(this._positionUpdateTimer),clearTimeout(this._bufferingTimeout),this._playRequested=!1,this._toggleEventListeners(!1),this._html5Audio.pause(),this._html5Audio.src=null,delete this._html5Audio,this._setState(g.DEAD)},d.prototype.getErrorMessage=function(){return this._errorMessage},d.prototype.getErrorID=function(){return this._errorID},d.prototype._init=function(){this._html5Audio=new Audio,this._html5Audio.mozAudioChannelType="content",this._html5Audio.id=this._settings.audioObjectID+"_"+this._descriptor.id,this._html5Audio.preload="none",this._logger=new i(this.getType(),this._id,this._settings)},d.prototype._preload=function(){this._html5Audio.preload!=="auto"&&(this._logger.log("setting up preload"),this._html5Audio.preload="auto",this._html5Audio.type=this._descriptor.mimeType,this._html5Audio.src=this._descriptor.src,this._html5Audio.load())},d.prototype._playAfterLoaded=function(){if(!this._playRequested)return;this._trySeekToStartPosition(),this._html5Audio.play(),clearInterval(this._positionUpdateTimer),this._positionUpdateTimer=setInterval(this._onPositionChange,this._settings.updateInterval)},d.prototype._setState=function(a){if(this._state===a)return;this._logger.log('state changed "'+a+'"'),this._logger.log("_currentPosition = "+this._currentPosition+", _loadedPosition = "+this._loadedPosition),this._state=a,this.trigger("stateChange",a,this)},d.prototype._isInOneOfStates=function(){for(var a in arguments)if(arguments[a]===this._state)return!0;return!1},d.prototype._toggleEventListeners=function(a){if(!this._html5Audio)return;var b=a?"addEventListener":"removeEventListener";["ended","play","playing","pause","seeking","waiting","seeked","error"].forEach(function(a){this._html5Audio[b](a,this._onHtml5AudioStateChange)},this),this._html5Audio[b]("loadeddata",this._onLoaded),this._html5Audio[b]("loadedmetadata",this._onLoadedMetadata)},d.prototype._updatePositions=function(){this._currentPosition=this._html5Audio.currentTime*1e3,this._html5Audio.seekable.length>0&&(this._loadedPosition=this._html5Audio.seekable.end(0)*1e3)},d.prototype._trySeekToStartPosition=function(){var a;if(this._startFromPosition>0){this._logger.log("seek to start position="+this._startFromPosition),a=this._startFromPosition/1e3,this._html5Audio.currentTime=a;if(this._html5Audio.currentTime===a)return this._startFromPosition=0,!0}return!1},d.prototype._onBuffering=function(){this._setState(g.LOADING)},d.prototype._onLoaded=function(a){this._logger.log('html5 audio event (loaded handler) "'+a.type+'"');if(this._duration===undefined||this._duration===0)this._duration=this._html5Audio.duration*1e3;this._isLoaded=!0,this.trigger("loaded",this)},d.prototype._onLoadedMetadata=function(a){this._logger.log('html5 audio event (loadedmetadata handler) "'+a.type+'"'),this.trigger("loadedmetadata",this)},d.prototype._onPositionChange=function(a){this._updatePositions();var b=this._currentPosition-this._prevCurrentPosition,c,d,e;this.trigger("positionChange",this.getCurrentPosition(),this._loadedPosition,this._duration,this);if(!this._isInOneOfStates(g.PLAYING,g.LOADING)){this._state===g.SEEKING&&b>0&&this._setState(g.PLAYING);return}this._duration!==0&&(this._currentPosition>this._duration||this._currentPosition>this._loadedPosition&&!j.isIE10Mobile)&&this._onHtml5AudioStateChange({type:"ended"}),c=(new Date).valueOf(),d=c-this._prevCheckTime;if(d===0)return;e=b/d,e>.7?(clearTimeout(this._bufferingTimeout),this._setState(g.PLAYING),this._bufferingTimeout=null):this._state===g.PLAYING&&this._bufferingTimeout==null&&(this._bufferingTimeout=setTimeout(this._onBuffering,this._settings.bufferingDelay)),this._prevCurrentPosition=this._currentPosition,this._prevCheckTime=c},d.prototype._onHtml5AudioStateChange=function(a){this._logger.log('html5 audio event (state change handler) "'+a.type+'"'),clearTimeout(this._bufferingTimeout);switch(a.type){case"playing":if(this._trySeekToStartPosition())return;this._updatePositions(),this._setState(g.PLAYING);break;case"pause":this._setState(g.PAUSED);break;case"ended":this._currentPosition=this._loadedPosition=this._duration,this.trigger("positionChange",this.getCurrentPosition(),this._loadedPosition,this._duration,this),clearInterval(this._positionUpdateTimer),this._setState(g.ENDED);break;case"waiting":if(this.getState()===g.SEEKING)break;this._setState(g.LOADING);break;case"seeking":this._setState(g.SEEKING);break;case"seeked":this._updatePositions(),this._html5Audio.paused?this._setState(g.PAUSED):this._setState(g.PLAYING);break;case"error":this._error(this._html5AudioErrorCodeToErrorId(),!0)}},d.prototype._html5AudioErrorCodeToErrorId=function(){return{1:h.HTML5_AUDIO_ABORTED,2:h.HTML5_AUDIO_NETWORK,3:h.HTML5_AUDIO_DECODE,4:h.HTML5_AUDIO_SRC_NOT_SUPPORTED}[this._html5Audio.error.code]},d.prototype._error=function(a,b){var c="error: ";b&&(c="error (native): "),this._errorID=a,this._errorMessage=this._getErrorMessage(this._errorID),this._logger.log(c+this._errorID+" "+this._errorMessage),this._setState(g.ERROR),this._toggleEventListeners(!1)},d.prototype._getErrorMessage=function(a){var b={};return b[h.HTML5_AUDIO_ABORTED]="The fetching process was aborted by the user.",b[h.HTML5_AUDIO_NETWORK]="A network connection lost.",b[h.HTML5_AUDIO_DECODE]="An error occurred while decoding the media resource.",b[h.HTML5_AUDIO_SRC_NOT_SUPPORTED]="The media resource is not suitable.",b[h.HTML5_AUDIO_ENDED_EARLY]="Audio playback ended before the indicated duration of the track.",b[h.HTML5_AUDIO_OVERRUN]="Audio playback continued past end of the track.",b[a]}}),c("hlsaudioplayer",["require","exports","module","underscore","errors","vendor/events","html5audioplayer","logger","states"],function(a,b,c){var d,e=a("underscore"),f=a("errors"),g=a("vendor/events"),h=a("html5audioplayer"),i=a("logger"),j=a("states"),k=1;c.exports=d=function(a,b){h.apply(this,arguments),this._seekPosition=0},e.extend(d.prototype,h.prototype),d.prototype.getType=function(){return"HTML5 HLS audio"},d.prototype.seek=function(a){h.prototype.seek.apply(this,arguments),this._isInOneOfStates(j.LOADING,j.SEEKING)&&(this._seekPosition=a)},d.prototype.getCurrentPosition=function(){if(this._isInOneOfStates(j.LOADING)&&this._seekPosition>0)return this._seekPosition;if(this._isInOneOfStates(j.PLAYING,j.SEEKING)){if(this._seekPosition>=this._currentPosition)return this._seekPosition;this._seekPosition=0}return h.prototype.getCurrentPosition.apply(this,arguments)},d.prototype._onStateChange=function(a){this._logger.log('hls html5 audio event "'+a.type+'"'),clearTimeout(this._bufferingTimeout);switch(a.type){case"playing":if(this._trySeekToStartPosition())return;this.updatePositions(),this._setState(j.PLAYING);break;case"pause":this._setState(j.PAUSED);break;case"ended":if(this._currentPosition+k<this._duration){this._errorID=f.HTML5_AUDIO_ENDED_EARLY,this._errorMessage=this._getErrorMessage(this._errorID),this._logger.log("hls html5 audio error: "+this._errorID+" "+this._errorMessage),this._setState(j.ERROR),this.toggleEventListeners(!1);break}this._currentPosition=this._loadedPosition=this._duration,this.trigger("positionChange",this._currentPosition,this._loadedPosition,this._duration,this),this._setState(j.ENDED),clearInterval(this._positionUpdateTimer);break;case"waiting":if(this.getState()===j.SEEKING)break;this._setState(j.LOADING);break;case"seeking":this._setState(j.SEEKING);break;case"seeked":this.updatePositions(),this._html5Audio.paused&&this._setState(j.PAUSED);break;case"error":this._errorID={1:f.HTML5_AUDIO_ABORTED,2:f.HTML5_AUDIO_NETWORK,3:f.HTML5_AUDIO_DECODE,4:f.HTML5_AUDIO_SRC_NOT_SUPPORTED}[this._html5Audio.error.code],this._errorMessage=this._getErrorMessage(this._errorID),this._logger.log("hls html5 audio error: "+this._errorID+" "+this._errorMessage),this._setState(j.ERROR),this.toggleEventListeners(!1)}}}),c("singleaudioplayer",["require","exports","module","underscore","browserutils","errors","vendor/events","html5audioplayer","logger","states"],function(a,b,c){var d,e=a("underscore"),f=a("browserutils"),g=a("errors"),h=a("vendor/events"),i=a("html5audioplayer"),j=a("logger"),k=a("states"),l={};c.exports=d=function(a,b){i.apply(this,arguments)},e.extend(d.prototype,i.prototype),d.prototype._init=function(){if(!d._html5Audio){var a=new Audio;a.mozAudioChannelType="content",a.id=this._settings.audioObjectID+"_Single",a.preload="none",d._html5Audio=a,this._preloadAudio=a,this._addGlobalListeners()}this._html5Audio=d._html5Audio,this._playRequested=!1,this._logger=new j(this.getType(),this._id,this._settings)},d.prototype._toggleEventListeners=function(a){a?l[this._id]=this:delete l[this._id]},d.prototype._addGlobalListeners=function(){var a=d._html5Audio,b=function(b,c){var d=l[a._playerId];Object.keys(l).forEach(function(a){var b=l[a];b!==d&&b._isInOneOfStates(k.PLAYING,k.LOADING,k.SEEKING)&&b.pause()}),d&&d[b](c)},c=b.bind(null,"_onHtml5AudioStateChange"),e=b.bind(null,"_onLoaded"),f=b.bind(null,"_onLoadedMetadata");["ended","play","playing","pause","seeking","waiting","seeked","error"].forEach(function(b){a.addEventListener(b,c)}),a.addEventListener("loadeddata",e),a.addEventListener("loadedmetadata",f)},d.prototype.getType=function(){return"HTML5 single audio"},d.prototype.play=function(a){this._playRequested=!0;if(this._html5Audio._playerId===this._descriptor.id&&this._isInOneOfStates(k.PAUSED,k.ENDED)){i.prototype.resume.apply(this,arguments);return}this._isInOneOfStates(k.PAUSED)&&(a=this._currentPosition),this._startFromPosition=a||0,this._html5Audio._playerId=this._descriptor.id,this._toggleEventListeners(!0),this._setState(k.LOADING);var b=function(){if(!this._playRequested)return;this._logger.log("play after loaded"),this._trySeekToStartPosition(),this._html5Audio.play(),clearInterval(this._positionUpdateTimer),this._positionUpdateTimer=setInterval(this._onPositionChange,this._settings.updateInterval)};this._html5Audio.readyState>0&&this._descriptor.src===this._html5Audio.src?b.apply(this):(this.once("loaded",b),this._html5Audio.type=this._descriptor.mimeType,this._html5Audio.src=this._descriptor.src,this._html5Audio.preload="auto",this._html5Audio.load())},d.prototype.pause=function(){this._playRequested=!1;if(this._isInOneOfStates(k.ERROR,k.DEAD))return;this._logger.log("pause"),this._html5Audio._playerId===this._descriptor.id?this._html5Audio.pause():(this._toggleEventListeners(!1),this._setState(k.PAUSED)),clearTimeout(this._bufferingTimeout),clearInterval(this._positionUpdateTimer)},d.prototype.seek=function(a){if(this._html5Audio._playerId!==this._descriptor.id){this._currentPosition=a,this.trigger("positionChange",this._currentPosition,this._loadedPosition,this._duration,this);return}i.prototype.seek.apply(this,arguments)},d.prototype.kill=function(){if(this._state===k.DEAD)return;this._playRequested=!1,clearInterval(this._positionUpdateTimer),clearTimeout(this._bufferingTimeout),this._toggleEventListeners(!1),this._setState(k.DEAD)},d.prototype.resume=function(){if(this._isInOneOfStates(k.ERROR,k.DEAD))return;if(this._html5Audio._playerId!==this._descriptor.id){this.play(this._currentPosition);return}i.prototype.resume.apply(this,arguments)},d.prototype.preload=function(){!this._preloadAudio&&f.supportSourceSwappingWithPreload()&&(this._preloadAudio=new Audio,this._preloadAudio.preload="none");var a=this._preloadAudio;a&&a.preload!=="auto"&&(this._logger.log("preload"),a.preload="auto",a._playerId=this._id,a.type=this._descriptor.mimeType,a.src=this._descriptor.src,a.load())}}),c("hlssingleaudioplayer",["require","exports","module","underscore","errors","vendor/events","hlsaudioplayer","logger","singleaudioplayer","states"],function(a,b,c){var d,e=a("underscore"),f=a("errors"),g=a("vendor/events"),h=a("hlsaudioplayer"),i=a("logger"),j=a("singleaudioplayer"),k=a("states");c.exports=d=function(a,b){j.apply(this,arguments)},e.extend(d.prototype,j.prototype),e.extend(d.prototype,e.pick(h.prototype,"_seekPosition","getCurrentPosition","_onStateChange")),d.prototype.seek=function(a){j.prototype.seek.apply(this,arguments),this._isInOneOfStates(k.LOADING,k.SEEKING)&&(this._seekPosition=a)},d.prototype.getType=function(){return"HTML5 HLS single audio"}}),c("mimetypes",{AAC:"audio/aac",M3U8:"application/x-mpegURL",MP4:"audio/mp4",MPEG:"audio/mpeg",OGG:"audio/ogg",WAV:"audio/wav",WEBM:"audio/webm",getTypeByExtension:function(a){var b={mp1:this.MPEG,mp2:this.MPEG,mp3:this.MPEG,mpeg:this.MPEG,mpg:this.MPEG,aac:this.AAC,mp4:this.MP4,ogg:this.OGG,oga:this.OGG,opus:this.OGG,webm:this.WEBM,wav:this.WAV,m3u8:this.M3U8};return b[a]||null}}),c("factory",["require","exports","module","browserutils","hlssingleaudioplayer","mimetypes","singleaudioplayer"],function(a,b,c){var d,e=a("browserutils"),f=a("hlssingleaudioplayer"),g=a("mimetypes"),h=a("singleaudioplayer");c.exports=d=function(){},d.createAudioPlayer=function(a,b){var c,i,j,k;i=a.src.split(":")[0];if(i==="rtmp"||i==="rtmpt")return null;c=d.getMimeType(a);if(c===g.M3U8)if(e.isNativeHlsSupported())k=new f(a,b);else return null;else if(e.supportHTML5Audio()&&e.canPlayType(c))k=new h(a,b);else return null;return k},d.getMimeType=function(a){if(a.mimeType)return a.mimeType;var b=a.src.split("?")[0];return b=b.substring(b.lastIndexOf(".")+1,b.length),g.getTypeByExtension(b)}}),c("audiomanager",["require","exports","module","underscore","factory","states","errors","browserutils"],function(a,b,c){var d,e=a("underscore"),f=a("factory"),g=a("states"),h=a("errors"),i=a("browserutils");c.exports=d=function(a){a=a||{},this._players={},this._volume=1,this._mute=!1,this._settings=e.defaults(a,d.defaults)},d.States=g,d.Errors=h,d.BrowserUtils=i,d.defaults={flashAudioPath:"flashAudio.swf",flashLoadTimeout:2e3,flashObjectID:"flashAudioObject",audioObjectID:"html5AudioObject",updateInterval:300,bufferTime:8e3,bufferingDelay:800,debug:!1},d.prototype.getAudioPlayer=function(a){return this._players[a]},d.prototype.hasAudioPlayer=function(a){return this._players[a]!==undefined},d.prototype.removeAudioPlayer=function(a){this.hasAudioPlayer(a)&&delete this._players[a]},d.prototype.setVolume=function(a){a=Math.min(1,a),this._volume=Math.max(0,a);for(var b in this._players)this._players.hasOwnProperty(b)&&this._players[b].setVolume(this._volume)},d.prototype.getVolume=function(){return this._volume},d.prototype.setMute=function(a){this._muted=a;for(var b in this._players)this._players.hasOwnProperty(b)&&this._players[b].setMute(this._muted)},d.prototype.getMute=function(){return this._muted},d.prototype.createAudioPlayer=function(a){var b,c,d;a.id||(a.id=Math.floor(Math.random()*1e10).toString()+(new Date).getTime().toString());if(!a.src)throw new Error("AudioManager: You need to pass a valid src");return this._players[a.id]||(this._players[a.id]=f.createAudioPlayer(a,this._settings)),this._players[a.id].setVolume(this._volume),this._players[a.id].setMute(this._muted),this._players[a.id].on("stateChange",this._onStateChange,this),this._players[a.id]},d.prototype._onStateChange=function(a,b){b.getState()===g.DEAD&&this.removeAudioPlayer(b.getId())}}),b(["audiomanager"]),b("audiomanager")})}),
define("views/app-buttons/app-buttons",["require","exports","module","lib/helpers/client-environment-helper","lib/lingua","lib/native-links","lib/tracking/tracking-bus","lib/views/mixins/update-on-layout-change","lib/view","views/app-buttons/app-buttons.tmpl","views/app-buttons/app-buttons.css"],function(a,b,c){function p(){h.action("submit","download_app_badge:download")}function q(){return e.iOS?k:e.android?l:e.blackberry?m:e.amazon?n:e.firefoxOS?o:""}var d,e=a("lib/helpers/client-environment-helper").device,f=a("lib/lingua"),g=a("lib/native-links"),h=a("lib/tracking/tracking-bus"),i=a("lib/views/mixins/update-on-layout-change"),j=a("lib/view"),k=f.t("Download on the App Store",null,"Download button help text when website is viewed on ios"),l=f.t("Get it on Google Play",null,"Download button help text when website is viewed on android"),m=f.t("Get it at BlackBerry World",null,"Download button help text when website is viewed on blackberry"),n=f.t("Available at Amazon",null,"Download button help text when website is viewed on amazon device"),o=f.t("Get it in the Firefox Marketplace",null,"Download button help text when website is viewed on firefox device");d=c.exports=j.extend(i,{className:"appButtons",template:a("views/app-buttons/app-buttons.tmpl"),css:a("views/app-buttons/app-buttons.css"),events:{click:p},element2selector:{"upsell-link":".appButtons__link"},setup:function(){this.el.className+=" "+e.brand},renderDecorate:function(){g.useNativeDeeplinks()||(this.getElement("upsell-link")[0].target="_blank")},getTemplateData:function(a,b){return a.url=g.useNativeDeeplinks()&&b&&g.getStoreDeepLink(b)||g.getStoreLink(),a.a11yText=q.call(this),a}})}),
define("vendor/experiments/experiments",["require","exports","module"],function(a,b,c){(function(){function d(b){if(!a._localStorageEnabled)return;localStorage.setItem(a._localStorageKey,b)}var a,b="assignments";a={_initialized:!1,_assignments:null,_localStorageKey:null,_localStorageEnabled:null,_availableLayers:null,_assignmentServiceUrl:null,_version:null,_anonymousId:null,initialize:function(c){return c=c||{},a._availableLayers=c.availableLayers||[],a._localStorageKey=c.localStorageKey||b,a._assignmentServiceUrl=c.assignmentServiceUrl+c.anonymousUserId,a._version=c.version,a._anonymousId=c.anonymousUserId,a._localStorageEnabled=c.hasOwnProperty("localStorageEnabled")?c.localStorageEnabled:!0,a._assignments=a.loadAssignments(),a._initialized=!0,a},reset:function(){a._availableLayers=[],a._localStorageKey=b,a._assignmentServiceUrl="",a._version=null,a._anonymousId=null,a._assignments=null},get:function(b,c){if(!a._initialized)return!1;var d=a.getLayers()||{};return d.hasOwnProperty(b)&&d[b].experimentName===c?d[b].variantName:!1},set:function(b,c,d){var e=a.getLayers();e[b]={experimentName:c,variantName:d}},fetchAssignments:function(){var b=$.Deferred(),c=a.getAssignments(),d=a._availableLayers,e=!!d.length,f={layers:d.join(",")};return a.isUpToDate(c,a._version)?b.resolve(a.formatAssignments()):e?(a.clearAssignments(),$.ajax({url:a._assignmentServiceUrl,type:"GET",dataType:"json",data:f,timeout:5e3}).done(function(c){a.buildAssignments(c),a.storeAssignments(),b.resolve(a.formatAssignments())}).fail(b.reject)):(a.clearAssignments(),b.resolve(a.formatAssignments())),b.promise()},isUpToDate:function(a,b){return a&&a._version===b},loadAssignments:function(){var b;try{b=JSON.parse(localStorage.getItem(a._localStorageKey))}catch(c){b={}}return b},buildAssignments:function(b){a._assignments={_version:a._version,layers:a.formatLayers(b)}},storeAssignments:function(){var b=a.getAssignments()||{};d(JSON.stringify(b))},clearAssignments:function(){a._assignments={},d(JSON.stringify({}))},getAssignments:function(){return a._assignments},getLayers:function(){return a.getAssignments().layers},formatAssignments:function(){var b={},c=a.getLayers(),d;return c&&(d=Object.keys(c),d.forEach(function(a){b[a]=c[a].variantId})),b},formatLayers:function(a){var b={};return a.forEach(function(a){b[a.layer_name]={experimentName:a.experiment_name,variantName:a.variant_name,variantId:a.variant_id}}),b},serialize:function(){var b=a.getLayers(),c,d,e=[];for(d in b)c=b[d],c&&c.experimentName&&c.variantName&&e.push("["+d+"] "+c.experimentName+": "+c.variantName);return e.join(", ")},setExperimentsFromQueryParams:function(b){var c,d,e,f,g;for(g in b)c=/^exp\.([^.]+)\.([^.]+)$/.exec(g),f=b[g],c&&(d=c[1],e=c[2]),d&&e&&f&&a.set(d,e,f)}},typeof c!="undefined"&&c.exports?c.exports=a:(window.SC=window.SC||{},window.SC.Experiments=a)})()}),
define("lib/helpers/name-helper",["require","exports","module","vendor/handlebars-runtime","lib/helpers/lang-helper"],function(a,b,c){var d,e=a("vendor/handlebars-runtime"),f=a("lib/helpers/lang-helper");d=c.exports={get:function(a,b){var c=e.Utils.escapeExpression(a.username||a.title||a.name);return b===!0&&(c=f.possessive(c)),c}}}),
define("views/header/search-button.css",["require","exports","module","dpi"],function(a,b,c,d){var e=c.exports=document.createElement("style"),f=d(".searchButton,.searchButton:active{top:0;right:0;position:absolute;overflow:hidden;height:44px;width:50px;text-indent:50px}.searchButton::after{position:absolute;content:'';top:0;right:0;background:#fff url(https://m.soundcloud.com/assets/images/ldpi/search/search-5738d5f4.png) 0 0 no-repeat;background-size:50px 44px;width:50px;height:44px;transition:background-color .1s linear}.searchButton.initiate::after{background-color:#333}.searchButton:active::after{background-color:#f50}");e.styleSheet?e.styleSheet.cssText=f:e.appendChild(document.createTextNode(f)),f=null}),
define("lib/views/mixins/form",["require","exports","module","$","underscore","lib/mixin"],function(a,b,c){var d,e=a("$"),f=a("underscore"),g=a("lib/mixin");d=c.exports=new g({defaults:{tagName:"form",formSelector:null,formId:null,submit:function(a){a.preventDefault(),this.onSubmit(this.getFormElement().elements)},reset:function(){this.onReset()},getFormElement:function(){return this.formSelector?this.el.querySelector(this.formSelector):this.el},onSubmit:e.noop,onReset:e.noop},applyTo:function(a){var b={},c=this.formSelector;b[["reset",c].join(" ").trim()]="reset",b[["submit",c].join(" ").trim()]="submit",a.events=f.defaults(b,a.events)},before:{setup:function(){this.formId=f.uniqueId("form-")}},around:{getTemplateData:function(a,b){return b=a(b)||b,b.form_id=this.formId,b}}})}),
define("views/search/suggestions-overlay",["require","exports","module","lib/event-bus","lib/views/fullscreen-overlay"],function(a,b,c){function g(){this.close()}var d,e=a("lib/event-bus"),f=a("lib/views/fullscreen-overlay");d=c.exports=f.extend({setup:function(){f.prototype.setup.apply(this,arguments),this.listenTo(e,"suggestion-item:click",g)},dispose:function(){f.prototype.dispose.apply(this,arguments),this.stopListening(e,"suggestion-item:click",g)},onClose:function(){this.dispose()}})}),
define("views/search/suggestions-list",["require","exports","module","underscore","lib/views/list","collections/suggestions","views/search/suggestion-item","views/search/suggestions-list.tmpl","views/search/suggestions-list.css","views/search/search.css"],function(a,b,c){var d,e=a("underscore"),f=a("lib/views/list"),g=a("collections/suggestions"),h=a("views/search/suggestion-item");d=c.exports=f.extend({template:a("views/search/suggestions-list.tmpl"),css:[a("views/search/suggestions-list.css"),a("views/search/search.css")],className:"suggestionsList",itemClassName:"suggestionsList__item",Subview:h,setup:function(a){this.collection=new g(null,{query:a.query})},getTemplateData:function(a){a.showMessage=e.isEmpty(a)},getSubviewArgs:function(){return e.extend(f.prototype.getSubviewArgs.apply(this,arguments),{query:this.options.query})}})}),
define("views/search/search-box.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function k(a,b){var d="";return d+='\n<button class="searchBox__searchCancel cancel g-font-14 g-button-nostyle g-touch-padding" type="button">'+h(c.$t.call(a,"Cancel",{hash:{_comment:"Cancel search button text"},data:b}))+"</button>\n",d}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f="",g,h=this.escapeExpression,i=this,j="function";g=c["if"].call(b,b&&b.needsCancel,{hash:{},inverse:i.noop,fn:i.program(1,k,e),data:e});if(g||g===0)f+=g;return f+='\n<div class="searchBox__searchInputWrap"> <input class="searchBox__searchInput" placeholder="'+h(c.$t.call(b,"Search SoundCloud",{hash:{},data:e}))+'" type="search" name="q" autocomplete="off" autocorrect="off" autocapitalize="off" aria-label="'+h((g=b&&b.label,typeof g===j?g.apply(b):g))+'" value="'+h((g=b&&b.q,typeof g===j?g.apply(b):g))+'"> <button class="g-button-nostyle searchBox__searchEmpty g-touch-padding" type="reset">&#215;</button>\n</div>\n',f})}),
define("views/search/search-box.css",["require","exports","module","dpi"],function(a,b,c,d){var e=c.exports=document.createElement("style"),f=d(".searchBox{position:absolute;top:0;left:0;width:100%;height:44px;background:#fff;z-index:-1;opacity:0;-webkit-transition:opacity .25s,z-index .3s;transition:opacity .25s,z-index .3s}.searchBox.open{z-index:1;opacity:1;-webkit-transition:opacity .25s,z-index .01s;transition:opacity .25s,z-index .01s}.searchBox__searchInputWrap{position:relative;overflow:hidden;padding-right:8px}.searchBox__searchCancel+.searchBox__searchInputWrap{padding-right:4px}.searchBox__searchInput{position:relative;display:block;width:100%;height:36px;margin:4px 0 0 4px;padding-left:40px;border:0;border-radius:2px;color:#333;background:#e5e5e5}.searchBox__searchInput:focus{outline:0}.searchBox__searchInput::-moz-placeholder,.searchBox__searchInput::-webkit-placeholder,.searchBox__searchInput:-ms-placeholder{color:#999}.searchBox__searchInputWrap::after{content:'';display:block;position:absolute;left:12px;top:12px;width:20px;height:20px;background:url(https://m.soundcloud.com/assets/images/ldpi/search/search_input-bd02f9a1.png) 0 0 no-repeat;opacity:.4;background-size:20px 20px}.searchBox__searchEmpty{color:#999;display:none;position:absolute;right:10px;top:3px;height:36px;line-height:36px;width:20px;font-size:20px}.searchBox.filled .searchBox__searchEmpty{display:block}.searchBox__searchCancel{float:right;margin:13px 13px 0;color:#999}");e.styleSheet?e.styleSheet.cssText=f:e.appendChild(document.createTextNode(f)),f=null}),
define("views/app-buttons/app-buttons.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function k(a,b){var d="",e;return d+=' <a class="appButtons__link" href="'+i((e=a&&a.url,typeof e===h?e.apply(a):e))+'"> '+i(c.$a11y.call(a,{hash:{screenreader:a&&a.a11yText},data:b}))+" </a>\n",d}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f="",g,h="function",i=this.escapeExpression,j=this;g=c["if"].call(b,b&&b.url,{hash:{},inverse:j.noop,fn:j.program(1,k,e),data:e});if(g||g===0)f+=g;return f+="\n",f})}),
define("views/app-buttons/app-buttons.css",["require","exports","module","dpi"],function(a,b,c,d){var e=c.exports=document.createElement("style"),f=d(".appButtons__link{display:block;height:57px;overflow:hidden;margin:0 auto}.appButtons.android .appButtons__link{background:url(https://m.soundcloud.com/assets/images/ldpi/appstores/google-9bb8d964.png) 0 0 no-repeat;background-size:165px 57px;width:165px}.appButtons.iOS .appButtons__link{background:url(https://m.soundcloud.com/assets/images/ldpi/appstores/apple-9bb8d964.png) 0 0 no-repeat;background-size:193px 57px;width:193px}.appButtons.blackberry .appButtons__link{background:url(https://m.soundcloud.com/assets/images/ldpi/appstores/blackberry-53996917.png) 0 0 no-repeat;background-size:164px 57px;width:164px}.appButtons.amazon .appButtons__link{background:url(https://m.soundcloud.com/assets/images/ldpi/appstores/amazon-3e2f27f8.png) 0 0 no-repeat;background-size:167px 57px;width:167px}.appButtons.firefoxOS .appButtons__link{background:url(https://m.soundcloud.com/assets/images/firefox_marketplace-6e30092e.png) 0 0 no-repeat;background-size:172px 60px;height:60px;width:172px}");e.styleSheet?e.styleSheet.cssText=f:e.appendChild(document.createTextNode(f)),f=null}),
define("lib/helpers/lang-helper",["require","exports","module"],function(a,b,c){var d;d=c.exports={plural:function(a,b,c){return c=typeof c=="string"?c:b+"s",a===1?b:c},possessive:function(a,b){return a+"â€™s"+(b?" "+b:"")}}}),
define("lib/views/fullscreen-overlay",["require","exports","module","config","lib/views/mixins/overlay","lib/view","lib/views/fullscreen-overlay.css"],function(a,b,c){var d,e=a("config"),f=a("lib/views/mixins/overlay"),g=a("lib/view");d=c.exports=g.extend(f,{defaults:{showHeader:!1},parentEl:function(){return e.get("appView").el},template:function(){return""},transitions:{"in":"fadeIn",out:"fadeOut"},css:a("lib/views/fullscreen-overlay.css"),className:"fullscreen-overlay",setup:function(a){a.animate||(this.transitions=null),this.$el.toggleClass("fullscreen-overlay-show-header",a.showHeader)}})}),
define("lib/views/list",["require","exports","module","$","underscore","vendor/handlebars-runtime","lib/helpers/map-to-html-attrs-helper","lib/view"],function(a,b,c){var d,e=a("$"),f=a("underscore"),g=a("vendor/handlebars-runtime"),h=a("lib/helpers/map-to-html-attrs-helper"),i=a("lib/view");d=c.exports=i.extend({emptyTemplate:null,defaults:{maxDisplay:3},Subview:null,listTagName:"ul",listClassName:"sc-list-nostyle sc-clearfix",itemTagName:"li",itemClassName:"",template:function(){return""},_listElement:null,renderDecorate:function(){var a=this.getListContainer();a&&(a.appendChild(this.createListElement()),this.addInitialItems())},createListElement:function(){if(!this._listElement){var a=document.createElement(this.listTagName);this.listClassName&&(a.className=this.listClassName),this._listElement=a}return this._listElement},addInitialItems:function(){var a,b=this.getModelsToRender(),c=Math.min(this.options.maxDisplay||Infinity,b.length);for(a=0;a<c;++a)this.createAndInsertListItemView(b[a],-1)},_teardown:function(){this._listElement&&(e(this._listElement).remove(),this._listElement=null),i.prototype._teardown.call(this)},getModelsToRender:function(){return this.collection.models},createAndInsertListItemView:function(a,b){var c,d=this.options.maxDisplay;c=this.addListItemSubview(a),c.render(),this.addListItemToDOM(c,f.isNumber(b)?b:-1),d&&this.getListItemViews().length>d&&(c=this.getListItemView(this.collection.at(d)),c&&(this.removeListItemFromDOM(c),this.removeSubview(c)))},getTemplate:function(a){return!this.emptyTemplate||!a||this.collection.length?i.prototype.getTemplate.apply(this,arguments):this.emptyTemplate},getListContainer:function(){return this.el},getListElement:function(){return this._listElement},getListItemView:function(a){return f.find(this.subviews,function(b){return b.model===a})},getListItemWrappers:function(){return this.getListElement().children},getListItemViews:function(){var a=this.Subview;return this.subviews.filter(function(b){return b instanceof a})},getSubviewArgs:function(a){return{resource_id:a.resource_id,resource_type:a.resource_type}},getListItemAttributesData:function(a){return a.model?a.model.toJSON():{}},getListItemAttributes:function(){return{}},getListItemAttributesString:function(a){var b=this.getListItemAttributes(a);return new g.SafeString(h(b))},getListItemSelector:function(){return"."+this.itemClassName.trim().split(/\s+/).join(".")},getListItemViewByEvent:function(a){var b=e(a.target).closest(this.getListItemSelector()),c;return b.length&&(c=f.find(this.subviews,function(a){return a.el===b.children()[0]})),c},onAdd:function(a,b){if(this.disposed)return;if(!this.getListElement()&&b.length===1&&a===b.at(0)){this.rerender();return}var c=b.indexOf(a),d=typeof c=="number"?c:-1,e=this.options.maxDisplay,f=!e||d>=0&&d<e||d<0&&this.collection.length<=e;f&&this.createAndInsertListItemView(a,d)},onRemove:function(a){var b=this.getListItemView(a);b&&(this.removeListItemFromDOM(b),this.removeSubview(b))},addListItemSubview:function(a){var b=this.getSubviewArgs(a);return this.addSubview(new this.Subview(b))},createSubviewWrapper:function(a){var b=this.getListItemAttributesString(this.getListItemAttributesData(a)),c;return b=b.toString().length?" "+b:"",c=e("<"+this.itemTagName+' class="'+this.itemClassName+'"'+b+">"),c[0]},getSubviewWrapper:function(a){return a.el.parentNode},addListItemToDOM:function(a,b){var c=this.getListElement(),d=this.getSubviewWrapper(a),e;if(!c)return;d||(d=this.createSubviewWrapper(a),d.appendChild(a.el)),b===-1||b>=this.collection.length-1||b===undefined?c.appendChild(d):b===0?c.insertBefore(d,c.firstElementChild):(e=this.getSubviewWrapper(this.getListItemView(this.collection.at(b-1))),e.parentNode.insertBefore(d,e.nextElementSibling))},removeListItemFromDOM:function(a){var b,c=this.getSubviewWrapper(a),d=this.options.maxDisplay;b=function(){var b,f,g=e(c),h=g.index();g.remove(),a._dispose(),f=!this._disposed&&d&&d<=this.collection.length&&this.getListItemWrappers().length<d,f&&(b=this.addListItemSubview(this.collection.at(d-1)),b.render(),this.addListItemToDOM(b,h))}.bind(this),b()}})}),
define("collections/suggestions",["require","exports","module","lib/collection","models/suggestion","lib/url"],function(a,b,c){var d,e=a("lib/collection"),f=a("models/suggestion"),g=a("lib/url");d=c.exports=e.extend({model:f,defaults:{limit:10,category:null,query:null},baseUrl:function(){return g.stringify({path:["search","suggest",this.options.category],query:{q:this.options.query,highlight_mode:"offsets"}})},parse:function(a){return a.suggestions.map(function(a){return a.resource_type=a.kind.toLowerCase()==="user"?"user":"sound",a})}},{hashFn:function(a,b){return[b.query,b.category||"all"].join("_")}})}),
define("views/search/suggestion-item",["require","exports","module","lib/views/mixins/audible-control","lib/event-bus","lib/helpers/search-helper","models/suggestion","lib/tracking/tracking-bus","vendor/usertext/usertext","lib/view","views/search/suggestion-item.css","views/search/suggestion-item.tmpl"],function(a,b,c){function l(){var a=this.model,b=a.get("kind");i.action("navigate",b,{level:"search",chapter:"suggestions"}),b==="track"&&!a.isPlaying()&&this.playAudible(a,{userInitiated:!0,context:this.getContextData()}),f.trigger("suggestion-item:click")}var d,e=a("lib/views/mixins/audible-control"),f=a("lib/event-bus"),g=a("lib/helpers/search-helper"),h=a("models/suggestion"),i=a("lib/tracking/tracking-bus"),j=a("vendor/usertext/usertext"),k=a("lib/view");d=c.exports=k.extend(e,{css:a("views/search/suggestion-item.css"),template:a("views/search/suggestion-item.tmpl"),className:"suggestionItem sc-media g-font-16",ModelClass:h,requiredAttributes:{user:["query","avatar_url","permalink"],sound:["query","artwork_url","user"]},events:{"click .suggestedLink":l},getTemplateData:function(a){a.isUser=this.model.get("kind")==="user",a.className=a.isUser?"suggestedUser":"suggestedSound",a.query=g.highlightText(a.query,a.highlights),a.query=j(a.query,{paragraphs:!1,links:!1,userlinks:!1,whitelist:["b"]})}})}),
define("views/search/suggestions-list.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function j(a,b){var d="";return d+=' <h1 class="search__noresult search__banner g-font-20">'+h(c.$t.call(a,"Sorry, nothing matches your search",{hash:{},data:b}))+"</h1>\n",d}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f="",g,h=this.escapeExpression,i=this;g=c["if"].call(b,b&&b.showMessage,{hash:{},inverse:i.noop,fn:i.program(1,j,e),data:e});if(g||g===0)f+=g;return f+="\n",f})}),
define("views/search/suggestions-list.css",["require","exports","module","dpi"],function(a,b,c,d){var e=c.exports=document.createElement("style"),f=d(".suggestionsList{height:100%;color:#333;background-color:#fff;border-top:1px solid #f7f7f7}");e.styleSheet?e.styleSheet.cssText=f:e.appendChild(document.createTextNode(f)),f=null}),
define("views/search/search.css",["require","exports","module","dpi"],function(a,b,c,d){var e=c.exports=document.createElement("style"),f=d(".search{background:#fff}.search__banner{padding-top:140px;color:#666;text-align:center;margin:0 40px;background-position:50% 60px;background-repeat:no-repeat;background-size:48px 48px}.search__noresult{background-image:url(https://m.soundcloud.com/assets/images/ldpi/search/search_noresult-bd02f9a1.png)}.search__blank{background-image:url(https://m.soundcloud.com/assets/images/ldpi/search/search_blank-bd02f9a1.png);padding-bottom:100%}");e.styleSheet?e.styleSheet.cssText=f:e.appendChild(document.createTextNode(f)),f=null}),
define("lib/views/mixins/overlay",["require","exports","module","$","underscore","lib/event-bus","lib/helpers/client-environment-helper","lib/css-transitions","lib/scroll-bouncing-fix","lib/mixin"],function(a,b,c){function l(){this.close()}var d,e=a("$"),f=a("underscore"),g=a("lib/event-bus"),h=a("lib/helpers/client-environment-helper").device,i=a("lib/css-transitions"),j=a("lib/scroll-bouncing-fix"),k=a("lib/mixin");d=c.exports=new k({applyTo:function(a){a.defaults=f.defaults(a.defaults||{},{Subview:null,subviewArgs:null,parentEl:null})},defaults:{transitions:null,onOpen:e.noop,onSyncOpen:e.noop,onClose:e.noop},after:{renderDecorate:function(){h.iOS&&j.call(this),this.$el.addClass("g-z-index-overlay"),g.on("layout:change",l,this)}},before:{dispose:function(){g.off("layout:change",l)}},open:function(){this.isOpened=!0,this.rerender(),this.transitions&&this.transitions["in"]&&i[this.transitions["in"]](this.el,this.onOpen.bind(this)),(f.result(this,"parentEl")||document.body).appendChild(this.el),this.createContentView(),(!this.transitions||!this.transitions["in"])&&this.onOpen(),this.onSyncOpen()},close:function(){if(!this.isOpened)return;this.isOpened=!1,this.transitions&&this.transitions.out?i[this.transitions.out](this.el,this._onClose.bind(this)):this._onClose()},_onClose:function(){this.detach(),this.onClose()},createContentView:function(){if(this.getContentView()||!this.options.Subview)return;var a=this.options,b=a.Subview,c=f.result(a,"subviewArgs"),d;d=this.addSubview(new b(f.extend({resource_id:a.resource_id,resource_type:a.resource_type},c)),"contentView"),this.el.appendChild(d.render().el)},getContentView:function(){return this.subviews.contentView},detach:function(){var a=f.result(this,"parentEl")||document.body;e(a).children(this.el)[0]&&a.removeChild(this.el)}})}),
define("lib/views/fullscreen-overlay.css",["require","exports","module","dpi"],function(a,b,c,d){var e=c.exports=document.createElement("style"),f=d(".fullscreen-overlay{position:fixed;width:100%;left:0;top:0;bottom:0}.fullscreen-overlay-show-header{margin-top:44px}");e.styleSheet?e.styleSheet.cssText=f:e.appendChild(document.createTextNode(f)),f=null}),
define("lib/helpers/map-to-html-attrs-helper",["require","exports","module","underscore"],function(a,b,c){var d,e=a("underscore");d=c.exports=function(a){var b=[],c,d;return e.each(a,function(a,f){c=f+'="',d=[],e.isObject(a)?e.each(a,function(a,b){d.push(b+":"+a)}):d.push(a),b.push(c+d.join(";")+'"')}),b.join(" ")}}),
define("models/suggestion",["require","exports","module","models/sound","models/user"],function(a,b,c){var d,e=a("models/sound"),f=a("models/user");d=c.exports=function(a,b){var c=a.resource_type,d;return delete a.resource_type,c==="user"?d=new f(a,b):d=new e(a,b),d},d.getClass=function(a){var b=a.resource_type;return b==="user"?f:e}}),
define("lib/views/mixins/audible-control",["require","exports","module","underscore","lib/play-manager","lib/mixin"],function(a,b,c){function h(a,b){var c,d=e.extend(b||{},{audible:a});return this.bubble?c=this.bubble("requestPlayContext",d):c={data:d},c}var d,e=a("underscore"),f=a("lib/play-manager"),g=a("lib/mixin");d=c.exports=new g({toggleAudible:function(a,b){this[a.isPlaying()?"pauseAudible":"playAudible"](a,b)},playAudible:function(a,b){f.saveLayout(),f.play(a,this.getPlayContext(a,b))},pauseAudible:function(a,b){f.pause(a,this.getPlayContext(a,b))},getPlayContext:function(a,b){var c=h.call(this,a,b);return c.data},toggleSource:function(a,b){var c=f.getCurrentSound();f.source===a&&f.sourceCursor>-1&&c&&c.isPlaying()?f.pauseCurrent(b):(f.saveLayout(),f.playSource(a,b))}})}),
define("lib/helpers/search-helper",["require","exports","module","underscore"],function(a,b,c){var d,e=a("underscore"),f=["q","q[fulltext]","filter.duration","filter.created_at","filter.license","filter.genre","filter.genre_or_tag","filter.place"];d=c.exports={getValidParams:function(a){return e.pick(a,f)},highlightText:function(a,b,c){var d=e.extend({pre:"<b>",post:"</b>"},c),f=a.split(""),g;if(!b)return a;for(g=b.length;g--;)f.splice(b[g].post,0,d.post),f.splice(b[g].pre,0,d.pre);return f.join("")}}}),
define("vendor/usertext/usertext",["require","exports","module"],function(a,b,c){(function(){var a,b,d,e,f,g,h,i,j=/\b((?:https?:\/\/|www\d{0,3}\.|(?:[a-z0-9\-]+\.)+[a-z]{2,4}\/)[^\s'â€™"]*[^\s`!()\[\]{};:'".,<>?Â«Â»â€œâ€â€˜â€™])/ig,k=/(\b(?:[0-5]?[0-9])(?::[0-5][0-9]){1,2}\b)/g,l=/([a-z0-9._%+\-]+@[a-z0-9.\-]+\.[a-z]{2,6})/gi,m=/(\s|[^\w]|^)@([\w\-]+)/g,n=/( |^)(#([\w-]+))/gm,o=/\{\{\b((?:https?:\/\/|www\d{0,3}\.|(?:[a-z0-9\-]+\.)+[a-z]{2,4}\/)\S*[^\s`!()\[\]{};:'".,<>?Â«Â»â€œâ€â€˜â€™])\}\}/ig,p=/\{\{(?:mailto:)?([a-z0-9._%+\-]+@[a-z0-9.\-]+\.[a-z]{2,6})\}\}/gi,q=/\{\{@([\w\-]+)\}\}/gi,r=/^((?:https?:\/\/)?(?:www\.|m\.)?soundcloud\.(?:com|dev))\/?/i,s=/^(?:ht|f)tps?:\/\//i,t=/(?:[ \t]*\r?\n[ \t]*){2,}/,u=/[ \t][ \t]+/g;b={paragraphs:!0,links:!0,externalLinks:!0,internalLinks:!0,userLinks:!0,deepLinks:!1,whitelist:["b","i","em"],internalLinksBaseUrl:"/",isOpeningNewWindow:!1,maxLength:null,truncateExternalLinks:!0,maxExternalLinksLength:50,hashtagLinks:!0},d=function(a){var b,c,d,e,f,g;f=[].slice.call(arguments,1);for(b=0,c=f.length;b<c;++b){e=f[b];for(g in e)e[g]!==d&&(a[g]=e[g])}return a},e=function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")},f=function(a){return a.textContent||a.innerText||""},i=function v(a,b){b(a),a=a.firstChild;while(a)v(a,b),a=a.nextSibling},g=function(a,b){if(a.length<b)return a;var c=document.createElement("div"),d=document.createElement("div"),e,f;return e=function(a){if(b>0){var c=a.data.length;b-=c,b<=0&&(a.data=a.substringData(0,a.data.length+b))}else a.data=""},f=function(a,c){var d=a.firstChild,e;if(d)do d.nodeType===3?c(d):d.nodeType===1&&f(d,c);while((d=d.nextSibling)&&b>0);while(d)e=d,d=d.nextSibling,a.removeChild(e)},d.innerHTML=c.innerHTML=a,f(c,e),c.innerHTML+(c.innerHTML===d.innerHTML?"":"&hellip;")},h=function(a,b,c){a=c?a:a.replace(s,"");var d,e,f=/\.[a-z]{2,4}\//,g=a.match(f);return g&&g[0]&&a.length>b?(d=a.search(f)+g[0].length,e=Math.floor((b-d)/2),a.slice(0,d+e)+"&hellip;"+a.slice(-e)):a},a=function(a,c){var f=d({},b,c),v,w,x=f.whitelist&&f.whitelist.slice(),y=document.createElement("div");if(typeof a!="string")return"";f.links?!f.userLinks&&!f.internalLinks&&!f.externalLinks?f.links=!1:x.push("a"):f.userLinks=f.internalLinks=f.externalLinks=!1,j.lastIndex=m.lastIndex=l.lastIndex=0,a=a.replace(/<\/p>/g,"\n\n").replace(/<br\s*\/?>/g,"\n").replace(u," "),x&&x.length?a=a.replace(new RegExp("<(?!\\s*\\/?("+x.join("|")+")\\b)[^>]*>","ig"),""):a=a.replace(/<.*?>/g,""),y.innerHTML=a,f.links&&i(y,function(a){a.nodeType===3?a.parentNode.nodeName.toLowerCase()!=="a"&&(a.nodeValue=a.nodeValue.replace(j,"{{$1}}").replace(l,"{{mailto:$1}}").replace(m,"$1{{@$2}}")):a.nodeName==="A"&&(r.test(a.href)&&(a.href=a.href.replace(r,f.internalLinksBaseUrl),a.removeAttribute("target")),a.children.length||(a.innerHTML=h(a.innerHTML,f.maxExternalLinksLength,!0)))}),a=y.innerHTML,f.links&&(a=a.replace(o,function(a,b){return f.internalLinks&&r.test(b)?'<a href="'+b.replace(r,f.internalLinksBaseUrl)+'">'+b.replace(s,"")+"</a>":f.externalLinks?'<a href="'+(s.test(b)?b:"http://"+b)+'" rel="nofollow" target="_blank">'+h(b,f.maxExternalLinksLength)+"</a>":b}).replace(p,'<a href="mailto:$1">$1</a>').replace(q,'@<a href="'+f.internalLinksBaseUrl+'$1"'+(f.isOpeningNewWindow?' target="_blank"':"")+">$1</a>"),f.hashtagLinks&&(a=a.replace(n,'$1<a href="/tags/$3">$2</a>')),f.deepLinks&&(a=a.replace(k,'<a href="#t=$1">$1</a>'))),f.maxLength&&(a=g(a,f.maxLength));if(f.paragraphs){a=a.split(t);for(v=0,w=a.length;v<w;v++)a[v]=e(a[v]),a[v]=a[v].replace(/\r?\n/g,"<br>"),a[v]="<p>"+a[v]+"</p>";a=a.join("")}else a=a.replace(/[\r\n]+/g," ").replace(u," ");return a},a.withDefaults=function(c){var e=d({},b,c);return function(b,c){var f=c?d({},e,c):e;return a.call(this,b,f)}},typeof c!="undefined"&&c.exports?c.exports=a:(global=function(){return this}(),global.SC=global.SC||{},global.SC.usertext=a)})()}),
define("views/search/suggestion-item.css",["require","exports","module","dpi"],function(a,b,c,d){var e=c.exports=document.createElement("style"),f=d(".suggestionItem{display:block;height:50px}.suggestedLink{height:50px;display:block;padding:0 16px;color:#333}.suggestedResult{height:50px;display:block;line-height:50px;border-bottom:1px solid #d6d6d6;padding:0 0 0 32px}.suggestedLink:active{background:#f2f2f2}.suggestedUser>.suggestedResult{background:url(https://m.soundcloud.com/assets/images/ldpi/suggestions/user-8fcba46c.png) 0 14px no-repeat;background-size:18px 18px}.suggestedSound>.suggestedResult{background:url(https://m.soundcloud.com/assets/images/ldpi/suggestions/sound-8fcba46c.png) 0 16px no-repeat;background-size:18px 18px}");e.styleSheet?e.styleSheet.cssText=f:e.appendChild(document.createTextNode(f)),f=null}),
define("views/search/suggestion-item.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function k(a,b){return h(c.$route.call(a,"user",a,{hash:{},data:b}))}function l(a,b){return h(c.$route.call(a,"listen",a,{hash:{},data:b}))}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f="",g,h=this.escapeExpression,i="function",j=this;f+='<a class="suggestedLink '+h((g=b&&b.className,typeof g===i?g.apply(b):g))+'" href="',g=c["if"].call(b,b&&b.isUser,{hash:{},inverse:j.program(3,l,e),fn:j.program(1,k,e),data:e});if(g||g===0)f+=g;f+='"> <span class="suggestedResult">',g=(g=b&&b.query,typeof g===i?g.apply(b):g);if(g||g===0)f+=g;return f+="</span>\n</a>\n",f})}),
define("lib/css-transitions",["require","exports","module","$","underscore"],function(a,b,c){function m(a,b,c){o(a,b,{"in":j,out:k,transitionClass:i},c)}function n(a,b,c){o(a,b,{"in":g,out:h,transitionClass:f},c)}function o(a,b,c,f){var g=a?c.out:c["in"],h=a?c["in"]:c.out,i=d(b);i.addClass(c.transitionClass).addClass(g),setTimeout(function(){i.addClass(h).removeClass(g),e.delay(function(){i.removeClass(c.transitionClass).removeClass(g).removeClass(h),f&&f()},l)},16)}var d=a("$"),e=a("underscore"),f="g-transition-fade",g="g-transition-fade-in",h="g-transition-fade-out",i="g-transition-translate",j="g-transition-slide-top-in",k="g-transition-slide-top-out",l=300;b.fadeIn=n.bind(null,!0),b.fadeOut=n.bind(null,!1),b.slideTopIn=m.bind(null,!0),b.slideTopOut=m.bind(null,!1)}),
define("lib/scroll-bouncing-fix",["require","exports","module"],function(a,b,c){var d;d=c.exports=function(){this.$el.on("touchmove",function(a){a.preventDefault()})}}),
define("layouts/listen",["require","exports","module","config","config/error-messages","models/exception","lib/layouts/fullheight","lib/lingua","models/playlist","lib/promise","models/sound","lib/url"],function(a,b,c){function o(a,b,c){var d=k.defer();return l.resolve(a,b,c).done(d.resolve).fail(g.ajaxFatal(f.SOUND_NOT_FOUND)),d}function p(a){var b=k.defer(),c,d;return c=e.get("router").getRouteInfo("playlist"),d=c.route.exec(a),d?(d.shift(),c.handler.apply({apply:function(a,c){j.resolve(c.userPermalink,c.playlistPermalink,c.secretToken).done(b.resolve).fail(function(){b.resolve(null)})}},d)):b.resolve(null),b}function q(a,b){b&&(a=b.findSound(a)||a),this.setTitle(this.t("[[soundTitle]] by [[authorName]]",{soundTitle:a.get("title"),authorName:a.get("user").username}));var c={"l-main":["views/listen/listen-carousel",{resource_id:a.resource_id}],"l-footnote":["views/sound/sound-controls"]};return this.setViews(c)}var d,e=a("config"),f=a("config/error-messages"),g=a("models/exception"),h=a("lib/layouts/fullheight"),i=a("lib/lingua"),j=a("models/playlist"),k=a("lib/promise"),l=a("models/sound"),m=a("lib/url"),n=i.t("Take this track with you and enjoy the full SoundCloud experience with our free app.");d=c.exports=h.extend({performanceSelector:".soundControls__playPause",setup:function(a){var b=k.defer(),c,d=[];return d.push(o(a.userPermalink,a.soundPermalink,a.secretToken)),c=m.getQueryParam("in"),c&&d.push(p(c)),this.pageUrn="",k.all(d).then(function(a,b){return this.pageUrn=a.getUrn(),q.call(this,a,b)}.bind(this)).then(b.resolve),b},includeFooter:".l-footnote",getPageUrn:function(){return this.pageUrn},getUpsellText:function(){return n}})}),
define("config/error-messages",["require","exports","module"],function(a,b,c){var d;d=c.exports={UNKNOWN:{title:"We're sorry, there seems to be a problem here",message:"Please try refreshing the page"},PAGE_NOT_FOUND:{title:"We can't find this page"},SOUND_NOT_FOUND:{title:"We can't find this sound"},PLAYLIST_NOT_FOUND:{title:"We can't find this playlist"},USER_NOT_FOUND:{title:"We can't find this user"}}}),
define("models/exception",["require","exports","module","underscore","lib/event-bus","lib/model"],function(a,b,c){var d,e=a("underscore"),f=a("lib/event-bus"),g=a("lib/model");d=c.exports=g.extend({url:null,lastFetchTime:1,initialize:function(a){a=a||{},this.id||(a.id=this.id=this.cid,d.instances.set(this.id,this)),this.fatal=!!a.fatal,g.prototype.initialize.apply(this,arguments)}},{raise:function(a,b){var c=new d(a);c.release(),b=b||{};if(b.hard)throw c;f.trigger("exception",c)},ajaxFatal:function(a){return function(b,c){c!=="abort"&&d.raise(e.extend(a,{xhr:b,fatal:!0}))}},ajaxNonFatal:function(a){return function(b,c){c!=="abort"&&d.raise({message:a,xhr:b,fatal:!1})}}})}),
define("models/playlist",["require","exports","module","$","underscore","models/audible-interface","lib/backbone","lib/event-bus","lib/math","lib/model","lib/play-manager","models/sound","lib/helpers/title-helper","models/user","lib/url","lib/mixins/urn"],function(a,b,c){function s(a,b){var c=a[b?"on":"off"].bind(a);c("play",t,this),c("pause",u,this),c("finish",v,this),c("time",w,this),c("seeked",x,this)}function t(a){this._internalNavigation||(y.call(this,a,"play"),this._internalNavigation=!0)}function u(a){this._internalNavigation||(y.call(this,a,"pause"),this._internalNavigation=!0)}function v(a){a.sound===this.soundsCollection.last()&&(y.call(this,a,"pause"),y.call(this,a,"finish"))}function w(a){y.call(this,a,"time")}function x(a){y.call(this,a,"seeked")}function y(a,b){a.playlist=this,this.trigger(b,a),i.trigger("audio:"+b,a)}function z(){var a=[];f.each(this.get("tracks"),function(b){var c,d,e,g;e=this.soundsCollection.any(function(a){return a.id===b.id}),e||(g=new m(b),this.addSubmodel(g),d=f.extend({},b,{resource_id:{playlist_id:this.id,sound_id:b.id}}),c=new m(d,{suppressGlobalEvents:!0}),c.playlist=this,c.originalSound=g,a.push(c),s.call(this,c,!0))},this),this.soundsCollection.length===0?this.soundsCollection.reset(a):this.soundsCollection.add(a,{silent:!0}),A(this.soundsCollection)}function A(a){a.reduce(function(a,b){return b.timeOffset=a,a+b.get("duration")},0)}var d,e=a("$"),f=a("underscore"),g=a("models/audible-interface"),h=a("lib/backbone"),i=a("lib/event-bus"),j=a("lib/math"),k=a("lib/model"),l=a("lib/play-manager"),m=a("models/sound"),n=a("lib/helpers/title-helper"),o=a("models/user"),p=a("lib/url"),q=a("lib/mixins/urn"),r;r=h.Collection.extend({model:m,fetch:function(){return this.playlist.fetch.apply(this.playlist,arguments)},initialize:function(a,b){this.playlist=b.playlist},hasDataForView:function(){return!!this.playlist.attributes.tracks},isFullyPopulated:function(){return!0},_usageCount:function(){return 1},hold:e.noop,release:e.noop}),d=c.exports=g.extend(q,{resource_type:"playlist",urnPrefix:"soundcloud:playlists",submodelMap:{tracks:m,user:o},soundsCollection:null,currentSoundCursor:0,_isPlayActionQueued:!1,_internalNavigation:!1,setup:function(){g.prototype.setup.apply(this,arguments),this.soundsCollection=new r(null,{playlist:this})},baseUrl:function(){return p.stringify({path:["playlists",this.id]})},parse:function(a){return a=k.prototype.parse.apply(this,arguments),a.secret_token&&a.tracks&&a.tracks.forEach(function(b){b.sharing!=="public"&&(b.secret_token=a.secret_token)}),a.sharing==="private"&&(a.track_count=Math.max(a.track_count,a.tracks.length)),a},createSubmodel:function(a,b){b==="tracks"?z.call(this):k.prototype.createSubmodel.apply(this,arguments)},getSoundsCollection:function(){return this.soundsCollection},getSounds:function(){return this.soundsCollection.models},getNumSounds:function(){return this.soundsCollection.length},getSoundAt:function(a){return this.soundsCollection.at(a===0?0:this.getSoundIndexAt(a))},getSoundIndex:function(a){return this.soundsCollection.indexOf(a)},getSoundIndexAt:function(a){var b,c=this.getSounds();for(b=c.length;b--;)if(a>=c[b].timeOffset)return b},getRelativeTrackLength:function(a){return j.precise(this.soundsCollection.at(a).get("duration")/this.get("duration"),7)},findSound:function(a){return this.findSoundById(a.id)},findSoundById:function(a){return this.soundsCollection.get(a)},getPrevSound:function(){return this.soundsCollection.at(this.currentSoundCursor-1)},getCurrentSound:function(){return this.soundsCollection.at(this.currentSoundCursor)},getNextSound:function(){return this.soundsCollection.at(this.currentSoundCursor+1)},getFirstSound:function(){return this.soundsCollection.at(0)},getLastSound:function(){return this.soundsCollection.at(this.soundsCollection.length-1)},containsSound:function(a){return!!this.findSoundById(a)},play:function(a){this.soundsCollection.length?(this._internalNavigation=!1,this.getCurrentSound().audio.play(a)):this.lastFetchTime||(this._isPlayActionQueued=!0,this.fetch().done(function(){this._isPlayActionQueued&&(this._isPlayActionQueued=!1,this.play(a))}.bind(this)))},pause:function(a){this._isPlayActionQueued=!1,this.soundsCollection&&this.soundsCollection.length&&(this._internalNavigation=!1,this.getCurrentSound().audio.pause(a))},seek:function(a){if(this.soundsCollection.length){var b=this.getCurrentSound(),c=b.isPlaying(),d=this.getSoundIndexAt(a),e=this.soundsCollection.at(d);e.seek(a-e.timeOffset),b!==e&&(this._internalNavigation=!0,b.audio.pause(),this.currentSoundCursor=d,c&&(this._internalNavigation=!0,l.play(e,{keepSource:!0,userInitiated:!0}),n.update()))}},currentTime:function(){var a=this.getCurrentSound();return a?a.audio.currentTime()+a.timeOffset:0},isBuffering:function(){var a=this.getCurrentSound();return a&&a.isBuffering()||this.soundsCollection.some(function(a){return a.isBuffering()})},isPlaying:function(){var a=this.getCurrentSound();return a&&a.isPlaying()||this.soundsCollection.some(function(a){return a.isPlaying()})},isPlayable:function(){return this.soundsCollection.every(function(a){return a.isPlayable()})},isProcessing:function(){return this.soundsCollection.length?this.soundsCollection.any(function(a){return a.isProcessing()}):!1},loadProgress:function(){var a=this.getCurrentSound();return a?(a.timeOffset+a.loadProgress()*a.duration())/this.duration():0}},{urnPrefix:"soundcloud:playlists",onCleanup:function(a){a.soundsCollection.each(function(a){a.playlist=null,a.release()}),a.soundsCollection.off(),delete a.soundsCollection,g.onCleanup(a)},resolve:function(a,b,c){return k._resolve(this,[a,"sets",b,c],function(c){var d=c.get("user");return d&&c.get("permalink")===b&&d.permalink===a})}})}),
define("views/listen/listen-carousel",["require","exports","module","underscore","$","lib/views/mixins/audible-control","config","lib/views/mixins/fetch-experiments","lib/views/mixins/has-queue-source","lib/play-manager","router","models/sound","views/sound/sound","lib/helpers/style-helper","lib/view","lib/window-events","views/listen/listen-carousel.css","views/listen/listen-carousel.tmpl"],function(a,b,c){function t(a){var b=a?"on":"off";q[b]("resize:debounced",I,this),k[b]("change:currentSound",u,this)}function u(a){a.isGoingForward&&a.prev?v.call(this,a.current.resource_id,!0):a.isGoingForward===!1&&v.call(this,a.current.resource_id),y(a.current)}function v(a,b){var c=b?0:3,d=b?2:0,e=b?A:z,f=this.$("."+this.itemClassName);x.call(this,a,d),b?B.call(this,[f[1],f[2]],"left"):B.call(this,[f[0],f[1]],"right"),this.addDeferred(setTimeout(function(){e(this.getElement("wrapper")[0],D.call(this)),f=this.$("."+this.itemClassName),f[c].parentNode.removeChild(f[c]),C([f[1],f[2]])}.bind(this),r))}function w(a){var b="sound_"+a,c=this.subviews[b];return c||(c=new n({resource_id:a}),this.addSubview(c.render(),b)),c}function x(a,b){var c=w.call(this,a),d=this.$("."+this.itemClassName)[b];d&&(d.innerHTML="",d.appendChild(c.el))}function y(a){var b=l.getRoute("listen",a);h.get("router").navigate(b,{trigger:!1,replace:!0})}function z(a,b){a.insertBefore(b,a.firstChild)}function A(a,b){a.appendChild(b)}function B(a,b){b=b==="left"?-this._carouselWidth:this._carouselWidth;var c="transform: translate3d("+b+"px , 0, 0);";a.forEach(function(a){a.className+=" g-transition-translate",o(a,c)})}function C(a){var b="transform: none;";a.forEach(function(a){f(a).removeClass("g-transition-translate"),o(a,b)})}function D(){var a=document.createElement("div");return a.className=this.itemClassName,E.call(this,a,this._carouselWidth),a}function E(a,b){a.style.width=b+"px"}function F(a){this.elWidth=this.el.offsetWidth,this.$el.find(".listenCarousel__itemWrapper").each(function(b){E(b,a)})}function G(a){var b=this.getElement("wrapper")[0],c=-1*a;o(b,"transform: translate("+c+"px, 0)"),b.style.width=3*a+"px"}function H(){return this._carouselWidth=this.el.offsetWidth,this._carouselWidth}function I(){var a=H.call(this);G.call(this,a),F.call(this,a)}var d,e=a("underscore"),f=a("$"),g=a("lib/views/mixins/audible-control"),h=a("config"),i=a("lib/views/mixins/fetch-experiments"),j=a("lib/views/mixins/has-queue-source"),k=a("lib/play-manager"),l=a("router"),m=a("models/sound"),n=a("views/sound/sound"),o=a("lib/helpers/style-helper"),p=a("lib/view"),q=a("lib/window-events"),r=250,s;d=c.exports=p.extend(i,g,j,{css:a("views/listen/listen-carousel.css"),template:a("views/listen/listen-carousel.tmpl"),className:"listenCarousel",itemClassName:"listenCarousel__itemWrapper",element2selector:{wrapper:".listenCarousel__wrapper"},states:{transitionTranslate:function(a){this.getElement("wrapper")[a?"addClass":"removeClass"]("g-transition-translate")}},ModelClass:m,getQueueSource:function(){return this.model.playlist||this.model},cursor:-1,setup:function(){t.call(this,!0)},dispose:function(){t.call(this,!1)},renderDecorate:function(){this.experiments.get("mweb_listening","fake_auto_play")==="variant_b"&&this.$el.one("pointerdown",s.bind(this)),this.whenInserted().done(function(){I.call(this),x.call(this,this.model.resource_id,1)}.bind(this))},teardown:function(){clearTimeout(this._fetchNeighborSoundsId)}}),s=e.once(function(){var a=this.getQueueSource();a&&!a.isPlaying()&&this.playAudible(a,{userInitiated:!0})})}),
define("views/sound/sound-controls",["require","exports","module","underscore","lib/event-bus","lib/play-manager","lib/view","views/sound/sound-controls.css","views/sound/sound-controls.tmpl"],function(a,b,c){function k(a){this.getState("disabled")||g[a==="prev"?"playPrev":"playNext"]({userInitiated:!0})}function l(){this.getState("disabled")||g.toggleCurrent({userInitiated:!0})}function m(){var a=g.getCurrentSound(),b=!!a&&!!a.isLoading(),c=!g.hasCurrentSound(),d=c||!g.hasPrevSound(),e=c||!g.hasNextSound();this.toggleState("loading",b).toggleState("prevDisabled",d).toggleState("nextDisabled",e).toggleState("disabled",c)}function n(){this.toggleState("paused",!0).toggleState("playing",!1),m.call(this)}function o(){this.toggleState("playing",!0).toggleState("paused",!1),m.call(this)}function p(){this.toggleState("initializing",!0),this.addDeferred(e.delay(function(){this.toggleState("initializing",!1),this.toggleState("initialized",!0)}.bind(this),i))}function q(){this.toggleState("scrubbing",!0)}function r(){this.toggleState("scrubbing",!1)}var d,e=a("underscore"),f=a("lib/event-bus"),g=a("lib/play-manager"),h=a("lib/view"),i=2e3,j=250;d=c.exports=h.extend({css:a("views/sound/sound-controls.css"),template:a("views/sound/sound-controls.tmpl"),className:"soundControls sc-selection-disabled",tagName:"section",events:{"click .soundControls__prev":"onClickPrev","click .soundControls__next":"onClickNext","click .soundControls__playPause":l},states:{loading:"loading",playing:"playing",paused:"paused",prevDisabled:"prevDisabled",nextDisabled:"nextDisabled",disabled:"disabled",initializing:"initializing",initialized:"initialized"},setup:function(){this.listenTo(f,"audio:play",o).listenTo(f,"audio:pause",n).listenTo(f,"scrub:start",q).listenTo(f,"scrub:end",r).listenToOnce(f,"audio:play",p)},renderDecorate:function(){var a=g.getCurrentSound();a&&a.isPlaying()&&this.toggleState("initialized",!0).toggleState("playing",!0).toggleState("paused",!1)},dispose:function(){this.stopListening()},onClickNext:e.debounce(function(){k.call(this,"next")},j,!0),onClickPrev:e.debounce(function(){k.call(this,"prev")},j,!0)})}),
define("lib/math",["require","exports","module"],function(a,b,c){c.exports={clamp:function(a,b,c){return Math.min(c,Math.max(b,a))},precise:function(a,b){return b=Math.pow(10,b||0),Math.round(a*b)/b}}}),
define("lib/views/mixins/fetch-experiments",["require","exports","module","$","vendor/experiments/experiments","config/experiments","vendor/event-logger/event-logger","lib/mixin","lib/tracking/tracking-core","lib/url"],function(a,b,c){function o(){return m||(m=e.Deferred()),m}function p(){return l||(l=f.initialize(g).fetchAssignments().done(function(a){o().resolve(),f.setExperimentsFromQueryParams(k.getQueryParams()),h.setExperiments(a)}).fail(function(){l=null,m=null,j.whenRequestAllowed=n})),l}var d,e=a("$"),f=a("vendor/experiments/experiments"),g=a("config/experiments"),h=a("vendor/event-logger/event-logger"),i=a("lib/mixin"),j=a("lib/tracking/tracking-core"),k=a("lib/url"),l,m,n=j.whenRequestAllowed;d=c.exports=new i({experiments:f,around:{hasData:function(a){return a.call(this)&&f.isUpToDate(f.getAssignments(),g.version)},fetchData:function(a,b){var c=[b?a.call(this,b):e.Deferred().resolve()],d=e.Deferred();return this.addDeferred(d),f.isUpToDate(f.getAssignments(),g.version)||c.push(p.call(this)),e.when(c).done(function(a){d.resolve(a)}).fail(function(){d.reject()}),d.done(this.rerender.bind(this)),d}},before:{setup:function(){f.getAssignments()||(j.whenRequestAllowed=o)}}})}),
define("lib/views/mixins/has-queue-source",["require","exports","module","underscore","lib/event-bus","lib/mixin","lib/play-manager","lib/url"],function(a,b,c){function j(a){var b=a?"on":"off";f[b]("audio:play",k,this)[b]("audio:pause",l,this)}function k(a){m.call(this,a.sound)}function l(a){m.call(this,a.sound)}function m(a){this.toggleState("playing",n.call(this,a))}function n(a){return a=a||h.getCurrentSound(),!!(a&&a.isPlaying()&&this.getQueueSource().getSounds().indexOf(a)>-1)}function o(a){var b=a.data,c=b.audible,d=this.getQueueSource();return d&&h.indexOfSoundInSource(c.getCurrentSound(),d)>-1}var d,e=a("underscore"),f=a("lib/event-bus"),g=a("lib/mixin"),h=a("lib/play-manager"),i=a("lib/url");d=c.exports=new g({defaults:{getQueueSource:function(){return this.collection||this.model},getRestoreUrl:function(){return i.currentPath()}},applyTo:function(a){a.bubbleEvents=e.extend(a.bubbleEvents||{},{requestPlayContext:"onRequestPlayContext"})},onRequestPlayContext:function(a){o.call(this,a)&&(a.stopPropagation(),e.extend(a.data,{source:this.getQueueSource(),restoreUrl:this.getRestoreUrl()}))},before:{setup:function(){j.call(this,!0)},dispose:function(){j.call(this,!1)},renderDecorate:function(){var a=this.getQueueSource(),b=0;a&&h.setInitialSource(a,b,this.getRestoreUrl()),m.call(this)},teardown:function(){var a=this.getQueueSource();a&&h.unsetInitialSource(a)}}})}),
define("views/sound/sound",["require","exports","module","lib/views/mixins/audible-control","lib/event-bus","lib/views/mixins/fullscreen-loader","lib/views/mixins/has-queue-source","lib/helpers/image-helper","lib/play-manager","models/sound","lib/views/mixins/swipeable","lib/tracking/tracking-bus","lib/view","views/sound/sound.css","views/sound/sound.tmpl"],function(a,b,c){function o(){this.model.get("playable")||this.getElement("info").addClass("disabled")}function p(){m.action("navigate","user")}function q(){this.toggleAudible(this.model,{userInitiated:!0,context:this.getContextData()})}function r(){this.toggleState("paused",!0),this.toggleState("playing",!1)}function s(){this.toggleState("paused",!1),this.toggleState("playing",!0)}function t(){this.getState("paused")||(this._wasPaused=this.getState("paused"),this.toggleState("paused",!0))}function u(){this.toggleState("paused",this._wasPaused)}var d,e=a("lib/views/mixins/audible-control"),f=a("lib/event-bus"),g=a("lib/views/mixins/fullscreen-loader"),h=a("lib/views/mixins/has-queue-source"),i=a("lib/helpers/image-helper"),j=a("lib/play-manager"),k=a("models/sound"),l=a("lib/views/mixins/swipeable"),m=a("lib/tracking/tracking-bus"),n=a("lib/view");d=c.exports=n.extend(g,e,h,l,{swipeableSelector:".sound__artwork",ModelClass:k,css:a("views/sound/sound.css"),template:a("views/sound/sound.tmpl"),className:"sound g-box-full",element2selector:{info:".sound__info",artwork:".sound__artworkImage"},requiredAttributes:["user","title"],events:{"click .sound__artwork":q,"click .sound__info":p},bubbleEvents:{scrubStart:t,scrubEnd:u},setup:function(){this._wasPaused=!1,this.listenTo(f,"audio:pause",r).listenTo(f,"audio:play",s).model.on("change:playable",this.rerender,this)},dispose:function(){this.stopListening().model.off("change:playable",this.rerender,this)},renderDecorate:function(){var a=i.urlFrom(this.model.toJSON(),500),b=this.getElement("artwork")[0];i.fadeInBackground(a,b),o.call(this),this.model.playlist&&j.backfillHistoryFromPlaylist(this.model,this.model.playlist)},getQueueSource:function(){return this.model.playlist||this.model},onSwipeLeft:function(){j.playNext({userInitiated:!0})},onSwipeRight:function(){j.playPrev({userInitiated:!0})}})}),
define("lib/helpers/style-helper",["require","exports","module"],function(a,b,c){function g(a,b,c){return a.style[b]=c,!0}function h(a){return a in document.documentElement.style}var d,e={transform:["webkit"]},f=Object.keys(e);d=c.exports=function(a,b){b=b.replace(";","");var c=b.split(":"),d=c[0],i=c[1],j=!1;return h(d)&&(j=g(a,d,i)),!j&&f.indexOf(d)>-1&&(j=e[d].some(function(b){var c="-"+b+"-"+d;if(h(c))return g(a,c,i)})),j}}),
define("lib/window-events",["require","exports","module","$","underscore","lib/backbone","lib/support"],function(a,b,c){function k(a,b){var c=b+"d",e=a==="resize"?l(c):d.trigger.bind(d,a+":"+c);return f[b](e,j)}function l(a){var b=window.innerWidth,c=window.innerHeight,e=d.trigger.bind(d,"resize:x:"+a),f=d.trigger.bind(d,"resize:y:"+a),g=d.trigger.bind(d,"resize:"+a);return function(a){var d=window.innerWidth,h=window.innerHeight;d!==b&&e(a),h!==c&&f(a),g(a),c=h,b=d}}var d,e=a("$"),f=a("underscore"),g=a("lib/backbone"),h=a("lib/support"),i=h.orientationChange?"orientationchange":"resize",j=200;d=c.exports=f.extend({},g.Events),e(window).on(i,k("resize","debounce")).on(i,k("resize","throttle")).on("scroll",k("scroll","debounce")).on("scroll",k("scroll","throttle"))}),
define("views/listen/listen-carousel.css",["require","exports","module","dpi"],function(a,b,c,d){var e=c.exports=document.createElement("style"),f=d(".listenCarousel{position:relative;width:100%;height:100%;overflow:hidden}.listenCarousel__wrapper{height:100%}.listenCarousel__itemWrapper{float:left;height:100%}");e.styleSheet?e.styleSheet.cssText=f:e.appendChild(document.createTextNode(f)),f=null}),
define("views/listen/listen-carousel.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<div class="listenCarousel__wrapper"> <div class="listenCarousel__itemWrapper"></div> <div class="listenCarousel__itemWrapper"></div> <div class="listenCarousel__itemWrapper"></div>\n</div>\n'})}),
define("views/sound/sound-controls.css",["require","exports","module","dpi"],function(a,b,c,d){var e=c.exports=document.createElement("style"),f=d(".soundControls{height:80px;position:absolute;top:50%;left:0;right:0;margin-top:-40px;-webkit-transform:translate3d(0,0,0);pointer-events:none}.soundControls__control{background-position:0 0;background-repeat:no-repeat;background-size:100% auto;position:absolute;pointer-events:auto}.soundControls__prev,.soundControls__next{background-image:url(https://m.soundcloud.com/assets/images/ldpi/player/skip_button-e03e9a61.png);width:28px;height:19px;top:30px;opacity:0;-webkit-transition:opacity 2s cubic-bezier(1,.01,.81,1);transition:opacity 2s cubic-bezier(1,.01,.81,1)}.soundControls__prev{left:17px}.soundControls__next{right:17px;-webkit-transform:scaleX(-1);-ms-transform:scaleX(-1);transform:scaleX(-1)}.soundControls.disabled .soundControls__playPause,.soundControls.playing .soundControls__playPause:active,.soundControls.loading .soundControls__playPause:active{background-color:rgba(0,0,0,.5)}.soundControls.playing .soundControls__playPause,.soundControls.loading .soundControls__playPause{background-position:0 0}.soundControls__prev:active,.soundControls__next:active{background-position:0 -19px}.soundControls.disabled .soundControls__next,.soundControls.nextDisabled .soundControls__next,.soundControls.disabled .soundControls__prev,.soundControls.prevDisabled .soundControls__prev{display:none}.initialized .soundControls__playPause{opacity:0}.initializing .soundControls__next,.initializing .soundControls__prev,.paused .soundControls__next,.paused .soundControls__prev,.paused .soundControls__playPause{opacity:1}.paused .soundControls__next,.paused .soundControls__prev,.paused .soundControls__playPause{-webkit-transition:none;transition:none}.soundControls.scrubbing{display:none}");e.styleSheet?e.styleSheet.cssText=f:e.appendChild(document.createTextNode(f)),f=null}),
define("views/sound/sound-controls.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f="",g=this.escapeExpression;return f+='<a role="button" class="soundControls__control soundControls__prev g-touch-padding">'+g(c.$a11y.call(b,{hash:{screenreader:c.$t.call(b,"Previous track",{hash:{_comment:"Help text on prev button"},data:e})},data:e}))+'</a>\n<a role="button" class="g-play-button soundControls__playPause g-touch-padding">'+g(c.$a11y.call(b,{hash:{screenreader:c.$t.call(b,"Play or pause track",{hash:{_comment:"Help text on play/pause button"},data:e})},data:e}))+'</a>\n<a role="button" class="soundControls__control soundControls__next g-touch-padding">'+g(c.$a11y.call(b,{hash:{screenreader:c.$t.call(b,"Next track",{hash:{_comment:"Help text on next button"},data:e})},data:e}))+"</a>\n",f})}),
define("config/experiments",["require","exports","module","config","vendor/event-logger/event-logger","lib/support"],function(a,b,c){var d,e=a("config"),f=a("vendor/event-logger/event-logger"),g=a("lib/support");d=c.exports={version:"31-03-2015_15:30",availableLayers:["mweb_listening"],anonymousUserId:f.getAnonymousId(),assignmentServiceUrl:e.get("bff_api_host")+"assignments/",localStorageKey:"MW::local::assignments",localStorageEnabled:g.localStorage}}),
define("lib/views/mixins/fullscreen-loader",["require","exports","module","lib/views/loading","lib/mixin"],function(a,b,c){var d,e=a("lib/views/loading"),f=a("lib/mixin");d=c.exports=new f({override:{LoadingView:e,loadingViewArgs:function(){return{size:"fullscreen"}}}})}),
define("lib/views/mixins/swipeable",["require","exports","module","lib/mixin"],function(a,b,c){function f(a){var b=a.data.direction;b==="left"&&this.onSwipeLeft?this.onSwipeLeft():this.onSwipeRight&&this.onSwipeRight(),a.originalEvent.preventDefault()}var d,e=a("lib/mixin");d=c.exports=new e({defaults:{swipeableSelector:null},after:{renderDecorate:function(){this.$el.on("swipe",this.swipeableSelector,f.bind(this))}}})}),
define("views/sound/sound.css",["require","exports","module","dpi"],function(a,b,c,d){var e=c.exports=document.createElement("style"),f=d(".sound__info{position:absolute;z-index:1;top:20px;left:18px;right:18px}.sound__username{font-size:15px;line-height:22px}.sound__username a{color:#ccc}.sound__title{font-size:22px;line-height:1.3}.sound__controls{position:absolute;top:50%;left:0;right:0;height:80px;margin-top:-50px}.sound__infoContent{margin:0 0 4px}.sound__artwork,.sound__artworkOverlay{position:absolute;top:0;bottom:0;width:100%}.sound__artworkOverlay{height:100%;opacity:0;background:#000}.sound__playIndicator{-webkit-transform:translate3d(0,-3px,0);transform:translate3d(0,-3px,0)}.sound.playing .sound__playIndicator{-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}.sound__info.disabled>.sound__infoDisabled{display:block}.sound__infoDisabled{display:none;position:absolute;background:rgba(0,0,0,.2);top:0;left:0;right:0;bottom:0}.sound.paused .sound__artworkOverlay{opacity:.6}.sound.paused .sound__username,.sound.paused .sound__title{background:none;box-shadow:none}");e.styleSheet?e.styleSheet.cssText=f:e.appendChild(document.createTextNode(f)),f=null}),
define("views/sound/sound.tmpl",["vendor/handlebars-runtime","views/banner/banner","views/sound/waveform"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function k(a,b){var d="";return d+=" "+h(c.$view.call(a,"views/banner/banner",{hash:{},data:b}))+"\n",d}function l(a,b){var d="",e;d+=" ",e=c.$view.call(a,"views/banner/banner",{hash:{},inverse:i.noop,fn:i.program(4,m,b),data:b});if(e||e===0)d+=e;return d+="\n",d}function m(a,b){var d="";return d+=" "+h(c.$t.call(a,"We're sorry, track not available on mobile",{hash:{},data:b}))+" ",d}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f="",g,h=this.escapeExpression,i=this,j="function";f+='<div class="sound__playIndicator g-z-index-banner g-play-indicator"></div>\n<div class="sound__info"> <div class="sound__infoContent"> <h3 class="sound__username g-type-shrinkwrap-inline sc-truncate"> <a href="'+h(c.$route.call(b,"user",b&&b.user,{hash:{},data:e}))+'" class="g-touch-padding">'+h((g=(g=b&&b.user,g==null||g===!1?g:g.username),typeof g===j?g.apply(b):g))+'</a> </h3>\n</div> <div class="sound__infoContent"> <h2 class="sound__title g-type-shrinkwrap-inline">'+h((g=b&&b.title,typeof g===j?g.apply(b):g))+'</h2> </div>\n</div> <div class="sound__artwork"> <div class="sound__artworkOverlay"></div> <div class="sound__artworkImage sc-selection-disabled g-background-cover g-transition-fade g-transition-fade-out"></div>\n</div> ',g=c["if"].call(b,b&&b.playable,{hash:{},inverse:i.program(3,l,e),fn:i.program(1,k,e),data:e});if(g||g===0)f+=g;return f+=" "+h(c.$view.call(b,"views/sound/waveform",{hash:{resource_id:b&&b._resource_id,resource_type:b&&b._resource_type},data:e}))+"\n",f})}),
define("views/banner/banner",["require","exports","module","underscore","lib/view","views/banner/banner.css"],function(a,b,c){var d,e=a("underscore"),f=a("lib/view");d=c.exports=f.extend({className:"banner g-z-index-banner",css:a("views/banner/banner.css"),template:function(){return""},defaults:{message:null},setup:function(a){this.options.message=a.message||a.blockContent,this.toggleState("disabled",!0),e.bindAll(this,"setBanner")},renderDecorate:function(){this.whenInserted().done(function(){var a=this.options;!e.isEmpty(a)&&!e.isEmpty(e.compact(e.values(a)))&&this.setBanner(a)}.bind(this))},setBanner:function(a){if(!a||!a.message)return;var b=this.el,c=a.message;c&&this.getState("disabled")?(this.toggleState("disabled",!1),b.innerHTML=a.message,b.style.top=a.position):c&&!this.getState("disabled")?b.innerHTML=a.message:this.toggleState("disabled",!0)}})}),
define("views/sound/waveform",["require","exports","module","views/sound/waveform-canvas","models/sound","lib/helpers/style-helper","lib/view","views/sound/waveform.tmpl","views/sound/waveform.css"],function(a,b,c){function i(a){var b=a?"on":"off";this.model[b]("play pause",j,this),this.model[b]("position",k,this)}function j(){this.toggleState("playing",this.model.isPlaying())}function k(){this._isScrubbing||l.call(this,this.model.currentTime()/this.model.get("duration"))}function l(a){var b=this.subviews.waveformCanvasUnplayed.elWidth;g(this.getElement("waveformPlayed")[0],"transform: translateX("+(b-Math.floor(b*a))+"px)"),g(this.getElement("waveformUnplayed")[0],"transform: translateX("+ -Math.floor(b*a)+"px)")}function m(a){var b=this.subviews.waveformCanvasUnplayed.elWidth,c=this._currentSeek+a*b;this._currentSeek=Math.min(Math.max(0,c),b),this._isScrubbing&&(l.call(this,this._currentSeek/b),this.subviews.timeIndicator.manualProgress(this._currentSeek/b))}function n(){this._isScrubbing=!0,this.subviews.timeIndicator.toggleScrubbing(!0),this.toggleState("scrubbing",!0)}function o(){var a=this.subviews.waveformCanvasUnplayed.elWidth;this.model.seek(this.model.get("duration")*(this._currentSeek/a)),this._isScrubbing=!1,this.subviews.timeIndicator.toggleScrubbing(!1),this.toggleState("scrubbing",!1)}function p(a){m.call(this,a.data.delta)}var d,e=a("views/sound/waveform-canvas").Events,f=a("models/sound"),g=a("lib/helpers/style-helper"),h=a("lib/view");d=c.exports=h.extend({template:a("views/sound/waveform.tmpl"),css:a("views/sound/waveform.css"),className:"waveform sc-selection-disabled g-opacity-transition",ModelClass:f,element2selector:{waveformPlayed:".waveform__waveformCanvasPlayed > canvas",waveformUnplayed:".waveform__waveformCanvasUnplayed > canvas"},bubbleEvents:{scrubStart:n,scrub:p,scrubEnd:o},defaults:{upperPartHeight:.7},requiredAttributes:{playlist:["tracks"],sound:["id","waveform_url","state"]},setup:function(){this.toggleState("visual",this.options.visual),this._currentSeek=0,i.call(this,!0)},dispose:function(){i.call(this,!1)},renderDecorate:function(){this.subviews.waveformCanvasUnplayed.on(e.RENDERED,function(){this.toggleState("visible",!0),j.call(this)},this)},getTemplateData:function(a){var b=this.options;return{model:a,upperPartHeight:b.upperPartHeight,upperPartHeightPercent:b.upperPartHeight*100+"%"}}})}),
define("views/banner/banner.css",["require","exports","module","dpi"],function(a,b,c,d){var e=c.exports=document.createElement("style"),f=d(".banner.disabled{display:none}.banner{position:absolute;left:0;width:100%;height:36px;line-height:36px;background:#000;background:rgba(0,0,0,.8);color:#e5e5e5;text-align:center;font-size:13px}");e.styleSheet?e.styleSheet.cssText=f:e.appendChild(document.createTextNode(f)),f=null}),
define("views/sound/waveform-canvas",["require","exports","module","underscore","models/audible","lib/views/canvas-view","lib/circuit-breaker","vendor/color/color","config","lib/store","lib/support"],function(a,b,c){function w(a){var b=a.waveform,c=a.scaledWidth,d=a.scaledHeight,e=a.upperPartHeight,f=a.gapHeight,g=a.context,h=a.offset,j=Math.round(e*d),k=Math.round(d-j),l=c/r,m=i(a.bgColor),n=i(a.bottomBgColor),o,p,q,t,u,v,w,x,y,z,A,B,C=null,D=null,E=2,F=2,G=E+F;o=m.rgba(a.upperAlpha),q=n.rgba(a.lowerAlpha),p=g.createLinearGradient(0,0,0,d),p.addColorStop(0,m.lighten(20).rgba(0)),p.addColorStop(.6,m.lighten(12).rgba(.6*a.gapAlpha)),p.addColorStop(1,m.rgba(1*a.gapAlpha)),t=m.rgba(.25*a.gapAlpha);for(u=0;u<c;++u)B=G-u%G<=F,w=h+u,v=B?u+1:u,x=Math.ceil((v-v%G)/l),y=b[x]/s,z=Math.round(y*j),A=Math.round((1-y)*k+j),g.fillStyle=B?p:o,B&&(z=Math.max(z,C),A=Math.min(A,D)),g.fillRect(w,z,1,j-z),g.fillStyle=B?t:q,g.fillRect(w,j+f,1,A-j),C=z,D=A}function x(a){return $.ajax({url:j.get("wisHost")+"/"+a.replace(/\.png$/,".json"),type:"GET",dataType:"json"})}function y(){var a=this.model.getSounds(),b,c=this.elWidth,d=this.model.duration(),f;return a.length?f=a.map(function(a){return{duration:a.duration(),waveform_url:a.get("waveform_url")}}):f=[{duration:d,waveform_url:n}],b=f.map(function(a){var b=Math.round(c*a.duration/d),e=b>q?a.waveform_url:u[Math.floor(Math.random()*u.length)],f=$.Deferred(),g,h;return e.indexOf(o)>-1&&(e=n),h=e.split("/").pop(),g=t.get(h),g?f.resolve({data:g}):(f.done(function(a){t.set(a.key,a.data)}),v.enabled&&x(h).done(function(a){v.succeeded();var b=new m(a.samples.length);a.samples.forEach(function(c,d){b[d]=a.height-c}),f.resolve({key:h,data:b})}).fail(function(){v.failed()})),f}),$.when.apply($,b).then(function(){this.waveformData=e.pluck(arguments,"data")}.bind(this))}var d,e=a("underscore"),f=a("models/audible"),g=a("lib/views/canvas-view"),h=a("lib/circuit-breaker"),i=a("vendor/color/color"),j=a("config"),k=a("lib/store"),l=a("lib/support"),m=l.typedArrays?Uint8Array:Array,n="//w1.sndcdn.com/90GaSwazbrh1_m.png",o="/images/player-waveform-medium.png",p=500,q=15,r=1800,s=140,t=new k({maxLength:p}),u=["//w1.sndcdn.com/oQ4mQ28umFy9_m.png","//w1.sndcdn.com/yAsGo4Oj2vjn_m.png","//w1.sndcdn.com/XOsjuw7QwaPt_m.png","//w1.sndcdn.com/H9uGzKOYK5Ph_m.png","//w1.sndcdn.com/IHBAsSu3O7qn_m.png","//w1.sndcdn.com/wco8JS0UScQo_m.png"],v;d=c.exports=g.extend({className:"g-box-full waveformCanvas",defaults:{bgColor:"#333333",bottomBgColor:"#EEEEEE",gapAlpha:0,gapHeight:1,lowerAlpha:1,upperAlpha:1,upperPartHeight:.61},ModelClass:f,requiredAttributes:{sound:["waveform_url"]},waveformData:null,setup:function(){v||(v=new h({tolerance:5,baseDelay:2e3,maxDelay:12e4}))},onCanvasInserted:function(){this.renderWaveform()},onCanvasResize:function(){this.renderWaveform()},renderWaveform:function(){if(this.disposed)return;if(!this.waveformData)y.call(this).done(this.renderWaveform.bind(this));else{var a=this.options,b=this.context,c=this.elHeight,e=0;this.clearCanvas(),this.waveformData.forEach(function(d){var f=this.elWidth;w({waveform:d,scaledWidth:f,scaledHeight:c,context:b,offset:e,bgColor:a.bgColor,bottomBgColor:a.bottomBgColor,upperPartHeight:a.upperPartHeight,upperAlpha:a.upperAlpha,lowerAlpha:a.lowerAlpha,gapAlpha:a.gapAlpha,gapHeight:a.gapHeight}),e+=f},this),this.trigger(d.Events.RENDERED)}},renderWaveformDecorate:$.noop},{Events:{RENDERED:"waveform-canvas.rendered"}})}),
define("views/sound/waveform.tmpl",["vendor/handlebars-runtime","views/sound/waveform-canvas","views/listen/time-indicator","views/listen/scrubber"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f="",g,h=this.escapeExpression;return f+='<div class="waveform__layer waveform__waveformCanvases"> <div class="waveform__layer waveform__waveformCanvasPlayed"> '+h(c.$view.call(b,"views/sound/waveform-canvas",{hash:{resource_id:(g=b&&b.model,g==null||g===!1?g:g._resource_id),resource_type:(g=b&&b.model,g==null||g===!1?g:g._resource_type),key:"waveformCanvasPlayed",bgColor:"#FF6600",bottomBgColor:"#ffa366",className:"g-moving-element"},data:e}))+' </div> <div class="waveform__layer waveform__waveformCanvasUnplayed"> '+h(c.$view.call(b,"views/sound/waveform-canvas",{hash:{resource_id:(g=b&&b.model,g==null||g===!1?g:g._resource_id),resource_type:(g=b&&b.model,g==null||g===!1?g:g._resource_type),key:"waveformCanvasUnplayed",bgColor:"#FFFFFF",bottomBgColor:"#B3B3B3",className:"g-moving-element"},data:e}))+' </div>\n</div> <div class="waveform__timeIndicator"> '+h(c.$view.call(b,"views/listen/time-indicator",{hash:{resource_id:(g=b&&b.model,g==null||g===!1?g:g._resource_id),resource_type:(g=b&&b.model,g==null||g===!1?g:g._resource_type),key:"timeIndicator"},data:e}))+'\n</div> <div class="waveform__layer waveform__scrubber"> '+h(c.$view.call(b,"views/listen/scrubber",{hash:{resource_id:(g=b&&b.model,g==null||g===!1?g:g._resource_id),resource_type:(g=b&&b.model,g==null||g===!1?g:g._resource_type)},data:e}))+"\n</div> ",f})}),
define("views/sound/waveform.css",["require","exports","module","dpi"],function(a,b,c,d){var e=c.exports=document.createElement("style"),f=d(".waveform{height:100%;pointer-events:none}.waveform,.waveform__layer{width:100%;position:absolute}.waveform__layer{height:87px;bottom:7%;overflow:hidden;pointer-events:auto;-ms-touch-action:none;touch-action:none}.waveform__layer .waveform__layer{bottom:0}.waveform__timeIndicator{position:absolute;bottom:7%;margin-bottom:34px;display:inline-block;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);transition:bottom .15s linear;z-index:2}.waveform:not(.playing) .waveform__timeIndicator .timeIndicator__container,.waveform.scrubbing .waveform__timeIndicator .timeIndicator__container{background:none}.waveform.scrubbing .waveform__timeIndicator{bottom:46%;transition-timing-function:cubic-bezier(.51,.37,.61,1.6);transition-duration:.25s}.waveform.scrubbing .timeIndicator__text{font-size:20px}.waveform__waveformCanvases{clip:rect(50px,auto,53px,0);-webkit-transform:scaleY(.5);transform:scaleY(.5);-webkit-transform-origin:0 54px;transform-origin:0 54px;-webkit-transition:all .2s cubic-bezier(.68,.68,.165,1);transition:all .2s cubic-bezier(.68,.68,.165,1);z-index:0}.waveform.playing .waveform__waveformCanvases{clip:rect(0,auto,87px,0);-webkit-transform:scaleY(1);transform:scaleY(1);transition:all .45s cubic-bezier(.68,.68,.165,1.45);-webkit-transition:all .45s cubic-bezier(.68,.68,.165,1.45)}.waveform__waveformCanvasPlayed,.waveform__waveformCanvasUnplayed{z-index:1}.waveform__waveformCanvasPlayed{right:50%}.waveform__waveformCanvasPlayed canvas{-webkit-transform:translateX(100%);transform:translateX(100%)}.waveform__waveformCanvasUnplayed{left:50%}.waveform__waveformCanvasUnplayed canvas{-webkit-transform:translateX(0);transform:translateX(0)}.waveform__scrubber{z-index:3}");e.styleSheet?e.styleSheet.cssText=f:e.appendChild(document.createTextNode(f)),f=null}),
define("models/audible",["require","exports","module","underscore","models/playlist","models/sound"],function(a,b,c){var d,e=a("underscore"),f=a("models/playlist"),g=a("models/sound");d=c.exports=function(a,b){var c=a.resource_type||a.kind;return a=e.omit(a,"resource_type"),c==="playlist"?new f(a,b):new g(a,b)},d.getClass=function(a){var b=a.resource_type;return b==="playlist"?f:g}}),
define("lib/views/canvas-view",["require","exports","module","lib/helpers/client-environment-helper","lib/view","lib/window-events"],function(a,b,c){function h(){try{var a=this.el.offsetWidth,b=this.el.offsetHeight;if(this.elWidth!==a||this.elHeight!==b)i.call(this,a,b),this.onCanvasResize()}catch(c){}}function i(a,b){var c;this.elWidth=a||this.el.offsetWidth,this.elHeight=b||this.el.offsetHeight,this.el.setAttribute("width",this.elWidth),this.el.setAttribute("height",this.elHeight),e.device.isHiDPI&&(c=e.device.devicePixelRatio/e.browser.backingStoreRatio,c!==1&&(this.el.setAttribute("width",this.elWidth*c),this.el.setAttribute("height",this.elHeight*c),this.context.scale(c,c)))}var d,e=a("lib/helpers/client-environment-helper"),f=a("lib/view"),g=a("lib/window-events");d=c.exports=f.extend({tagName:"canvas",className:"g-box-full",context:null,template:function(){return""},_setup:function(){this.context=this.el.getContext("2d"),g.on("resize:debounced",h,this),f.prototype._setup.apply(this,arguments)},_dispose:function(){if(this.disposed)return;g.off("resize:debounced",h,this),delete this.context,delete this.elWidth,delete this.elHeight,f.prototype._dispose.apply(this,arguments)},renderDecorate:function(){this.whenInserted().done(function(){i.call(this),this.onCanvasInserted()}.bind(this))},onCanvasInserted:$.noop,onCanvasResize:$.noop,forceResize:function(){this._onWindowResize()},clearCanvas:function(){this.context&&this.context.clearRect(0,0,this.elWidth,this.elHeight)}})}),
define("lib/circuit-breaker",["require","exports","module","underscore","lib/backbone"],function(a,b,c){var d,e=a("underscore"),f=a("lib/backbone");d=c.exports=Class.extend({enabled:!0,_breakCount:0,_failCount:0,_maxBreaks:0,_timeoutId:null,defaults:{tolerance:1,baseDelay:1e3,maxDelay:3e4,backoffRate:2},initialize:function(a){a=this.options=e.extend({},this.defaults,a),this._currentDelay=a.baseDelay;var b=a.maxDelay/a.baseDelay;while(b>1)++this._maxBreaks,b/=a.backoffRate},dispose:function(){this.clearTimeout()},clearTimeout:function(){this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=null)},failed:function(){++this._failCount>=this.options.tolerance&&this.disable()},succeeded:function(){this._breakCount=this._failCount=0},disable:function(){if(this.enabled){this.enabled=!1,this._breakCount<this._maxBreaks&&++this._breakCount;var a=Math.min(this.options.baseDelay*Math.pow(this.options.backoffRate,Math.floor(Math.random()*this._breakCount)),this.options.maxDelay);this.trigger("disabled",{delay:a}),this._timeoutId=setTimeout(this.enable.bind(this),a)}},enable:function(){this.enabled||(this.enabled=!0,this._failCount=0,this.trigger("enabled"))}}),e.extend(d.prototype,f.Events)}),
define("vendor/color/color",["require","exports","module"],function(a,b,c){(function(){function j(a){return a===void 0}function k(a){return parseInt(a,16)}function l(a){return parseInt(a,10)}function m(a){return a.length===1?"0"+a:""+a}function n(a){return typeof a=="string"&&a.indexOf(".")!==-1&&parseFloat(a)===1}function o(a){return typeof a=="string"&&a.indexOf("%")!==-1}function p(a){return g(1,h(0,a))}function q(a,b){n(a)&&(a="100%");var c=o(a);return a=g(b,h(0,parseFloat(a))),c&&(a=parseInt(a*b,10)/100),d.abs(a-b)<1e-6?1:a%b/parseFloat(b)}function r(a){return[m(f(a.r).toString(16)),m(f(a.g).toString(16)),m(f(a.b).toString(16))].join("")}function s(a){function h(a,b,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?a+(b-a)*6*c:c<.5?b:c<2/3?a+(b-a)*(2/3-c)*6:a}var b,c,d,e=q(a.h,360),f=q(a.s,100),g=q(a.l,100);if(f===0)b=c=d=g;else{var i=g<.5?g*(1+f):g+f-g*f,j=2*g-i;b=h(j,i,e+1/3),c=h(j,i,e),d=h(j,i,e-1/3)}return{r:b*255,g:c*255,b:d*255}}function t(a){var b=q(a.r,255),c=q(a.g,255),d=q(a.b,255),e=h(b,c,d),i=g(b,c,d),j,k,l=(e+i)/2;if(e===i)j=k=0;else{var m=e-i;k=l>.5?m/(2-e-i):m/(e+i);switch(e){case b:j=(c-d)/m+(c<d?6:0);break;case c:j=(d-b)/m+2;break;case d:j=(b-c)/m+4}j/=6}return{h:f(j*360),s:f(k*100),l:f(l*100)}}function u(c){c=c.replace(a,"").replace(b,"").toLowerCase();var d;return(d=i.rgb.exec(c))?{r:l(d[1]),g:l(d[2]),b:l(d[3])}:(d=i.hsl.exec(c))?{h:l(d[1]),s:l(d[2]),l:l(d[3])}:(d=i.hex6.exec(c))?{r:k(d[1]),g:k(d[2]),b:k(d[3])}:(d=i.hex3.exec(c))?{r:k(d[1]+""+d[1]),g:k(d[2]+""+d[2]),b:k(d[3]+""+d[3])}:!1}function v(a){var b=null;return typeof a=="string"&&(a=u(a)),typeof a=="object"&&(a.hasOwnProperty("r")&&a.hasOwnProperty("g")&&a.hasOwnProperty("b")?b=a:a.hasOwnProperty("h")&&a.hasOwnProperty("s")&&a.hasOwnProperty("l")&&(b=s(a))),b}function w(a){var b=this.toHsl();return b.h+=l(a),D(b)}function x(a){var b=this.toHsl();return b.l-=l(a),h(0,b.l),D(b)}function y(a){var b=this.toHsl();return b.l+=l(a),g(100,b.l),D(b)}function z(a,b){a=a||6,b=b||30;var c=this.toHsl(),d=360/b,e=[D(c)];for(c.h=(c.h-(d*a>>1)+720)%360;--a;)c.h=(c.h+d)%360,e.push(D(c));return e}function A(a){var b=this.toRgb(),c=D(a).toRgb(),d=(b.r*299+b.g*587+b.b*114)/1e3,f=(c.r*299+c.g*587+c.b*114)/1e3,i=h(b.r,c.r)-g(b.r,c.r)+h(b.g,c.g)-g(b.g,c.g)+h(b.b,c.b)-g(b.b,c.b);return{brightness:e(d-f),color:i}}function B(a){var b=this.diff(a);return b.brightness>125&&b.color>500}function C(a,b){var c=this.diff(a||"#000"),d=this.diff(b||"#fff");return c.brightness>d.brightness&&c.color>d.color?D(a):D(b)}var a=/^[\s,#]+/,b=/\s+$/,d=Math,e=d.abs,f=d.round,g=d.min,h=d.max,i=function(){var a="[-\\+]?\\d+%?",b="[-\\+]?\\d*\\.\\d+%?",c="(?:"+b+")|(?:"+a+")",d="[\\s|\\(]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")\\s*\\)?";return{rgb:new RegExp("rgb"+d),hsl:new RegExp("hsl"+d),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}(),D=function(a){var b=v(a);return{hue:function(a){return w.call(this,a)},darken:function(a){return x.call(this,a)},lighten:function(a){return y.call(this,a)},analogous:function(a,b){return z.call(this,a,b)},readable:function(a){return B.call(this,a)},diff:function(a){return A.call(this,a)},contrast:function(a,b){return C.call(this,a,b)},hex:function(){return b?"#"+r(b):null},toRgb:function(){return b},isValid:function(){return b?!0:!1},rgb:function(){return b?"rgb("+[f(b.r),f(b.g),f(b.b)].join(", ")+")":null},rgba:function(a){return b?"rgba("+[f(b.r),f(b.g),f(b.b),j(a)?1:p(a)].join(", ")+")":null},toHsl:function(){return t(b)},hsl:function(){var a=t(b);return b?"hsl("+a.h+", "+a.s+"%, "+a.l+"%)":null}}};typeof c!="undefined"&&c.exports?c.exports=D:(global=function(){return this}(),global.SC=global.SC||{},global.SC.color=D)})()}),
define("views/listen/time-indicator",["require","exports","module","underscore","lib/helpers/datetime-helper","lib/views/progress-bar","views/listen/time-indicator.tmpl","views/listen/time-indicator.css"],function(a,b,c){var d,e=a("underscore"),f=a("lib/helpers/datetime-helper"),g=a("lib/views/progress-bar"),h=1e3/60;d=c.exports=g.extend({template:a("views/listen/time-indicator.tmpl"),css:a("views/listen/time-indicator.css"),className:"timeIndicator",element2selector:{current:".timeIndicator__current"},setup:function(){g.prototype.setup.apply(this,arguments),this._isScrubbing=!1,this.updateTimeDisplay=e.throttle(this.updateTimeDisplay.bind(this),h)},getTemplateData:function(a){a.timecode=f.timecode(a.duration)},manualProgress:function(a){this.updateTimeDisplay(a*this.model.duration())},updateProgress:function(a){this._isScrubbing||this.updateTimeDisplay(a)},toggleScrubbing:function(a){this._isScrubbing=a},updateTimeDisplay:function(a){var b=a?a:this.model.currentTime();b=Math.floor(b/1e3+.1)*1e3,this.getElement("current")[0].innerHTML=f.timecode(b)}})}),
define("views/listen/scrubber",["require","exports","module","lib/views/mixins/draggable","lib/event-bus","models/sound","lib/view"],function(a,b,c){function i(){f.trigger("scrub:start"),this.bubble("scrubStart")}function j(a){this.bubble("scrub",{delta:a.data.delta})}function k(){f.trigger("scrub:end"),this.bubble("scrubEnd")}var d,e=a("lib/views/mixins/draggable"),f=a("lib/event-bus"),g=a("models/sound"),h=a("lib/view");d=c.exports=h.extend(e,{className:"scrubber g-box-full",template:function(){return""},ModelClass:g,events:{"draggable-start":i,"draggable-drag":j,"draggable-end":k},setup:function(){this.el.style.background="rgba(0,0,0,0)"}})}),
define("lib/views/progress-bar",["require","exports","module","underscore","$","models/sound","lib/view","lib/window-events"],function(a,b,c){function n(a){var b=a?"on":"off";j[b]("pointerup",u,this)[b]("pointerdown",t,this),i[b]("resize:debounced",z,this)[b]("resize:debounced",this.getWidth.bind(this,!0),this),this.model[b]("finish",r,this)[b]("seeked",q,this)[b]("manually-seeked",q,this)[b]("play",p,this)[b]("pause",o,this)}function o(){y.call(this)}function p(){x.call(this)}function q(){s.call(this)}function r(){s.call(this)}function s(){var a=this.model.currentTime();if(this.disposed||this.isUserScrubbing&&!a)return;this.playedProgress=a?v.call(this,a):this.getPlayedProgress(),this.updateProgress(a)}function t(){this.isUserScrubbing=!0}function u(){e.delay(function(){this.isUserScrubbing=!1}.bind(this),m)}function v(a){return a/this.model.duration()}function w(a){var b=this._throttleTime,c;!a&&!this.isUserScrubbing&&s.call(this),c=Math.max(k,b&&b-this.model.currentTime()%b),this._throttleTimeout=setTimeout(w.bind(this,this.isUserScrubbing),c)}function x(){this.model.isPlaying()&&(this._throttleTime||z.call(this),this._throttleTimeout||w.call(this))}function y(){clearTimeout(this._throttleTimeout),this._throttleTimeout=null}function z(){if(this.disposed)return;var a=this.el.clientWidth,b;a!==this._lastContainerSize&&(this._lastContainerSize=a,b=this.model.duration(),this._throttleTime=Math.max(k,Math.floor(b/a)),this._throttleTime=Math.min(this._throttleTime,l))}var d,e=a("underscore"),f=a("$"),g=a("models/sound"),h=a("lib/view"),i=a("lib/window-events"),j=f(document),k=50,l=250,m=300;d=c.exports=h.extend({ModelClass:g,setup:function(){this.loadedProgress=this.getLoadedProgress(),this.playedProgress=this.getPlayedProgress(),this.isFullyLoaded=!1,this.isUserScrubbing=!1,n.call(this,!0)},dispose:function(){n.call(this,!1)},renderDecorate:function(){x.call(this)},teardown:function(){y.call(this)},updateProgress:f.noop,getLoadedProgress:function(){return this.model.loadProgress()},getPlayedProgress:function(){return this.model.currentTime()},calculateProgressPixels:function(a){return Math.floor(this.getWidth()*a)},getWidth:function(a){return a=this.el.parentNode?a:!0,this._width=a?this.el.offsetWidth:this._width||this.el.offsetWidth,this._width}})}),
define("views/listen/time-indicator.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f="",g,h="function",i=this.escapeExpression;return f+='<div class="timeIndicator__container"> <span class="timeIndicator__current timeIndicator__text">0.00</span> <span class="timeIndicator__divider timeIndicator__text">|</span> <span class="timeIndicator__total timeIndicator__text">'+i((g=b&&b.timecode,typeof g===h?g.apply(b):g))+"</span>\n</div>\n",f})}),
define("views/listen/time-indicator.css",["require","exports","module","dpi"],function(a,b,c,d){var e=c.exports=document.createElement("style"),f=d(".timeIndicator__container{background:rgba(0,0,0,.8);height:20px;line-height:20px;font-size:0;white-space:nowrap}.timeIndicator__current{color:#fff}.timeIndicator__text{font-size:12px;transition:font-size .15s cubic-bezier(.51,.37,.61,1.6)}.timeIndicator__current,.timeIndicator__total{padding:0 5px}.timeIndicator__divider,.timeIndicator__total{color:#999}");e.styleSheet?e.styleSheet.cssText=f:e.appendChild(document.createTextNode(f)),f=null}),
define("lib/views/mixins/draggable",["require","exports","module","$","lib/animation","lib/mixin","lib/window-events"],function(a,b,c){function j(a){this.el=a,this.width=null,this.coords=null,this.reset(),this.onPointerMove=n.bind(this),this.onPointerUp=o.bind(this),this.onPointerDown=m.bind(this),k.call(this,!0)}function k(a){var b=a?"on":"off";this.el[b?"addEventListener":"removeEventListener"]("pointerdown",this.onPointerDown),g[b?"on":"off"]("resize:debounced",p,this)}function l(a){var b=a?"on":"off";h[b]("pointerup",this.onPointerUp)[b]("pointermove",this.onPointerMove)}function m(a){this.kineticMoveAnimation&&this.kineticMoveAnimation.reject(),this.dispatchEvent("start"),this.dispatchEvent("drag",0),this.lastPointerX=a.x,l.call(this,!0)}function n(a){a.maskedEvent.preventDefault();var b=a.x,c=this.lastPointerX-b;this.startMoveTimestamp=this.startMoveTimestamp||Date.now(),this.deltas.push(c),this.lastPointerX=b,(c>.01||c<-0.01)&&this.dispatchEvent("drag",c)}function o(){var a,b,c,d,f=0;d=this.deltas.length?this.deltas[this.deltas.length-1]:0,a=d>0?1:-1,b=this.deltas.reduce(function(a,b){return a+Math.abs(b)},0),c=b/this.deltas.length,c<3&&(f=c),this.kineticMoveAnimation=e.animateValue(i,f,c*1.3,"ease-out-cubic").progress(function(b,c){var d=a*(b-c);this.dispatchEvent("drag",d)}.bind(this)).always(function(){this.dispatchEvent("end"),this.reset()}.bind(this)),l.call(this,!1)}function p(){this.width=null,this.coords=null}var d=a("$"),e=a("lib/animation"),f=a("lib/mixin"),g=a("lib/window-events"),h=d(document),i=250;c.exports=new f({before:{setup:function(){this._draggableEl=new j(this.el)},dispose:function(){this._draggableEl.dispose(),delete this._draggableEl}}}),j.prototype={constructor:j,reset:function(){this.deltas=[],this.lastPointerX=0,this.startMoveTimestamp=null,this.kineticMoveAnimation=null},getWidth:function(){return this.width=this.width||this.el.offsetWidth,this.width},dispose:function(){k.call(this,!1)},dispatchEvent:function(a,b){var c=document.createEvent("CustomEvent");c.initCustomEvent("draggable-"+a,!0,!0,{}),b!==void 0&&(c.data={delta:b/this.getWidth()}),this.el.dispatchEvent(c)}}}),
define("lib/animation",["require","exports","module","$"],function(a,b,c){function h(a,b){var c=e.Deferred();return a.removeClass("g-opacity-transition").css({opacity:b?0:1}).addClass("g-opacity-transition").css({opacity:b?1:0}),i(g).progress(c.notify).done(function(){a.removeClass("g-opacity-transition"),c.resolve()}),c}function i(a){var b=e.Deferred(),c=Date.now(),d,f,g;return g=setInterval(function(){f=Date.now()-c,d=Math.min(1,f/a),b.notify(d),d===1&&(b.resolve(),clearInterval(g))},16),b.fail(function(){clearInterval(g)}),b}function j(a,b,c,d){return c*a/d+b}function k(a,b,c,d){return c*(a/=d)*a+b}function l(a,b,c,d){return-c*(a/=d)*(a-2)+b}function m(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b}function n(a,b,c,d){return c*(a/=d)*a*a+b}function o(a,b,c,d){return c*((a=a/d-1)*a*a+1)+b}var d,e=a("$"),f={linear:j,"ease-in":k,"ease-out":l,"ease-in-out":m,"ease-in-cubic":n,"ease-out-cubic":o},g=200;d=c.exports={fadeOut:function(a,b){return h(a,!1,b)},fadeIn:function(a,b){return h(a,!0,b)},animateValue:function(a,b,c,d){var g=e.Deferred(),h=c-b,j=i(a),k=f[d]||f.linear,l=b;return h?(j.progress(function(c){var d=a*c,e=k(d,b,h,a);g.notify(e,l),l=e}).done(g.resolve),g.fail(j.reject),g):g.resolve()}}})</script><script>require(['lib/lingua'],function(L){ L.initializeFromUserSettings(); require(['application', '$'],function(A, $){ window.$ = $; A.start('f0f329db',{"_prefix":"https://m.soundcloud.com","layouts/error":"/assets/layouts/error-RHgT-505e647c.js","layouts/home":"/assets/layouts/home-o5kh-4317a01f.js","layouts/messages":"/assets/layouts/messages-51bX-3b1832fe.js","layouts/mobile-apps":"/assets/layouts/mobile-apps-i12O-3b1832fe.js","layouts/playlist":"/assets/layouts/playlist-HCMg-7e53770a.js","layouts/search":"/assets/layouts/search-saCo-cd7e77e4.js","layouts/static-page":"/assets/layouts/static-page-QtaF-bf57b5c0.js","layouts/unsubscribed":"/assets/layouts/unsubscribed-GIq6-505e647c.js","layouts/user-profile":"/assets/layouts/user-profile-sQz6-4317a01f.js"}); }); function getParameterByName(name) { name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]'); var regex = new RegExp('[\\?&]' + name + '=([^&#]*)'), results = regex.exec(location.search); return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' ')); }});</script></body>
</html>
